{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\admin\\\\PersonalSecuritySettingsScreen.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useProfile } from '../../context/ProfileContext';\nimport { supabase } from '../../lib/supabase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PersonalSecuritySettingsScreen = ({\n  navigateTo\n}) => {\n  const {\n    profile\n  } = useProfile();\n  const [twoFactor, setTwoFactor] = useState(false);\n  useEffect(() => {\n    const fetchSettings = async () => {\n      if (profile.id) {\n        const {\n          data,\n          error\n        } = await supabase.from('users').select('two_factor_enabled').eq('id', profile.id).single();\n        if (data) {\n          setTwoFactor(data.two_factor_enabled || false);\n        }\n      }\n    };\n    fetchSettings();\n  }, [profile.id]);\n  const toggleTwoFactor = async () => {\n    setTwoFactor(!twoFactor);\n    if (profile.id) {\n      const {\n        error\n      } = await supabase.from('users').update({\n        two_factor_enabled: !twoFactor\n      }).eq('id', profile.id);\n      if (error) {\n        console.error('Error updating 2FA:', error);\n        setTwoFactor(twoFactor);\n      }\n    }\n  };\n  return _jsxDEV(\"div\", {\n    className: \"p-4 space-y-4 bg-gray-50 h-full\",\n    children: _jsxDEV(\"div\", {\n      className: \"bg-white p-4 rounded-xl shadow-sm\",\n      children: [_jsxDEV(\"h3\", {\n        className: \"font-bold text-gray-800 mb-2\",\n        children: \"My Security\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"flex justify-between items-center py-2\",\n        children: [_jsxDEV(\"div\", {\n          children: [_jsxDEV(\"p\", {\n            className: \"font-semibold text-gray-700\",\n            children: \"Enable Two-Factor Authentication\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 25\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Secure your account with an extra layer.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 21\n        }, this), _jsxDEV(\"button\", {\n          type: \"button\",\n          role: \"switch\",\n          \"aria-checked\": twoFactor,\n          onClick: toggleTwoFactor,\n          className: `relative inline-flex items-center h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 ${twoFactor ? 'bg-sky-600' : 'bg-gray-300'}`,\n          children: _jsxDEV(\"span\", {\n            \"aria-hidden\": \"true\",\n            className: `inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${twoFactor ? 'translate-x-5' : 'translate-x-0'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"mt-4 pt-4 border-t\",\n        children: _jsxDEV(\"button\", {\n          onClick: () => navigateTo('changePassword', 'Change Password', {}),\n          className: \"w-full text-left font-semibold text-gray-700 py-2 hover:text-sky-600\",\n          children: \"Change Your Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\nexport default PersonalSecuritySettingsScreen;","map":{"version":3,"names":["React","useState","useEffect","useProfile","supabase","jsxDEV","_jsxDEV","PersonalSecuritySettingsScreen","navigateTo","profile","twoFactor","setTwoFactor","fetchSettings","id","data","error","from","select","eq","single","two_factor_enabled","toggleTwoFactor","update","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","role","onClick"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/admin/PersonalSecuritySettingsScreen.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useProfile } from '../../context/ProfileContext';\r\nimport { supabase } from '../../lib/supabase';\r\n\r\nconst PersonalSecuritySettingsScreen: React.FC<{ navigateTo: (view: string, title: string, props?: any) => void; }> = ({ navigateTo }) => {\r\n    const { profile } = useProfile();\r\n    const [twoFactor, setTwoFactor] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchSettings = async () => {\r\n            if (profile.id) {\r\n                const { data, error } = await supabase\r\n                    .from('users')\r\n                    .select('two_factor_enabled')\r\n                    .eq('id', profile.id)\r\n                    .single();\r\n\r\n                if (data) {\r\n                    setTwoFactor(data.two_factor_enabled || false);\r\n                }\r\n            }\r\n        };\r\n        fetchSettings();\r\n    }, [profile.id]);\r\n\r\n    const toggleTwoFactor = async () => {\r\n        setTwoFactor(!twoFactor);\r\n\r\n        if (profile.id) {\r\n            const { error } = await supabase\r\n                .from('users')\r\n                .update({ two_factor_enabled: !twoFactor })\r\n                .eq('id', profile.id);\r\n\r\n            if (error) {\r\n                console.error('Error updating 2FA:', error);\r\n                setTwoFactor(twoFactor);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-4 space-y-4 bg-gray-50 h-full\">\r\n            <div className=\"bg-white p-4 rounded-xl shadow-sm\">\r\n                <h3 className=\"font-bold text-gray-800 mb-2\">My Security</h3>\r\n                <div className=\"flex justify-between items-center py-2\">\r\n                    <div>\r\n                        <p className=\"font-semibold text-gray-700\">Enable Two-Factor Authentication</p>\r\n                        <p className=\"text-sm text-gray-500\">Secure your account with an extra layer.</p>\r\n                    </div>\r\n                    <button type=\"button\" role=\"switch\" aria-checked={twoFactor} onClick={toggleTwoFactor} className={`relative inline-flex items-center h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 ${twoFactor ? 'bg-sky-600' : 'bg-gray-300'}`}>\r\n                        <span aria-hidden=\"true\" className={`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${twoFactor ? 'translate-x-5' : 'translate-x-0'}`} />\r\n                    </button>\r\n                </div>\r\n                <div className=\"mt-4 pt-4 border-t\">\r\n                    <button onClick={() => navigateTo('changePassword', 'Change Password', {})} className=\"w-full text-left font-semibold text-gray-700 py-2 hover:text-sky-600\">\r\n                        Change Your Password\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default PersonalSecuritySettingsScreen;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,UAAU,QAAQ,8BAA8B;AACzD,SAASC,QAAQ,QAAQ,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,8BAA6G,GAAGA,CAAC;EAAEC;AAAW,CAAC,KAAK;EACtI,MAAM;IAAEC;EAAQ,CAAC,GAAGN,UAAU,CAAC,CAAC;EAChC,MAAM,CAACO,SAAS,EAAEC,YAAY,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAEjDC,SAAS,CAAC,MAAM;IACZ,MAAMU,aAAa,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAIH,OAAO,CAACI,EAAE,EAAE;QACZ,MAAM;UAAEC,IAAI;UAAEC;QAAM,CAAC,GAAG,MAAMX,QAAQ,CACjCY,IAAI,CAAC,OAAO,CAAC,CACbC,MAAM,CAAC,oBAAoB,CAAC,CAC5BC,EAAE,CAAC,IAAI,EAAET,OAAO,CAACI,EAAE,CAAC,CACpBM,MAAM,CAAC,CAAC;QAEb,IAAIL,IAAI,EAAE;UACNH,YAAY,CAACG,IAAI,CAACM,kBAAkB,IAAI,KAAK,CAAC;QAClD;MACJ;IACJ,CAAC;IACDR,aAAa,CAAC,CAAC;EACnB,CAAC,EAAE,CAACH,OAAO,CAACI,EAAE,CAAC,CAAC;EAEhB,MAAMQ,eAAe,GAAG,MAAAA,CAAA,KAAY;IAChCV,YAAY,CAAC,CAACD,SAAS,CAAC;IAExB,IAAID,OAAO,CAACI,EAAE,EAAE;MACZ,MAAM;QAAEE;MAAM,CAAC,GAAG,MAAMX,QAAQ,CAC3BY,IAAI,CAAC,OAAO,CAAC,CACbM,MAAM,CAAC;QAAEF,kBAAkB,EAAE,CAACV;MAAU,CAAC,CAAC,CAC1CQ,EAAE,CAAC,IAAI,EAAET,OAAO,CAACI,EAAE,CAAC;MAEzB,IAAIE,KAAK,EAAE;QACPQ,OAAO,CAACR,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC3CJ,YAAY,CAACD,SAAS,CAAC;MAC3B;IACJ;EACJ,CAAC;EAED,OACIJ,OAAA;IAAKkB,SAAS,EAAC,iCAAiC;IAAAC,QAAA,EAC5CnB,OAAA;MAAKkB,SAAS,EAAC,mCAAmC;MAAAC,QAAA,GAC9CnB,OAAA;QAAIkB,SAAS,EAAC,8BAA8B;QAAAC,QAAA,EAAC;MAAW;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAC7DvB,OAAA;QAAKkB,SAAS,EAAC,wCAAwC;QAAAC,QAAA,GACnDnB,OAAA;UAAAmB,QAAA,GACInB,OAAA;YAAGkB,SAAS,EAAC,6BAA6B;YAAAC,QAAA,EAAC;UAAgC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,EAC/EvB,OAAA;YAAGkB,SAAS,EAAC,uBAAuB;YAAAC,QAAA,EAAC;UAAwC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChF,CAAC,EACNvB,OAAA;UAAQwB,IAAI,EAAC,QAAQ;UAACC,IAAI,EAAC,QAAQ;UAAC,gBAAcrB,SAAU;UAACsB,OAAO,EAAEX,eAAgB;UAACG,SAAS,EAAE,sOAAsOd,SAAS,GAAG,YAAY,GAAG,aAAa,EAAG;UAAAe,QAAA,EAC/WnB,OAAA;YAAM,eAAY,MAAM;YAACkB,SAAS,EAAE,0GAA0Gd,SAAS,GAAG,eAAe,GAAG,eAAe;UAAG;YAAAgB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7L,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,EACNvB,OAAA;QAAKkB,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAC/BnB,OAAA;UAAQ0B,OAAO,EAAEA,CAAA,KAAMxB,UAAU,CAAC,gBAAgB,EAAE,iBAAiB,EAAE,CAAC,CAAC,CAAE;UAACgB,SAAS,EAAC,sEAAsE;UAAAC,QAAA,EAAC;QAE7J;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AACD,eAAetB,8BAA8B","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}