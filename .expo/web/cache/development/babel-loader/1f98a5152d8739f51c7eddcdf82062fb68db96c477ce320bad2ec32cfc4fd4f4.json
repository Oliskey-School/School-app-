{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\admin\\\\AdminDashboard.tsx\";\nimport React, { useState, useEffect, lazy, Suspense } from 'react';\nimport Header from '../ui/Header';\nimport { AdminBottomNav } from '../ui/DashboardBottomNav';\nimport { AdminSidebar } from '../ui/DashboardSidebar';\nimport { DashboardType } from '../../types';\nimport { supabase } from '../../lib/supabase';\nimport ErrorBoundary from '../shared/ErrorBoundary';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GlobalSearchScreen = lazy(() => import('../shared/GlobalSearchScreen'));\nconst DashboardOverview = lazy(() => import('./DashboardOverview'));\nconst AnalyticsScreen = lazy(() => import('./AnalyticsScreen'));\nconst ClassListScreen = lazy(() => import('./ClassListScreen'));\nconst StudentListScreen = lazy(() => import('./StudentListScreen'));\nconst AddStudentScreen = lazy(() => import('./AddStudentScreen'));\nconst TeacherListScreen = lazy(() => import('./TeacherListScreen'));\nconst TeacherPerformanceScreen = lazy(() => import('./TeacherPerformanceScreen'));\nconst TimetableEditor = lazy(() => import('./TimetableEditor'));\nconst TeacherAttendanceScreen = lazy(() => import('./TeacherAttendanceScreen'));\nconst TeacherAttendanceApproval = lazy(() => import('./TeacherAttendanceApproval'));\nconst FeeManagement = lazy(() => import('./FeeManagement'));\nconst FeeDetailsScreen = lazy(() => import('./FeeDetailsScreen'));\nconst ExamManagement = lazy(() => import('./ExamManagement'));\nconst AddExamScreen = lazy(() => import('./AddExamScreen'));\nconst ReportCardPublishing = lazy(() => import('./ReportCardPublishing'));\nconst UserRolesScreen = lazy(() => import('./UserRolesScreen'));\nconst AuditLogScreen = lazy(() => import('./AuditLogScreen'));\nconst ProfileSettings = lazy(() => import('./ProfileSettings'));\nconst CommunicationHub = lazy(() => import('./CommunicationHub'));\nconst ReportsScreen = lazy(() => import('./ReportsScreen'));\nconst StudentProfileAdminView = lazy(() => import('./StudentProfileAdminView'));\nconst EditProfileScreen = lazy(() => import('./EditProfileScreen'));\nconst NotificationsSettingsScreen = lazy(() => import('./NotificationsSettingsScreen'));\nconst SecuritySettingsScreen = lazy(() => import('./SecuritySettingsScreen'));\nconst ChangePasswordScreen = lazy(() => import('./ChangePasswordScreen'));\nconst OnlineStoreScreen = lazy(() => import('./OnlineStoreScreen'));\nconst AdminSelectClassForReport = lazy(() => import('./AdminSelectClassForReport'));\nconst AdminStudentListForReport = lazy(() => import('./AdminStudentListForReport'));\nconst AdminStudentReportCardScreen = lazy(() => import('./AdminStudentReportCardScreen'));\nconst SystemSettingsScreen = lazy(() => import('./SystemSettingsScreen'));\nconst AcademicSettingsScreen = lazy(() => import('./AcademicSettingsScreen'));\nconst FinancialSettingsScreen = lazy(() => import('./FinancialSettingsScreen'));\nconst CommunicationSettingsScreen = lazy(() => import('./CommunicationSettingsScreen'));\nconst BrandingSettingsScreen = lazy(() => import('./BrandingSettingsScreen'));\nconst PersonalSecuritySettingsScreen = lazy(() => import('./PersonalSecuritySettingsScreen'));\nconst TeacherDetailAdminView = lazy(() => import('./TeacherDetailAdminView'));\nconst TeacherAttendanceDetail = lazy(() => import('./TeacherAttendanceDetail'));\nconst AttendanceOverviewScreen = lazy(() => import('./AttendanceOverviewScreen'));\nconst ClassAttendanceDetailScreen = lazy(() => import('./ClassAttendanceDetailScreen'));\nconst AdminSelectTermForReport = lazy(() => import('./AdminSelectTermForReport'));\nconst AdminMessagesScreen = lazy(() => import('./AdminMessagesScreen'));\nconst AdminNewChatScreen = lazy(() => import('./AdminNewChatScreen'));\nconst HealthLogScreen = lazy(() => import('./HealthLogScreen'));\nconst TimetableGeneratorScreen = lazy(() => import('./TimetableGeneratorScreen'));\nconst BusDutyRosterScreen = lazy(() => import('./BusDutyRosterScreen'));\nconst EmergencyAlert = lazy(() => import('./EmergencyAlert'));\nconst VisitorLog = lazy(() => import('./VisitorLog'));\nconst PanicButton = lazy(() => import('../shared/PanicButton'));\nconst PermissionSlips = lazy(() => import('../shared/PermissionSlips'));\nconst MentalHealthResources = lazy(() => import('../shared/MentalHealthResources'));\nconst AccessibilitySettings = lazy(() => import('../shared/AccessibilitySettings'));\nconst SMSLessonManager = lazy(() => import('./SMSLessonManager'));\nconst USSDWorkflow = lazy(() => import('./USSDWorkflow'));\nconst RadioContentScheduler = lazy(() => import('./RadioContentScheduler'));\nconst IVRLessonRecorder = lazy(() => import('./IVRLessonRecorder'));\nconst ScholarshipManagement = lazy(() => import('./ScholarshipManagement'));\nconst SponsorshipMatching = lazy(() => import('./SponsorshipMatching'));\nconst ConferenceScheduling = lazy(() => import('../shared/ConferenceScheduling'));\nconst SurveysAndPolls = lazy(() => import('../shared/SurveysAndPolls'));\nconst DonationPortal = lazy(() => import('../shared/DonationPortal'));\nconst CommunityResourceDirectory = lazy(() => import('../shared/CommunityResourceDirectory'));\nconst ReferralSystem = lazy(() => import('../shared/ReferralSystem'));\nconst AttendanceHeatmap = lazy(() => import('./AttendanceHeatmap'));\nconst FinanceDashboard = lazy(() => import('./FinanceDashboard'));\nconst AcademicAnalytics = lazy(() => import('./AcademicAnalytics'));\nconst BudgetPlanner = lazy(() => import('./BudgetPlanner'));\nconst AuditTrailViewer = lazy(() => import('./AuditTrailViewer'));\nconst IntegrationHub = lazy(() => import('./IntegrationHub'));\nconst AnalyticsAdminTools = lazy(() => import('./AnalyticsAdminTools'));\nconst VendorManagement = lazy(() => import('./VendorManagement'));\nconst AssetInventory = lazy(() => import('./AssetInventory'));\nconst PrivacyDashboard = lazy(() => import('./PrivacyDashboard'));\nconst ComplianceChecklist = lazy(() => import('./ComplianceChecklist'));\nconst MaintenanceTickets = lazy(() => import('./MaintenanceTickets'));\nconst CalendarScreen = lazy(() => import('../shared/CalendarScreen'));\nconst NotificationsScreen = lazy(() => import('../shared/NotificationsScreen'));\nconst ChatScreen = lazy(() => import('../shared/ChatScreen'));\nconst ReportCardInputScreen = lazy(() => import('../teacher/ReportCardInputScreen'));\nconst SelectUserTypeToAddScreen = lazy(() => import('./SelectUserTypeToAddScreen'));\nconst AddTeacherScreen = lazy(() => import('./AddTeacherScreen'));\nconst AddParentScreen = lazy(() => import('./AddParentScreen'));\nconst ParentListScreen = lazy(() => import('./ParentListScreen'));\nconst ParentDetailAdminView = lazy(() => import('./ParentDetailAdminView'));\nconst ManagePoliciesScreen = lazy(() => import('./ManagePoliciesScreen'));\nconst ManageVolunteeringScreen = lazy(() => import('./ManageVolunteeringScreen'));\nconst ManagePermissionSlipsScreen = lazy(() => import('./ManagePermissionSlipsScreen'));\nconst ManageLearningResourcesScreen = lazy(() => import('./ManageLearningResourcesScreen'));\nconst ManagePTAMeetingsScreen = lazy(() => import('./ManagePTAMeetingsScreen'));\nconst SchoolOnboardingScreen = lazy(() => import('./SchoolOnboardingScreen'));\nconst CurriculumSettingsScreen = lazy(() => import('./CurriculumSettingsScreen'));\nconst StudentEnrollmentWizard = lazy(() => import('./StudentEnrollmentWizard'));\nconst EnhancedEnrollmentWizard = lazy(() => import('./EnhancedEnrollmentWizard'));\nconst ExamCandidateRegistration = lazy(() => import('./ExamCandidateRegistration'));\nconst UserAccountsScreen = lazy(() => import('./UserAccountsScreen'));\nconst FacilityRegisterScreen = lazy(() => import('./FacilityRegisterScreen'));\nconst EquipmentInventoryScreen = lazy(() => import('./EquipmentInventoryScreen'));\nconst SafetyHealthLogs = lazy(() => import('./SafetyHealthLogs'));\nconst InspectionFlowWizard = lazy(() => import('../inspector/InspectionFlowWizard'));\nconst ComplianceDashboard = lazy(() => import('./ComplianceDashboard'));\nconst MasterReportingHub = lazy(() => import('./MasterReportingHub'));\nconst ValidationConsole = lazy(() => import('./ValidationConsole'));\nconst PilotOnboardingWizard = lazy(() => import('./PilotOnboardingWizard'));\nconst UnifiedGovernanceHub = lazy(() => import('./UnifiedGovernanceHub'));\nconst StudentProfileEnhanced = lazy(() => import('../student/StudentProfileEnhanced'));\nconst TeacherProfileEnhanced = lazy(() => import('../teacher/TeacherProfileEnhanced'));\nconst AttendanceTrackSelector = lazy(() => import('../teacher/AttendanceTrackSelector'));\nconst ResultsEntryEnhanced = lazy(() => import('../teacher/ResultsEntryEnhanced'));\nconst ComplianceOnboardingWizard = lazy(() => import('./ComplianceOnboardingWizard'));\nconst AdminReportCardInputWrapper = props => _jsxDEV(ReportCardInputScreen, Object.assign({}, props, {\n  isAdmin: true\n}), void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 135,\n  columnNumber: 53\n}, this);\nconst AdminMessagesWrapper = props => {\n  const {\n    navigateTo\n  } = props;\n  return _jsxDEV(AdminMessagesScreen, Object.assign({}, props, {\n    onSelectChat: conversation => navigateTo('chat', conversation.participant.name, {\n      conversation\n    }),\n    onNewChat: () => navigateTo('adminNewChat', 'New Chat')\n  }), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 9\n  }, this);\n};\nconst ChatWrapper = props => _jsxDEV(ChatScreen, Object.assign({}, props, {\n  currentUserId: 0\n}), void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 149,\n  columnNumber: 37\n}, this);\nconst DashboardSuspenseFallback = () => _jsxDEV(\"div\", {\n  className: \"absolute inset-0 bg-white/50 flex items-center justify-center z-50\",\n  children: _jsxDEV(\"div\", {\n    className: \"w-10 h-10 border-4 border-t-4 border-gray-200 border-t-indigo-600 rounded-full animate-spin\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 9\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 163,\n  columnNumber: 5\n}, this);\nconst AdminDashboard = ({\n  onLogout,\n  setIsHomePage\n}) => {\n  const [activeBottomNav, setActiveBottomNav] = useState('home');\n  const [viewStack, setViewStack] = useState([{\n    view: 'overview',\n    props: {},\n    title: 'Admin Dashboard'\n  }]);\n  const [version, setVersion] = useState(0);\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\n  const [dbStatus, setDbStatus] = useState('checking');\n  const forceUpdate = () => setVersion(v => v + 1);\n  useEffect(() => {\n    setIsHomePage(viewStack.length === 1 && !isSearchOpen);\n  }, [viewStack, isSearchOpen, setIsHomePage]);\n  useEffect(() => {\n    const checkDb = async () => {\n      try {\n        const {\n          error\n        } = await supabase.from('students').select('id').limit(1).maybeSingle();\n        if (error && error.code !== 'PGRST116') {\n          console.error(\"DB Connection Check Error:\", error);\n          setDbStatus('error');\n        } else {\n          setDbStatus('connected');\n        }\n      } catch (e) {\n        console.error(\"DB Connection Exception:\", e);\n        setDbStatus('error');\n      }\n    };\n    checkDb();\n  }, []);\n  const AnalyticsWrapper = props => _jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [_jsxDEV(AnalyticsScreen, Object.assign({}, props), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, this), _jsxDEV(AnalyticsAdminTools, Object.assign({}, props), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 9\n  }, this);\n  const viewComponents = {\n    overview: DashboardOverview,\n    analytics: AnalyticsWrapper,\n    reports: ReportsScreen,\n    classList: ClassListScreen,\n    teacherList: TeacherListScreen,\n    teacherPerformance: TeacherPerformanceScreen,\n    timetable: TimetableGeneratorScreen,\n    timetableEditor: TimetableEditor,\n    teacherAttendance: TeacherAttendanceScreen,\n    teacherAttendanceApproval: TeacherAttendanceApproval,\n    feeManagement: FeeManagement,\n    feeDetails: FeeDetailsScreen,\n    examManagement: ExamManagement,\n    addExam: AddExamScreen,\n    reportCardPublishing: ReportCardPublishing,\n    schoolCalendar: CalendarScreen,\n    userRoles: UserRolesScreen,\n    auditLog: AuditLogScreen,\n    profileSettings: ProfileSettings,\n    studentList: StudentListScreen,\n    addStudent: AddStudentScreen,\n    communicationHub: CommunicationHub,\n    studentProfileAdminView: StudentProfileAdminView,\n    editProfile: EditProfileScreen,\n    notificationsSettings: NotificationsSettingsScreen,\n    securitySettings: SecuritySettingsScreen,\n    changePassword: ChangePasswordScreen,\n    notifications: NotificationsScreen,\n    onlineStore: OnlineStoreScreen,\n    schoolReports: AdminSelectClassForReport,\n    studentListForReport: AdminStudentListForReport,\n    viewStudentReport: AdminStudentReportCardScreen,\n    systemSettings: SystemSettingsScreen,\n    academicSettings: AcademicSettingsScreen,\n    financialSettings: FinancialSettingsScreen,\n    communicationSettings: CommunicationSettingsScreen,\n    brandingSettings: BrandingSettingsScreen,\n    personalSecuritySettings: PersonalSecuritySettingsScreen,\n    teacherDetailAdminView: TeacherDetailAdminView,\n    teacherAttendanceDetail: TeacherAttendanceDetail,\n    attendanceOverview: AttendanceOverviewScreen,\n    classAttendanceDetail: ClassAttendanceDetailScreen,\n    adminSelectTermForReport: AdminSelectTermForReport,\n    adminReportCardInput: AdminReportCardInputWrapper,\n    adminMessages: AdminMessagesWrapper,\n    adminNewChat: AdminNewChatScreen,\n    chat: ChatWrapper,\n    healthLog: HealthLogScreen,\n    busDutyRoster: BusDutyRosterScreen,\n    selectUserTypeToAdd: SelectUserTypeToAddScreen,\n    addTeacher: AddTeacherScreen,\n    addParent: AddParentScreen,\n    parentList: ParentListScreen,\n    parentDetailAdminView: ParentDetailAdminView,\n    managePolicies: ManagePoliciesScreen,\n    manageVolunteering: ManageVolunteeringScreen,\n    managePermissionSlips: ManagePermissionSlipsScreen,\n    manageLearningResources: ManageLearningResourcesScreen,\n    managePTAMeetings: ManagePTAMeetingsScreen,\n    manageSchoolInfo: SchoolOnboardingScreen,\n    manageCurriculum: CurriculumSettingsScreen,\n    enrollmentWizard: StudentEnrollmentWizard,\n    exams: ExamCandidateRegistration,\n    userAccounts: UserAccountsScreen,\n    emergencyAlert: EmergencyAlert,\n    visitorLog: VisitorLog,\n    permissionSlips: PermissionSlips,\n    mentalHealthResources: MentalHealthResources,\n    accessibilitySettings: AccessibilitySettings,\n    smsLessonManager: SMSLessonManager,\n    ussdWorkflow: USSDWorkflow,\n    radioContentScheduler: RadioContentScheduler,\n    ivrLessonRecorder: IVRLessonRecorder,\n    scholarshipManagement: ScholarshipManagement,\n    sponsorshipMatching: SponsorshipMatching,\n    conferenceScheduling: ConferenceScheduling,\n    surveysAndPolls: SurveysAndPolls,\n    donationPortal: DonationPortal,\n    communityResourceDirectory: CommunityResourceDirectory,\n    referralSystem: ReferralSystem,\n    attendanceHeatmap: AttendanceHeatmap,\n    financeDashboard: FinanceDashboard,\n    academicAnalytics: AcademicAnalytics,\n    budgetPlanner: BudgetPlanner,\n    auditTrailViewer: AuditTrailViewer,\n    integrationHub: IntegrationHub,\n    analyticsAdminTools: AnalyticsAdminTools,\n    vendorManagement: VendorManagement,\n    assetInventory: AssetInventory,\n    facilityRegister: FacilityRegisterScreen,\n    equipmentInventory: EquipmentInventoryScreen,\n    safetyHealthLogs: SafetyHealthLogs,\n    complianceDashboard: ComplianceDashboard,\n    inspectionHub: InspectionFlowWizard,\n    privacyDashboard: PrivacyDashboard,\n    complianceChecklist: ComplianceChecklist,\n    maintenanceTickets: MaintenanceTickets,\n    masterReports: MasterReportingHub,\n    validationConsole: ValidationConsole,\n    onboardingWizard: PilotOnboardingWizard,\n    governanceHub: UnifiedGovernanceHub,\n    enhancedEnrollment: EnhancedEnrollmentWizard,\n    complianceOnboarding: ComplianceOnboardingWizard,\n    studentProfile: StudentProfileEnhanced,\n    teacherProfile: TeacherProfileEnhanced,\n    attendanceTracker: AttendanceTrackSelector,\n    resultsEntry: ResultsEntryEnhanced\n  };\n  const [notificationCount, setNotificationCount] = useState(0);\n  const [currentUserId, setCurrentUserId] = useState(null);\n  useEffect(() => {\n    const getUser = async () => {\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (user) setCurrentUserId(user.id);\n    };\n    getUser();\n  }, []);\n  useEffect(() => {\n    if (!currentUserId) return;\n    const fetchNotifsCount = async () => {\n      const {\n        data,\n        error\n      } = await supabase.from('notifications').select('id, audience, user_id').eq('is_read', false);\n      if (error) {\n        console.error(\"Error fetching notifications count:\", error);\n        return;\n      }\n      const count = data.filter(n => {\n        const audience = n.audience || [];\n        const isAdminAudience = Array.isArray(audience) ? audience.includes('admin') : JSON.stringify(audience).includes('admin');\n        return isAdminAudience || n.user_id === currentUserId;\n      }).length;\n      setNotificationCount(count);\n    };\n    fetchNotifsCount();\n    const channel = supabase.channel('admin_notifications').on('postgres_changes', {\n      event: 'INSERT',\n      schema: 'public',\n      table: 'notifications'\n    }, payload => {\n      fetchNotifsCount();\n    }).on('postgres_changes', {\n      event: 'UPDATE',\n      schema: 'public',\n      table: 'notifications'\n    }, payload => {\n      fetchNotifsCount();\n    }).subscribe();\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [currentUserId]);\n  const getHeaderAvatar = () => {\n    if (currentNavigation.view === 'chat' && currentNavigation.props?.conversation) {\n      const convo = currentNavigation.props.conversation;\n      return convo.participant?.avatarUrl || convo.displayAvatar || convo.participantAvatar || \"https://api.dicebear.com/7.x/avataaars/svg?seed=Guest\";\n    }\n    return \"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin\";\n  };\n  const navigateTo = (view, title, props = {}) => {\n    console.log(`Navigating to: ${view}`);\n    setViewStack(stack => [...stack, {\n      view,\n      props,\n      title\n    }]);\n  };\n  const handleBack = () => {\n    if (viewStack.length > 1) {\n      setViewStack(stack => stack.slice(0, -1));\n    }\n  };\n  const handleBottomNavClick = screen => {\n    setActiveBottomNav(screen);\n    switch (screen) {\n      case 'home':\n        setViewStack([{\n          view: 'overview',\n          props: {},\n          title: 'Admin Dashboard'\n        }]);\n        break;\n      case 'messages':\n        setViewStack([{\n          view: 'adminMessages',\n          props: {},\n          title: 'Messages'\n        }]);\n        break;\n      case 'communication':\n        setViewStack([{\n          view: 'communicationHub',\n          props: {},\n          title: 'Communication Hub'\n        }]);\n        break;\n      case 'analytics':\n        setViewStack([{\n          view: 'analytics',\n          props: {},\n          title: 'School Analytics'\n        }]);\n        break;\n      case 'settings':\n        setViewStack([{\n          view: 'profileSettings',\n          props: {\n            onLogout\n          },\n          title: 'Profile Settings'\n        }]);\n        break;\n      case 'feeManagement':\n        setViewStack([{\n          view: 'feeManagement',\n          props: {},\n          title: 'Fee Management'\n        }]);\n        break;\n      default:\n        setViewStack([{\n          view: 'overview',\n          props: {},\n          title: 'Admin Dashboard'\n        }]);\n    }\n  };\n  const handleNotificationClick = () => {\n    navigateTo('notifications', 'Notifications');\n  };\n  const currentNavigation = viewStack[viewStack.length - 1];\n  const ComponentToRender = viewComponents[currentNavigation.view];\n  const commonProps = {\n    navigateTo,\n    onLogout,\n    handleBack,\n    forceUpdate\n  };\n  const renderContent = () => {\n    if (!ComponentToRender) {\n      return _jsxDEV(\"div\", {\n        className: \"flex flex-col items-center justify-center h-full text-gray-500 p-8 text-center\",\n        children: [_jsxDEV(\"p\", {\n          className: \"text-xl font-bold mb-2\",\n          children: \"View Not Found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 21\n        }, this), _jsxDEV(\"p\", {\n          children: [\"The requested view \", _jsxDEV(\"code\", {\n            className: \"bg-gray-200 px-1 rounded\",\n            children: currentNavigation.view\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 43\n          }, this), \" does not exist.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 21\n        }, this), _jsxDEV(\"p\", {\n          className: \"text-sm mt-4 text-gray-400\",\n          children: \"Please contact support or try reloading the page.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 17\n      }, this);\n    }\n    if (currentNavigation.view === 'notifications') {\n      return _jsxDEV(NotificationsScreen, Object.assign({}, currentNavigation.props, commonProps, {\n        userType: \"admin\"\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 20\n      }, this);\n    }\n    return _jsxDEV(ComponentToRender, Object.assign({}, currentNavigation.props, commonProps), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 16\n    }, this);\n  };\n  return _jsxDEV(\"div\", {\n    className: \"flex h-screen w-full overflow-hidden bg-gray-100\",\n    children: [_jsxDEV(\"div\", {\n      className: \"hidden md:flex w-64 flex-col fixed inset-y-0 left-0 z-50\",\n      children: _jsxDEV(AdminSidebar, {\n        activeScreen: activeBottomNav,\n        setActiveScreen: handleBottomNavClick,\n        onLogout: onLogout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col h-screen w-full md:ml-64 overflow-hidden\",\n      children: [dbStatus === 'error' && _jsxDEV(\"div\", {\n        className: \"bg-red-600 text-white text-xs py-1 px-4 text-center font-medium z-50\",\n        children: \"Network/Database Error: Cannot connect to the server. Please check your internet connection or try again later.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 21\n      }, this), _jsxDEV(Header, {\n        title: currentNavigation.title,\n        avatarUrl: getHeaderAvatar(),\n        bgColor: \"bg-indigo-800\",\n        onLogout: onLogout,\n        onBack: viewStack.length > 1 ? handleBack : undefined,\n        onNotificationClick: handleNotificationClick,\n        notificationCount: notificationCount,\n        onSearchClick: () => setIsSearchOpen(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"flex-1 overflow-y-auto\",\n        children: _jsxDEV(\"div\", {\n          className: \"h-full pb-20 md:pb-6\",\n          children: _jsxDEV(ErrorBoundary, {\n            children: _jsxDEV(Suspense, {\n              fallback: _jsxDEV(DashboardSuspenseFallback, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 553,\n                columnNumber: 49\n              }, this),\n              children: _jsxDEV(\"div\", {\n                className: \"animate-slide-in-up h-full\",\n                children: renderContent()\n              }, `${viewStack.length}-${version}`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 554,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 29\n            }, this)\n          }, `${viewStack.length}-${currentNavigation.view}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"md:hidden\",\n        children: _jsxDEV(AdminBottomNav, {\n          activeScreen: activeBottomNav,\n          setActiveScreen: handleBottomNavClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 17\n      }, this), _jsxDEV(Suspense, {\n        fallback: _jsxDEV(DashboardSuspenseFallback, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 37\n        }, this),\n        children: isSearchOpen && _jsxDEV(GlobalSearchScreen, {\n          dashboardType: DashboardType.Admin,\n          navigateTo: navigateTo,\n          onClose: () => setIsSearchOpen(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 534,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 523,\n    columnNumber: 9\n  }, this);\n};\nexport default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","lazy","Suspense","Header","AdminBottomNav","AdminSidebar","DashboardType","supabase","ErrorBoundary","jsxDEV","_jsxDEV","GlobalSearchScreen","DashboardOverview","AnalyticsScreen","ClassListScreen","StudentListScreen","AddStudentScreen","TeacherListScreen","TeacherPerformanceScreen","TimetableEditor","TeacherAttendanceScreen","TeacherAttendanceApproval","FeeManagement","FeeDetailsScreen","ExamManagement","AddExamScreen","ReportCardPublishing","UserRolesScreen","AuditLogScreen","ProfileSettings","CommunicationHub","ReportsScreen","StudentProfileAdminView","EditProfileScreen","NotificationsSettingsScreen","SecuritySettingsScreen","ChangePasswordScreen","OnlineStoreScreen","AdminSelectClassForReport","AdminStudentListForReport","AdminStudentReportCardScreen","SystemSettingsScreen","AcademicSettingsScreen","FinancialSettingsScreen","CommunicationSettingsScreen","BrandingSettingsScreen","PersonalSecuritySettingsScreen","TeacherDetailAdminView","TeacherAttendanceDetail","AttendanceOverviewScreen","ClassAttendanceDetailScreen","AdminSelectTermForReport","AdminMessagesScreen","AdminNewChatScreen","HealthLogScreen","TimetableGeneratorScreen","BusDutyRosterScreen","EmergencyAlert","VisitorLog","PanicButton","PermissionSlips","MentalHealthResources","AccessibilitySettings","SMSLessonManager","USSDWorkflow","RadioContentScheduler","IVRLessonRecorder","ScholarshipManagement","SponsorshipMatching","ConferenceScheduling","SurveysAndPolls","DonationPortal","CommunityResourceDirectory","ReferralSystem","AttendanceHeatmap","FinanceDashboard","AcademicAnalytics","BudgetPlanner","AuditTrailViewer","IntegrationHub","AnalyticsAdminTools","VendorManagement","AssetInventory","PrivacyDashboard","ComplianceChecklist","MaintenanceTickets","CalendarScreen","NotificationsScreen","ChatScreen","ReportCardInputScreen","SelectUserTypeToAddScreen","AddTeacherScreen","AddParentScreen","ParentListScreen","ParentDetailAdminView","ManagePoliciesScreen","ManageVolunteeringScreen","ManagePermissionSlipsScreen","ManageLearningResourcesScreen","ManagePTAMeetingsScreen","SchoolOnboardingScreen","CurriculumSettingsScreen","StudentEnrollmentWizard","EnhancedEnrollmentWizard","ExamCandidateRegistration","UserAccountsScreen","FacilityRegisterScreen","EquipmentInventoryScreen","SafetyHealthLogs","InspectionFlowWizard","ComplianceDashboard","MasterReportingHub","ValidationConsole","PilotOnboardingWizard","UnifiedGovernanceHub","StudentProfileEnhanced","TeacherProfileEnhanced","AttendanceTrackSelector","ResultsEntryEnhanced","ComplianceOnboardingWizard","AdminReportCardInputWrapper","props","Object","assign","isAdmin","fileName","_jsxFileName","lineNumber","columnNumber","AdminMessagesWrapper","navigateTo","onSelectChat","conversation","participant","name","onNewChat","ChatWrapper","currentUserId","DashboardSuspenseFallback","className","children","AdminDashboard","onLogout","setIsHomePage","activeBottomNav","setActiveBottomNav","viewStack","setViewStack","view","title","version","setVersion","isSearchOpen","setIsSearchOpen","dbStatus","setDbStatus","forceUpdate","v","length","checkDb","error","from","select","limit","maybeSingle","code","console","e","AnalyticsWrapper","viewComponents","overview","analytics","reports","classList","teacherList","teacherPerformance","timetable","timetableEditor","teacherAttendance","teacherAttendanceApproval","feeManagement","feeDetails","examManagement","addExam","reportCardPublishing","schoolCalendar","userRoles","auditLog","profileSettings","studentList","addStudent","communicationHub","studentProfileAdminView","editProfile","notificationsSettings","securitySettings","changePassword","notifications","onlineStore","schoolReports","studentListForReport","viewStudentReport","systemSettings","academicSettings","financialSettings","communicationSettings","brandingSettings","personalSecuritySettings","teacherDetailAdminView","teacherAttendanceDetail","attendanceOverview","classAttendanceDetail","adminSelectTermForReport","adminReportCardInput","adminMessages","adminNewChat","chat","healthLog","busDutyRoster","selectUserTypeToAdd","addTeacher","addParent","parentList","parentDetailAdminView","managePolicies","manageVolunteering","managePermissionSlips","manageLearningResources","managePTAMeetings","manageSchoolInfo","manageCurriculum","enrollmentWizard","exams","userAccounts","emergencyAlert","visitorLog","permissionSlips","mentalHealthResources","accessibilitySettings","smsLessonManager","ussdWorkflow","radioContentScheduler","ivrLessonRecorder","scholarshipManagement","sponsorshipMatching","conferenceScheduling","surveysAndPolls","donationPortal","communityResourceDirectory","referralSystem","attendanceHeatmap","financeDashboard","academicAnalytics","budgetPlanner","auditTrailViewer","integrationHub","analyticsAdminTools","vendorManagement","assetInventory","facilityRegister","equipmentInventory","safetyHealthLogs","complianceDashboard","inspectionHub","privacyDashboard","complianceChecklist","maintenanceTickets","masterReports","validationConsole","onboardingWizard","governanceHub","enhancedEnrollment","complianceOnboarding","studentProfile","teacherProfile","attendanceTracker","resultsEntry","notificationCount","setNotificationCount","setCurrentUserId","getUser","data","user","auth","id","fetchNotifsCount","eq","count","filter","n","audience","isAdminAudience","Array","isArray","includes","JSON","stringify","user_id","channel","on","event","schema","table","payload","subscribe","removeChannel","getHeaderAvatar","currentNavigation","convo","avatarUrl","displayAvatar","participantAvatar","log","stack","handleBack","slice","handleBottomNavClick","screen","handleNotificationClick","ComponentToRender","commonProps","renderContent","userType","activeScreen","setActiveScreen","bgColor","onBack","undefined","onNotificationClick","onSearchClick","fallback","dashboardType","Admin","onClose"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/admin/AdminDashboard.tsx"],"sourcesContent":["import React, { useState, useEffect, lazy, Suspense } from 'react';\r\nimport Header from '../ui/Header';\r\nimport { AdminBottomNav } from '../ui/DashboardBottomNav';\r\nimport { AdminSidebar } from '../ui/DashboardSidebar';\r\nimport { DashboardType } from '../../types';\r\nimport { supabase } from '../../lib/supabase';\r\nimport ErrorBoundary from '../shared/ErrorBoundary';\r\n\r\n// Lazy load GlobalSearchScreen\r\nconst GlobalSearchScreen = lazy(() => import('../shared/GlobalSearchScreen'));\r\n\r\n// Static Imports (Converted to Lazy for Performance)\r\nconst DashboardOverview = lazy(() => import('./DashboardOverview'));\r\nconst AnalyticsScreen = lazy(() => import('./AnalyticsScreen'));\r\nconst ClassListScreen = lazy(() => import('./ClassListScreen'));\r\nconst StudentListScreen = lazy(() => import('./StudentListScreen'));\r\nconst AddStudentScreen = lazy(() => import('./AddStudentScreen'));\r\nconst TeacherListScreen = lazy(() => import('./TeacherListScreen'));\r\nconst TeacherPerformanceScreen = lazy(() => import('./TeacherPerformanceScreen'));\r\nconst TimetableEditor = lazy(() => import('./TimetableEditor'));\r\nconst TeacherAttendanceScreen = lazy(() => import('./TeacherAttendanceScreen'));\r\nconst TeacherAttendanceApproval = lazy(() => import('./TeacherAttendanceApproval'));\r\nconst FeeManagement = lazy(() => import('./FeeManagement'));\r\nconst FeeDetailsScreen = lazy(() => import('./FeeDetailsScreen'));\r\nconst ExamManagement = lazy(() => import('./ExamManagement'));\r\nconst AddExamScreen = lazy(() => import('./AddExamScreen'));\r\nconst ReportCardPublishing = lazy(() => import('./ReportCardPublishing'));\r\nconst UserRolesScreen = lazy(() => import('./UserRolesScreen'));\r\nconst AuditLogScreen = lazy(() => import('./AuditLogScreen'));\r\nconst ProfileSettings = lazy(() => import('./ProfileSettings'));\r\nconst CommunicationHub = lazy(() => import('./CommunicationHub'));\r\nconst ReportsScreen = lazy(() => import('./ReportsScreen'));\r\nconst StudentProfileAdminView = lazy(() => import('./StudentProfileAdminView'));\r\nconst EditProfileScreen = lazy(() => import('./EditProfileScreen'));\r\nconst NotificationsSettingsScreen = lazy(() => import('./NotificationsSettingsScreen'));\r\nconst SecuritySettingsScreen = lazy(() => import('./SecuritySettingsScreen'));\r\nconst ChangePasswordScreen = lazy(() => import('./ChangePasswordScreen'));\r\nconst OnlineStoreScreen = lazy(() => import('./OnlineStoreScreen'));\r\nconst AdminSelectClassForReport = lazy(() => import('./AdminSelectClassForReport'));\r\nconst AdminStudentListForReport = lazy(() => import('./AdminStudentListForReport'));\r\nconst AdminStudentReportCardScreen = lazy(() => import('./AdminStudentReportCardScreen'));\r\nconst SystemSettingsScreen = lazy(() => import('./SystemSettingsScreen'));\r\nconst AcademicSettingsScreen = lazy(() => import('./AcademicSettingsScreen'));\r\nconst FinancialSettingsScreen = lazy(() => import('./FinancialSettingsScreen'));\r\nconst CommunicationSettingsScreen = lazy(() => import('./CommunicationSettingsScreen'));\r\nconst BrandingSettingsScreen = lazy(() => import('./BrandingSettingsScreen'));\r\nconst PersonalSecuritySettingsScreen = lazy(() => import('./PersonalSecuritySettingsScreen'));\r\nconst TeacherDetailAdminView = lazy(() => import('./TeacherDetailAdminView'));\r\nconst TeacherAttendanceDetail = lazy(() => import('./TeacherAttendanceDetail'));\r\nconst AttendanceOverviewScreen = lazy(() => import('./AttendanceOverviewScreen'));\r\nconst ClassAttendanceDetailScreen = lazy(() => import('./ClassAttendanceDetailScreen'));\r\nconst AdminSelectTermForReport = lazy(() => import('./AdminSelectTermForReport'));\r\nconst AdminMessagesScreen = lazy(() => import('./AdminMessagesScreen'));\r\nconst AdminNewChatScreen = lazy(() => import('./AdminNewChatScreen'));\r\nconst HealthLogScreen = lazy(() => import('./HealthLogScreen'));\r\nconst TimetableGeneratorScreen = lazy(() => import('./TimetableGeneratorScreen'));\r\nconst BusDutyRosterScreen = lazy(() => import('./BusDutyRosterScreen'));\r\n\r\n// Phase 4: Emergency & Safety Components\r\nconst EmergencyAlert = lazy(() => import('./EmergencyAlert'));\r\nconst VisitorLog = lazy(() => import('./VisitorLog'));\r\nconst PanicButton = lazy(() => import('../shared/PanicButton'));\r\nconst PermissionSlips = lazy(() => import('../shared/PermissionSlips'));\r\nconst MentalHealthResources = lazy(() => import('../shared/MentalHealthResources'));\r\nconst AccessibilitySettings = lazy(() => import('../shared/AccessibilitySettings'));\r\n\r\n// Phase 5: Parent & Community Empowerment Components\r\nconst SMSLessonManager = lazy(() => import('./SMSLessonManager'));\r\nconst USSDWorkflow = lazy(() => import('./USSDWorkflow'));\r\nconst RadioContentScheduler = lazy(() => import('./RadioContentScheduler'));\r\nconst IVRLessonRecorder = lazy(() => import('./IVRLessonRecorder'));\r\nconst ScholarshipManagement = lazy(() => import('./ScholarshipManagement'));\r\nconst SponsorshipMatching = lazy(() => import('./SponsorshipMatching'));\r\nconst ConferenceScheduling = lazy(() => import('../shared/ConferenceScheduling'));\r\nconst SurveysAndPolls = lazy(() => import('../shared/SurveysAndPolls'));\r\nconst DonationPortal = lazy(() => import('../shared/DonationPortal'));\r\nconst CommunityResourceDirectory = lazy(() => import('../shared/CommunityResourceDirectory'));\r\nconst ReferralSystem = lazy(() => import('../shared/ReferralSystem'));\r\n\r\n// Phase 6: Admin Ops, Analytics & Governance\r\nconst AttendanceHeatmap = lazy(() => import('./AttendanceHeatmap'));\r\nconst FinanceDashboard = lazy(() => import('./FinanceDashboard'));\r\nconst AcademicAnalytics = lazy(() => import('./AcademicAnalytics'));\r\nconst BudgetPlanner = lazy(() => import('./BudgetPlanner'));\r\nconst AuditTrailViewer = lazy(() => import('./AuditTrailViewer'));\r\nconst IntegrationHub = lazy(() => import('./IntegrationHub'));\r\nconst AnalyticsAdminTools = lazy(() => import('./AnalyticsAdminTools'));\r\nconst VendorManagement = lazy(() => import('./VendorManagement'));\r\nconst AssetInventory = lazy(() => import('./AssetInventory'));\r\nconst PrivacyDashboard = lazy(() => import('./PrivacyDashboard'));\r\nconst ComplianceChecklist = lazy(() => import('./ComplianceChecklist'));\r\nconst MaintenanceTickets = lazy(() => import('./MaintenanceTickets'));\r\n\r\n// Shared Imports\r\nconst CalendarScreen = lazy(() => import('../shared/CalendarScreen'));\r\nconst NotificationsScreen = lazy(() => import('../shared/NotificationsScreen'));\r\nconst ChatScreen = lazy(() => import('../shared/ChatScreen'));\r\nconst ReportCardInputScreen = lazy(() => import('../teacher/ReportCardInputScreen'));\r\n\r\n// User Management Imports\r\nconst SelectUserTypeToAddScreen = lazy(() => import('./SelectUserTypeToAddScreen'));\r\nconst AddTeacherScreen = lazy(() => import('./AddTeacherScreen'));\r\nconst AddParentScreen = lazy(() => import('./AddParentScreen'));\r\nconst ParentListScreen = lazy(() => import('./ParentListScreen'));\r\nconst ParentDetailAdminView = lazy(() => import('./ParentDetailAdminView'));\r\n\r\n// Content Management - STATIC IMPORTS to verify resolution\r\n// Content Management - Lazy Loaded to prevent circular dependencies\r\nconst ManagePoliciesScreen = lazy(() => import('./ManagePoliciesScreen'));\r\nconst ManageVolunteeringScreen = lazy(() => import('./ManageVolunteeringScreen'));\r\nconst ManagePermissionSlipsScreen = lazy(() => import('./ManagePermissionSlipsScreen'));\r\nconst ManageLearningResourcesScreen = lazy(() => import('./ManageLearningResourcesScreen'));\r\nconst ManagePTAMeetingsScreen = lazy(() => import('./ManagePTAMeetingsScreen'));\r\nconst SchoolOnboardingScreen = lazy(() => import('./SchoolOnboardingScreen'));\r\nconst CurriculumSettingsScreen = lazy(() => import('./CurriculumSettingsScreen'));\r\nconst StudentEnrollmentWizard = lazy(() => import('./StudentEnrollmentWizard'));\r\nconst EnhancedEnrollmentWizard = lazy(() => import('./EnhancedEnrollmentWizard'));\r\nconst ExamCandidateRegistration = lazy(() => import('./ExamCandidateRegistration'));\r\nconst UserAccountsScreen = lazy(() => import('./UserAccountsScreen'));\r\nconst FacilityRegisterScreen = lazy(() => import('./FacilityRegisterScreen'));\r\nconst EquipmentInventoryScreen = lazy(() => import('./EquipmentInventoryScreen'));\r\nconst SafetyHealthLogs = lazy(() => import('./SafetyHealthLogs'));\r\nconst InspectionFlowWizard = lazy(() => import('../inspector/InspectionFlowWizard'));\r\nconst ComplianceDashboard = lazy(() => import('./ComplianceDashboard'));\r\nconst MasterReportingHub = lazy(() => import('./MasterReportingHub'));\r\nconst ValidationConsole = lazy(() => import('./ValidationConsole'));\r\nconst PilotOnboardingWizard = lazy(() => import('./PilotOnboardingWizard'));\r\nconst UnifiedGovernanceHub = lazy(() => import('./UnifiedGovernanceHub'));\r\nconst StudentProfileEnhanced = lazy(() => import('../student/StudentProfileEnhanced'));\r\nconst TeacherProfileEnhanced = lazy(() => import('../teacher/TeacherProfileEnhanced'));\r\nconst AttendanceTrackSelector = lazy(() => import('../teacher/AttendanceTrackSelector'));\r\nconst ResultsEntryEnhanced = lazy(() => import('../teacher/ResultsEntryEnhanced'));\r\nconst ComplianceOnboardingWizard = lazy(() => import('./ComplianceOnboardingWizard'));\r\n\r\nconst AdminReportCardInputWrapper = (props: any) => <ReportCardInputScreen {...props} isAdmin={true} />;\r\n\r\nconst AdminMessagesWrapper = (props: any) => {\r\n    // navigateTo is passed via commonProps\r\n    const { navigateTo } = props;\r\n    return (\r\n        <AdminMessagesScreen\r\n            {...props}\r\n            onSelectChat={(conversation: any) => navigateTo('chat', conversation.participant.name, { conversation })}\r\n            onNewChat={() => navigateTo('adminNewChat', 'New Chat')}\r\n        />\r\n    );\r\n};\r\n\r\nconst ChatWrapper = (props: any) => <ChatScreen {...props} currentUserId={0} />;\r\n\r\ninterface ViewStackItem {\r\n    view: string;\r\n    props: any;\r\n    title: string;\r\n}\r\n\r\ninterface AdminDashboardProps {\r\n    onLogout: () => void;\r\n    setIsHomePage: (isHome: boolean) => void;\r\n}\r\n\r\nconst DashboardSuspenseFallback = () => (\r\n    <div className=\"absolute inset-0 bg-white/50 flex items-center justify-center z-50\">\r\n        <div className=\"w-10 h-10 border-4 border-t-4 border-gray-200 border-t-indigo-600 rounded-full animate-spin\"></div>\r\n    </div>\r\n);\r\n\r\nconst AdminDashboard: React.FC<AdminDashboardProps> = ({ onLogout, setIsHomePage }) => {\r\n    const [activeBottomNav, setActiveBottomNav] = useState('home');\r\n    const [viewStack, setViewStack] = useState<ViewStackItem[]>([{ view: 'overview', props: {}, title: 'Admin Dashboard' }]);\r\n    const [version, setVersion] = useState(0);\r\n    const [isSearchOpen, setIsSearchOpen] = useState(false);\r\n    const [dbStatus, setDbStatus] = useState<'checking' | 'connected' | 'error'>('checking');\r\n\r\n    const forceUpdate = () => setVersion(v => v + 1);\r\n\r\n    useEffect(() => {\r\n        setIsHomePage(viewStack.length === 1 && !isSearchOpen);\r\n    }, [viewStack, isSearchOpen, setIsHomePage]);\r\n\r\n    // Database Connection Check\r\n    useEffect(() => {\r\n        const checkDb = async () => {\r\n            try {\r\n                // Try to fetch one row from a public table to verify connection\r\n                const { error } = await supabase.from('students').select('id').limit(1).maybeSingle();\r\n                if (error && error.code !== 'PGRST116') { // PGRST116 is just \"no rows\", which is fine for connection check\r\n                    console.error(\"DB Connection Check Error:\", error);\r\n                    setDbStatus('error');\r\n                } else {\r\n                    setDbStatus('connected');\r\n                }\r\n            } catch (e) {\r\n                console.error(\"DB Connection Exception:\", e);\r\n                setDbStatus('error');\r\n            }\r\n        };\r\n        checkDb();\r\n    }, []);\r\n\r\n    // Wrappers for combined views\r\n    const AnalyticsWrapper = (props: any) => (\r\n        <div className=\"space-y-6\">\r\n            {/* Charts & Metrics */}\r\n            <AnalyticsScreen {...props} />\r\n\r\n            {/* Admin Tools & Phase 6 Features */}\r\n            <AnalyticsAdminTools {...props} />\r\n        </div>\r\n    );\r\n\r\n    // Define View Components INSIDE to access local context if needed, but mostly for simplicity re: closure\r\n    // No useMemo to ensure fresh references\r\n    const viewComponents: { [key: string]: React.ComponentType<any> } = {\r\n        overview: DashboardOverview,\r\n        analytics: AnalyticsWrapper,\r\n        reports: ReportsScreen,\r\n        classList: ClassListScreen,\r\n        teacherList: TeacherListScreen,\r\n        teacherPerformance: TeacherPerformanceScreen,\r\n        timetable: TimetableGeneratorScreen,\r\n        timetableEditor: TimetableEditor,\r\n        teacherAttendance: TeacherAttendanceScreen,\r\n        teacherAttendanceApproval: TeacherAttendanceApproval,\r\n        feeManagement: FeeManagement,\r\n        feeDetails: FeeDetailsScreen,\r\n        examManagement: ExamManagement,\r\n        addExam: AddExamScreen,\r\n        reportCardPublishing: ReportCardPublishing,\r\n        schoolCalendar: CalendarScreen,\r\n        userRoles: UserRolesScreen,\r\n        auditLog: AuditLogScreen,\r\n        profileSettings: ProfileSettings,\r\n        studentList: StudentListScreen,\r\n        addStudent: AddStudentScreen,\r\n        communicationHub: CommunicationHub,\r\n        studentProfileAdminView: StudentProfileAdminView,\r\n        editProfile: EditProfileScreen,\r\n        notificationsSettings: NotificationsSettingsScreen,\r\n        securitySettings: SecuritySettingsScreen,\r\n        changePassword: ChangePasswordScreen,\r\n        notifications: NotificationsScreen,\r\n        onlineStore: OnlineStoreScreen,\r\n        schoolReports: AdminSelectClassForReport,\r\n        studentListForReport: AdminStudentListForReport,\r\n        viewStudentReport: AdminStudentReportCardScreen,\r\n        systemSettings: SystemSettingsScreen,\r\n        academicSettings: AcademicSettingsScreen,\r\n        financialSettings: FinancialSettingsScreen,\r\n        communicationSettings: CommunicationSettingsScreen,\r\n        brandingSettings: BrandingSettingsScreen,\r\n        personalSecuritySettings: PersonalSecuritySettingsScreen,\r\n        teacherDetailAdminView: TeacherDetailAdminView,\r\n        teacherAttendanceDetail: TeacherAttendanceDetail,\r\n        attendanceOverview: AttendanceOverviewScreen,\r\n        classAttendanceDetail: ClassAttendanceDetailScreen,\r\n        adminSelectTermForReport: AdminSelectTermForReport,\r\n\r\n        // Wrappers\r\n        adminReportCardInput: AdminReportCardInputWrapper,\r\n        adminMessages: AdminMessagesWrapper,\r\n        adminNewChat: AdminNewChatScreen,\r\n        chat: ChatWrapper,\r\n\r\n        healthLog: HealthLogScreen,\r\n        busDutyRoster: BusDutyRosterScreen,\r\n\r\n        // User Management\r\n        selectUserTypeToAdd: SelectUserTypeToAddScreen,\r\n        addTeacher: AddTeacherScreen,\r\n        addParent: AddParentScreen,\r\n        parentList: ParentListScreen,\r\n        parentDetailAdminView: ParentDetailAdminView,\r\n\r\n        // Content Management\r\n        managePolicies: ManagePoliciesScreen,\r\n        manageVolunteering: ManageVolunteeringScreen,\r\n        managePermissionSlips: ManagePermissionSlipsScreen,\r\n        manageLearningResources: ManageLearningResourcesScreen,\r\n        managePTAMeetings: ManagePTAMeetingsScreen,\r\n        manageSchoolInfo: SchoolOnboardingScreen,\r\n        manageCurriculum: CurriculumSettingsScreen,\r\n        enrollmentWizard: StudentEnrollmentWizard,\r\n        exams: ExamCandidateRegistration,\r\n        userAccounts: UserAccountsScreen,\r\n\r\n        // Phase 4: Emergency & Safety\r\n        emergencyAlert: EmergencyAlert,\r\n        visitorLog: VisitorLog,\r\n        permissionSlips: PermissionSlips,\r\n        mentalHealthResources: MentalHealthResources,\r\n        accessibilitySettings: AccessibilitySettings,\r\n\r\n        // Phase 5: Parent & Community Empowerment\r\n        smsLessonManager: SMSLessonManager,\r\n        ussdWorkflow: USSDWorkflow,\r\n        radioContentScheduler: RadioContentScheduler,\r\n        ivrLessonRecorder: IVRLessonRecorder,\r\n        scholarshipManagement: ScholarshipManagement,\r\n        sponsorshipMatching: SponsorshipMatching,\r\n        conferenceScheduling: ConferenceScheduling,\r\n        surveysAndPolls: SurveysAndPolls,\r\n        donationPortal: DonationPortal,\r\n        communityResourceDirectory: CommunityResourceDirectory,\r\n        referralSystem: ReferralSystem,\r\n\r\n        // Phase 6: Admin Ops, Analytics & Governance\r\n        attendanceHeatmap: AttendanceHeatmap,\r\n        financeDashboard: FinanceDashboard,\r\n        academicAnalytics: AcademicAnalytics,\r\n        budgetPlanner: BudgetPlanner,\r\n        auditTrailViewer: AuditTrailViewer,\r\n        integrationHub: IntegrationHub,\r\n        analyticsAdminTools: AnalyticsAdminTools,\r\n        vendorManagement: VendorManagement,\r\n        assetInventory: AssetInventory,\r\n        facilityRegister: FacilityRegisterScreen,\r\n        equipmentInventory: EquipmentInventoryScreen,\r\n        safetyHealthLogs: SafetyHealthLogs,\r\n        complianceDashboard: ComplianceDashboard,\r\n        inspectionHub: InspectionFlowWizard,\r\n        privacyDashboard: PrivacyDashboard,\r\n        complianceChecklist: ComplianceChecklist,\r\n        maintenanceTickets: MaintenanceTickets,\r\n        masterReports: MasterReportingHub,\r\n        validationConsole: ValidationConsole,\r\n        onboardingWizard: PilotOnboardingWizard,\r\n        governanceHub: UnifiedGovernanceHub,\r\n        enhancedEnrollment: EnhancedEnrollmentWizard,\r\n        complianceOnboarding: ComplianceOnboardingWizard,\r\n        studentProfile: StudentProfileEnhanced,\r\n        teacherProfile: TeacherProfileEnhanced,\r\n        attendanceTracker: AttendanceTrackSelector,\r\n        resultsEntry: ResultsEntryEnhanced,\r\n    };\r\n\r\n    const [notificationCount, setNotificationCount] = useState(0);\r\n    const [currentUserId, setCurrentUserId] = useState<string | null>(null);\r\n\r\n    // 1. Get Current User ID\r\n    useEffect(() => {\r\n        const getUser = async () => {\r\n            const { data: { user } } = await supabase.auth.getUser();\r\n            if (user) setCurrentUserId(user.id);\r\n        };\r\n        getUser();\r\n    }, []);\r\n\r\n    // 2. Fetch Count & Subscribe\r\n    useEffect(() => {\r\n        if (!currentUserId) return;\r\n\r\n        const fetchNotifsCount = async () => {\r\n            // Query: (audience contains 'admin') OR (user_id = currentUserId)\r\n            // Supabase JS doesn't support OR across different columns easily in one filter builder without .or() syntax\r\n            // But .or() expects a string format like \"col1.eq.val,col2.eq.val\"\r\n\r\n            // Let's try to get all unread notifications for this user context\r\n            const { data, error } = await supabase\r\n                .from('notifications')\r\n                .select('id, audience, user_id')\r\n                .eq('is_read', false);\r\n\r\n            if (error) {\r\n                console.error(\"Error fetching notifications count:\", error);\r\n                return;\r\n            }\r\n\r\n            // Filter in memory for now to handle the OR logic robustly\r\n            // (audience @> ['admin'] OR user_id == currentUserId)\r\n            const count = data.filter(n => {\r\n                const audience = n.audience || [];\r\n                // Check if audience array (or string? handles both if JSON)\r\n                const isAdminAudience = Array.isArray(audience)\r\n                    ? audience.includes('admin')\r\n                    : JSON.stringify(audience).includes('admin');\r\n\r\n                // Note: user_id in DB might be UUID or Int depending on schema. \r\n                // Creating a simplified check.\r\n                // If user_id is UUID string in DB, great. If int, we need mapping.\r\n                // Checking previous code: teacherAttendanceService uses `user_id: admin.id`. \r\n                // Admin ID from `users` table is likely INT?\r\n                // Let's check `users` table schema if needed. \r\n                // But generally, the dashboard authentication uses UUID from auth.users.\r\n                // This means we might have a schema disconnect (App User IDs vs Auth UUIDs).\r\n                // Assuming `user_id` in notifications is UUID for now as per Supabase defaults, \r\n                // OR `users` table maps UUID to Int. \r\n                // Wait! teacherAttendanceService uses `from('users').select('id')`. \r\n                // If `users` table has custom IDs, `user_id` in notifications will be that ID.\r\n                // AdminDashboard uses `supabase.auth.getUser()` which returns UUID.\r\n\r\n                // CRITICAL CHECK: currentUserId (UUID) vs n.user_id (Unknown).\r\n                // Let's rely on the Realtime Subscription mostly, but we need correct count.\r\n\r\n                // For now, let's assume `user_id` in notifications matches the auth UUID if possible,\r\n                // OR we fetch notifications where `audience` is simply 'admin'.\r\n\r\n                return isAdminAudience || n.user_id === currentUserId;\r\n            }).length;\r\n\r\n            setNotificationCount(count);\r\n        };\r\n\r\n        fetchNotifsCount();\r\n\r\n        // Realtime Subscription\r\n        const channel = supabase\r\n            .channel('admin_notifications')\r\n            .on(\r\n                'postgres_changes',\r\n                {\r\n                    event: 'INSERT',\r\n                    schema: 'public',\r\n                    table: 'notifications',\r\n                },\r\n                (payload) => {\r\n                    // Optimized: just increment or refetch. Refetch is safer.\r\n                    fetchNotifsCount();\r\n                }\r\n            )\r\n            .on(\r\n                'postgres_changes',\r\n                {\r\n                    event: 'UPDATE',\r\n                    schema: 'public',\r\n                    table: 'notifications',\r\n                },\r\n                (payload) => {\r\n                    // If read status changed, refetch\r\n                    fetchNotifsCount();\r\n                }\r\n            )\r\n            .subscribe();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, [currentUserId]);\r\n\r\n    const getHeaderAvatar = () => {\r\n        if (currentNavigation.view === 'chat' && currentNavigation.props?.conversation) {\r\n            // Try to find avatar in various likely locations on the object\r\n            // The structure passed from AdminMessagesScreen is { conversation: { participant: { avatarUrl: ... } } }\r\n            const convo = currentNavigation.props.conversation;\r\n            return convo.participant?.avatarUrl ||\r\n                convo.displayAvatar ||\r\n                convo.participantAvatar ||\r\n                \"https://api.dicebear.com/7.x/avataaars/svg?seed=Guest\";\r\n        }\r\n        return \"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin\";\r\n    };\r\n\r\n    const navigateTo = (view: string, title: string, props: any = {}) => {\r\n        console.log(`Navigating to: ${view}`);\r\n        setViewStack(stack => [...stack, { view, props, title }]);\r\n    };\r\n\r\n    const handleBack = () => {\r\n        if (viewStack.length > 1) {\r\n            setViewStack(stack => stack.slice(0, -1));\r\n        }\r\n    };\r\n\r\n    const handleBottomNavClick = (screen: string) => {\r\n        setActiveBottomNav(screen);\r\n        switch (screen) {\r\n            case 'home':\r\n                setViewStack([{ view: 'overview', props: {}, title: 'Admin Dashboard' }]);\r\n                break;\r\n            case 'messages':\r\n                setViewStack([{ view: 'adminMessages', props: {}, title: 'Messages' }]);\r\n                break;\r\n            case 'communication':\r\n                setViewStack([{ view: 'communicationHub', props: {}, title: 'Communication Hub' }]);\r\n                break;\r\n            case 'analytics':\r\n                setViewStack([{ view: 'analytics', props: {}, title: 'School Analytics' }]);\r\n                break;\r\n            case 'settings':\r\n                setViewStack([{ view: 'profileSettings', props: { onLogout }, title: 'Profile Settings' }]);\r\n                break;\r\n            case 'feeManagement':\r\n                setViewStack([{ view: 'feeManagement', props: {}, title: 'Fee Management' }]);\r\n                break;\r\n            default:\r\n                setViewStack([{ view: 'overview', props: {}, title: 'Admin Dashboard' }]);\r\n        }\r\n    };\r\n\r\n    const handleNotificationClick = () => {\r\n        navigateTo('notifications', 'Notifications');\r\n    };\r\n\r\n    const currentNavigation = viewStack[viewStack.length - 1];\r\n    const ComponentToRender = viewComponents[currentNavigation.view];\r\n\r\n    const commonProps = {\r\n        navigateTo,\r\n        onLogout,\r\n        handleBack,\r\n        forceUpdate,\r\n    };\r\n\r\n    const renderContent = () => {\r\n        if (!ComponentToRender) {\r\n            return (\r\n                <div className=\"flex flex-col items-center justify-center h-full text-gray-500 p-8 text-center\">\r\n                    <p className=\"text-xl font-bold mb-2\">View Not Found</p>\r\n                    <p>The requested view <code className=\"bg-gray-200 px-1 rounded\">{currentNavigation.view}</code> does not exist.</p>\r\n                    <p className=\"text-sm mt-4 text-gray-400\">Please contact support or try reloading the page.</p>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (currentNavigation.view === 'notifications') {\r\n            return <NotificationsScreen {...currentNavigation.props} {...commonProps} userType=\"admin\" />;\r\n        }\r\n\r\n        return <ComponentToRender {...currentNavigation.props} {...commonProps} />;\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-screen w-full overflow-hidden bg-gray-100\">\r\n            {/* Desktop Sidebar - Hidden on mobile, fixed on desktop */}\r\n            <div className=\"hidden md:flex w-64 flex-col fixed inset-y-0 left-0 z-50\">\r\n                <AdminSidebar\r\n                    activeScreen={activeBottomNav}\r\n                    setActiveScreen={handleBottomNavClick}\r\n                    onLogout={onLogout}\r\n                />\r\n            </div>\r\n\r\n            {/* Main Content Area */}\r\n            <div className=\"flex-1 flex flex-col h-screen w-full md:ml-64 overflow-hidden\">\r\n                {dbStatus === 'error' && (\r\n                    <div className=\"bg-red-600 text-white text-xs py-1 px-4 text-center font-medium z-50\">\r\n                        Network/Database Error: Cannot connect to the server. Please check your internet connection or try again later.\r\n                    </div>\r\n                )}\r\n                <Header\r\n                    title={currentNavigation.title}\r\n                    avatarUrl={getHeaderAvatar()}\r\n                    bgColor=\"bg-indigo-800\"\r\n                    onLogout={onLogout}\r\n                    onBack={viewStack.length > 1 ? handleBack : undefined}\r\n                    onNotificationClick={handleNotificationClick}\r\n                    notificationCount={notificationCount}\r\n                    onSearchClick={() => setIsSearchOpen(true)}\r\n                />\r\n                <div className=\"flex-1 overflow-y-auto\">\r\n                    <div className=\"h-full pb-20 md:pb-6\">\r\n                        <ErrorBoundary key={`${viewStack.length}-${currentNavigation.view}`}>\r\n                            <Suspense fallback={<DashboardSuspenseFallback />}>\r\n                                <div key={`${viewStack.length}-${version}`} className=\"animate-slide-in-up h-full\">\r\n                                    {renderContent()}\r\n                                </div>\r\n                            </Suspense>\r\n                        </ErrorBoundary>\r\n                    </div>\r\n                </div>\r\n                {/* Mobile Bottom Nav - Hidden on desktop */}\r\n                <div className=\"md:hidden\">\r\n                    <AdminBottomNav activeScreen={activeBottomNav} setActiveScreen={handleBottomNavClick} />\r\n                </div>\r\n                <Suspense fallback={<DashboardSuspenseFallback />}>\r\n                    {isSearchOpen && (\r\n                        <GlobalSearchScreen\r\n                            dashboardType={DashboardType.Admin}\r\n                            navigateTo={navigateTo}\r\n                            onClose={() => setIsSearchOpen(false)}\r\n                        />\r\n                    )}\r\n                </Suspense>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}