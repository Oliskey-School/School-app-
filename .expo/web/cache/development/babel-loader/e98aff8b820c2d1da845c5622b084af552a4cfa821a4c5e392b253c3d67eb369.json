{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\admin\\\\ManagePermissionSlipsScreen.tsx\";\nimport { toast } from 'react-hot-toast';\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from '../../lib/supabase';\nimport { TrashIcon, PlusIcon, SearchIcon, ClipboardListIcon, UserIcon } from '../../constants';\nimport ConfirmationModal from '../ui/ConfirmationModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ManagePermissionSlipsScreen = () => {\n  const [classes, setClasses] = useState([]);\n  const [recentSlips, setRecentSlips] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [newItem, setNewItem] = useState({\n    title: '',\n    description: '',\n    location: '',\n    date: '',\n    selectedClassId: ''\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [slipToDelete, setSlipToDelete] = useState(null);\n  useEffect(() => {\n    fetchClasses();\n    fetchRecentSlips();\n  }, []);\n  const fetchClasses = async () => {\n    const {\n      data\n    } = await supabase.from('classes').select('*').order('id');\n    setClasses(data || []);\n  };\n  const fetchRecentSlips = async () => {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('permission_slips').select('*, students(name, grade, section)').order('created_at', {\n        ascending: false\n      }).limit(50);\n      if (error) throw error;\n      setRecentSlips(data || []);\n    } catch (err) {\n      console.error('Error fetching slips:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleCreate = async e => {\n    e.preventDefault();\n    if (!newItem.selectedClassId) {\n      toast.error('Please select a class.');\n      return;\n    }\n    setIsSubmitting(true);\n    try {\n      const selectedClass = classes.find(c => c.id === newItem.selectedClassId);\n      if (!selectedClass) throw new Error(\"Class not found\");\n      const {\n        data: students,\n        error: studentError\n      } = await supabase.from('students').select('id').eq('grade', selectedClass.grade).eq('section', selectedClass.section);\n      if (studentError) throw studentError;\n      if (!students || students.length === 0) {\n        toast.error('No students found in this class.');\n        setIsSubmitting(false);\n        return;\n      }\n      const inserts = students.map(s => ({\n        student_id: s.id,\n        title: newItem.title,\n        description: newItem.description,\n        location: newItem.location,\n        date: newItem.date,\n        status: 'Pending'\n      }));\n      const {\n        error: insertError\n      } = await supabase.from('permission_slips').insert(inserts);\n      if (insertError) throw insertError;\n      setNewItem({\n        title: '',\n        description: '',\n        location: '',\n        date: '',\n        selectedClassId: ''\n      });\n      fetchRecentSlips();\n      toast.success(`Permission slip sent to ${students.length} students.`);\n    } catch (err) {\n      console.error('Error issuing slips:', err);\n      toast.error('Failed to issue slips. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  const confirmDelete = id => {\n    setSlipToDelete(id);\n    setShowDeleteModal(true);\n  };\n  const handleDelete = async () => {\n    if (slipToDelete === null) return;\n    const id = slipToDelete;\n    setShowDeleteModal(false);\n    setSlipToDelete(null);\n    const {\n      error\n    } = await supabase.from('permission_slips').delete().eq('id', id);\n    if (!error) {\n      fetchRecentSlips();\n      toast.success('Slip deleted.');\n    } else {\n      toast.error('Failed to delete slip.');\n    }\n  };\n  const filteredSlips = recentSlips.filter(slip => slip.title.toLowerCase().includes(searchTerm.toLowerCase()) || slip.students?.name.toLowerCase().includes(searchTerm.toLowerCase()));\n  return _jsxDEV(\"div\", {\n    className: \"flex flex-col h-full bg-gray-50 p-6 space-y-6 overflow-y-auto\",\n    children: [_jsxDEV(\"div\", {\n      className: \"flex flex-col space-y-2\",\n      children: [_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold text-gray-800\",\n        children: \"Permission Slips\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), _jsxDEV(\"p\", {\n        className: \"text-gray-500 text-sm\",\n        children: \"Issue and track permission slips for school events.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n      children: [_jsxDEV(\"div\", {\n        className: \"lg:col-span-1 space-y-6\",\n        children: _jsxDEV(\"div\", {\n          className: \"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 sticky top-6\",\n          children: [_jsxDEV(\"h2\", {\n            className: \"text-lg font-bold text-gray-800 mb-4 flex items-center\",\n            children: [_jsxDEV(PlusIcon, {\n              className: \"w-5 h-5 mr-2 text-indigo-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 29\n            }, this), \"Issue New Slip\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, this), _jsxDEV(\"form\", {\n            onSubmit: handleCreate,\n            className: \"space-y-4\",\n            children: [_jsxDEV(\"div\", {\n              children: [_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Select Class\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 33\n              }, this), _jsxDEV(\"select\", {\n                className: \"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all\",\n                value: newItem.selectedClassId,\n                onChange: e => setNewItem(Object.assign({}, newItem, {\n                  selectedClassId: e.target.value\n                })),\n                required: true,\n                children: [_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"-- Choose Class --\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 37\n                }, this), classes.map(c => _jsxDEV(\"option\", {\n                  value: c.id,\n                  children: [\"Grade \", c.grade, c.section, \" - \", c.subject]\n                }, c.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 41\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 29\n            }, this), _jsxDEV(\"div\", {\n              children: [_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Event Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 33\n              }, this), _jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"e.g. Zoo Excursion\",\n                className: \"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all\",\n                value: newItem.title,\n                onChange: e => setNewItem(Object.assign({}, newItem, {\n                  title: e.target.value\n                })),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this), _jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-4\",\n              children: [_jsxDEV(\"div\", {\n                children: [_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-1\",\n                  children: \"Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 37\n                }, this), _jsxDEV(\"input\", {\n                  type: \"date\",\n                  className: \"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all\",\n                  value: newItem.date,\n                  onChange: e => setNewItem(Object.assign({}, newItem, {\n                    date: e.target.value\n                  })),\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 33\n              }, this), _jsxDEV(\"div\", {\n                children: [_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-1\",\n                  children: \"Location\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 37\n                }, this), _jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"e.g. City Zoo\",\n                  className: \"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all\",\n                  value: newItem.location,\n                  onChange: e => setNewItem(Object.assign({}, newItem, {\n                    location: e.target.value\n                  })),\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this), _jsxDEV(\"div\", {\n              children: [_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 33\n              }, this), _jsxDEV(\"textarea\", {\n                placeholder: \"Information for parents...\",\n                className: \"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all h-28 resize-none\",\n                value: newItem.description,\n                onChange: e => setNewItem(Object.assign({}, newItem, {\n                  description: e.target.value\n                }))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 29\n            }, this), _jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: isSubmitting,\n              className: \"w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md shadow-indigo-200\",\n              children: isSubmitting ? 'Sending...' : 'Issue to Entire Class'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"lg:col-span-2 space-y-6\",\n        children: _jsxDEV(\"div\", {\n          className: \"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 min-h-[500px] flex flex-col\",\n          children: [_jsxDEV(\"div\", {\n            className: \"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4\",\n            children: [_jsxDEV(\"h2\", {\n              className: \"text-lg font-bold text-gray-800\",\n              children: \"Recent Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 29\n            }, this), _jsxDEV(\"div\", {\n              className: \"relative w-full sm:w-64\",\n              children: [_jsxDEV(SearchIcon, {\n                className: \"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 33\n              }, this), _jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Search student or event...\",\n                className: \"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-full focus:ring-2 focus:ring-indigo-500 outline-none transition-all text-sm\",\n                value: searchTerm,\n                onChange: e => setSearchTerm(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 25\n          }, this), loading ? _jsxDEV(\"div\", {\n            className: \"flex-grow flex justify-center items-center\",\n            children: _jsxDEV(\"div\", {\n              className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 29\n          }, this) : filteredSlips.length === 0 ? _jsxDEV(\"div\", {\n            className: \"flex-grow flex flex-col justify-center items-center text-gray-400 py-12\",\n            children: [_jsxDEV(ClipboardListIcon, {\n              className: \"w-12 h-12 mb-3 opacity-20\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 33\n            }, this), _jsxDEV(\"p\", {\n              children: \"No recent slips found.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 29\n          }, this) : _jsxDEV(\"div\", {\n            className: \"overflow-hidden\",\n            children: _jsxDEV(\"table\", {\n              className: \"min-w-full text-left\",\n              children: [_jsxDEV(\"thead\", {\n                children: _jsxDEV(\"tr\", {\n                  className: \"border-b border-gray-100 text-gray-400 text-xs uppercase tracking-wider\",\n                  children: [_jsxDEV(\"th\", {\n                    className: \"pb-3 px-2 font-semibold\",\n                    children: \"Student\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 45\n                  }, this), _jsxDEV(\"th\", {\n                    className: \"pb-3 px-2 font-semibold\",\n                    children: \"Event\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 45\n                  }, this), _jsxDEV(\"th\", {\n                    className: \"pb-3 px-2 font-semibold\",\n                    children: \"Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 45\n                  }, this), _jsxDEV(\"th\", {\n                    className: \"pb-3 px-2 font-semibold\",\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 45\n                  }, this), _jsxDEV(\"th\", {\n                    className: \"pb-3 px-2 text-right font-semibold\",\n                    children: \"Action\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 37\n              }, this), _jsxDEV(\"tbody\", {\n                className: \"text-sm divide-y divide-gray-50\",\n                children: filteredSlips.map(slip => _jsxDEV(\"tr\", {\n                  className: \"hover:bg-gray-50 transition-colors group\",\n                  children: [_jsxDEV(\"td\", {\n                    className: \"py-3 px-2\",\n                    children: _jsxDEV(\"div\", {\n                      className: \"flex items-center\",\n                      children: [_jsxDEV(\"div\", {\n                        className: \"w-8 h-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center mr-3 font-bold text-xs\",\n                        children: slip.students?.name?.charAt(0) || _jsxDEV(UserIcon, {\n                          className: \"w-4 h-4\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 264,\n                          columnNumber: 96\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 263,\n                        columnNumber: 57\n                      }, this), _jsxDEV(\"div\", {\n                        children: [_jsxDEV(\"div\", {\n                          className: \"font-medium text-gray-800\",\n                          children: slip.students?.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 267,\n                          columnNumber: 61\n                        }, this), _jsxDEV(\"div\", {\n                          className: \"text-xs text-gray-400\",\n                          children: [\"Class \", slip.students?.grade, slip.students?.section]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 268,\n                          columnNumber: 61\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 266,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 262,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 49\n                  }, this), _jsxDEV(\"td\", {\n                    className: \"py-3 px-2 text-gray-600 font-medium\",\n                    children: slip.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 49\n                  }, this), _jsxDEV(\"td\", {\n                    className: \"py-3 px-2 text-gray-500\",\n                    children: new Date(slip.date).toLocaleDateString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 49\n                  }, this), _jsxDEV(\"td\", {\n                    className: \"py-3 px-2\",\n                    children: _jsxDEV(\"span\", {\n                      className: `px-2.5 py-1 rounded-full text-xs font-bold ${slip.status === 'Approved' ? 'bg-green-100 text-green-700' : slip.status === 'Rejected' ? 'bg-red-100 text-red-700' : 'bg-yellow-100 text-yellow-700'}`,\n                      children: slip.status\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 275,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 274,\n                    columnNumber: 49\n                  }, this), _jsxDEV(\"td\", {\n                    className: \"py-3 px-2 text-right\",\n                    children: _jsxDEV(\"button\", {\n                      onClick: () => confirmDelete(slip.id),\n                      className: \"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\",\n                      title: \"Delete Slip\",\n                      children: _jsxDEV(TrashIcon, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 288,\n                        columnNumber: 57\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 283,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 49\n                  }, this)]\n                }, slip.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this), _jsxDEV(ConfirmationModal, {\n      isOpen: showDeleteModal,\n      onClose: () => setShowDeleteModal(false),\n      onConfirm: handleDelete,\n      title: \"Delete Permission Slip\",\n      message: \"Are you sure you want to delete this slip?\",\n      confirmText: \"Delete\",\n      isDanger: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 9\n  }, this);\n};\nexport default ManagePermissionSlipsScreen;","map":{"version":3,"names":["toast","React","useState","useEffect","supabase","TrashIcon","PlusIcon","SearchIcon","ClipboardListIcon","UserIcon","ConfirmationModal","jsxDEV","_jsxDEV","ManagePermissionSlipsScreen","classes","setClasses","recentSlips","setRecentSlips","loading","setLoading","newItem","setNewItem","title","description","location","date","selectedClassId","isSubmitting","setIsSubmitting","searchTerm","setSearchTerm","showDeleteModal","setShowDeleteModal","slipToDelete","setSlipToDelete","fetchClasses","fetchRecentSlips","data","from","select","order","error","ascending","limit","err","console","handleCreate","e","preventDefault","selectedClass","find","c","id","Error","students","studentError","eq","grade","section","length","inserts","map","s","student_id","status","insertError","insert","success","confirmDelete","handleDelete","delete","filteredSlips","filter","slip","toLowerCase","includes","name","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","Object","assign","target","required","subject","type","placeholder","disabled","charAt","Date","toLocaleDateString","onClick","isOpen","onClose","onConfirm","message","confirmText","isDanger"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/admin/ManagePermissionSlipsScreen.tsx"],"sourcesContent":["import { toast } from 'react-hot-toast';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { TrashIcon, PlusIcon, CheckCircleIcon, XCircleIcon, ClockIcon, SearchIcon, ClipboardListIcon, UserIcon } from '../../constants';\r\nimport ConfirmationModal from '../ui/ConfirmationModal';\r\n\r\nconst ManagePermissionSlipsScreen: React.FC = () => {\r\n    const [classes, setClasses] = useState<any[]>([]);\r\n    const [recentSlips, setRecentSlips] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [newItem, setNewItem] = useState({\r\n        title: '',\r\n        description: '',\r\n        location: '',\r\n        date: '',\r\n        selectedClassId: ''\r\n    });\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    // Deletion State\r\n    const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n    const [slipToDelete, setSlipToDelete] = useState<number | null>(null);\r\n\r\n    useEffect(() => {\r\n        fetchClasses();\r\n        fetchRecentSlips();\r\n    }, []);\r\n\r\n    const fetchClasses = async () => {\r\n        const { data } = await supabase.from('classes').select('*').order('id');\r\n        setClasses(data || []);\r\n    };\r\n\r\n    const fetchRecentSlips = async () => {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('permission_slips')\r\n                .select('*, students(name, grade, section)')\r\n                .order('created_at', { ascending: false })\r\n                .limit(50);\r\n\r\n            if (error) throw error;\r\n            setRecentSlips(data || []);\r\n        } catch (err) {\r\n            console.error('Error fetching slips:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCreate = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (!newItem.selectedClassId) {\r\n            toast.error('Please select a class.');\r\n            return;\r\n        }\r\n        setIsSubmitting(true);\r\n        try {\r\n            // 1. Get class details\r\n            const selectedClass = classes.find(c => c.id === newItem.selectedClassId);\r\n            if (!selectedClass) throw new Error(\"Class not found\");\r\n\r\n            // 2. Fetch students\r\n            const { data: students, error: studentError } = await supabase\r\n                .from('students')\r\n                .select('id')\r\n                .eq('grade', selectedClass.grade)\r\n                .eq('section', selectedClass.section);\r\n\r\n            if (studentError) throw studentError;\r\n            if (!students || students.length === 0) {\r\n                toast.error('No students found in this class.');\r\n                setIsSubmitting(false);\r\n                return;\r\n            }\r\n\r\n            // 3. Prepare inserts\r\n            const inserts = students.map(s => ({\r\n                student_id: s.id,\r\n                title: newItem.title,\r\n                description: newItem.description,\r\n                location: newItem.location,\r\n                date: newItem.date,\r\n                status: 'Pending'\r\n            }));\r\n\r\n            // 4. Bulk insert\r\n            const { error: insertError } = await supabase\r\n                .from('permission_slips')\r\n                .insert(inserts);\r\n\r\n            if (insertError) throw insertError;\r\n\r\n            setNewItem({ title: '', description: '', location: '', date: '', selectedClassId: '' });\r\n            fetchRecentSlips();\r\n            toast.success(`Permission slip sent to ${students.length} students.`);\r\n        } catch (err) {\r\n            console.error('Error issuing slips:', err);\r\n            toast.error('Failed to issue slips. Please try again.');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const confirmDelete = (id: number) => {\r\n        setSlipToDelete(id);\r\n        setShowDeleteModal(true);\r\n    };\r\n\r\n    const handleDelete = async () => {\r\n        if (slipToDelete === null) return;\r\n        const id = slipToDelete;\r\n        setShowDeleteModal(false);\r\n        setSlipToDelete(null);\r\n\r\n        const { error } = await supabase.from('permission_slips').delete().eq('id', id);\r\n        if (!error) {\r\n            fetchRecentSlips();\r\n            toast.success('Slip deleted.');\r\n        } else {\r\n            toast.error('Failed to delete slip.');\r\n        }\r\n    };\r\n\r\n    const filteredSlips = recentSlips.filter(slip =>\r\n        slip.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        slip.students?.name.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-gray-50 p-6 space-y-6 overflow-y-auto\">\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col space-y-2\">\r\n                <h1 className=\"text-2xl font-bold text-gray-800\">Permission Slips</h1>\r\n                <p className=\"text-gray-500 text-sm\">Issue and track permission slips for school events.</p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n\r\n                {/* Form Section */}\r\n                <div className=\"lg:col-span-1 space-y-6\">\r\n                    <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 sticky top-6\">\r\n                        <h2 className=\"text-lg font-bold text-gray-800 mb-4 flex items-center\">\r\n                            <PlusIcon className=\"w-5 h-5 mr-2 text-indigo-600\" />\r\n                            Issue New Slip\r\n                        </h2>\r\n                        <form onSubmit={handleCreate} className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Select Class</label>\r\n                                <select\r\n                                    className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all\"\r\n                                    value={newItem.selectedClassId}\r\n                                    onChange={e => setNewItem({ ...newItem, selectedClassId: e.target.value })}\r\n                                    required\r\n                                >\r\n                                    <option value=\"\">-- Choose Class --</option>\r\n                                    {classes.map(c => (\r\n                                        <option key={c.id} value={c.id}>Grade {c.grade}{c.section} - {c.subject}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Event Title</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"e.g. Zoo Excursion\"\r\n                                    className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all\"\r\n                                    value={newItem.title}\r\n                                    onChange={e => setNewItem({ ...newItem, title: e.target.value })}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Date</label>\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all\"\r\n                                        value={newItem.date}\r\n                                        onChange={e => setNewItem({ ...newItem, date: e.target.value })}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Location</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"e.g. City Zoo\"\r\n                                        className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all\"\r\n                                        value={newItem.location}\r\n                                        onChange={e => setNewItem({ ...newItem, location: e.target.value })}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Details</label>\r\n                                <textarea\r\n                                    placeholder=\"Information for parents...\"\r\n                                    className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all h-28 resize-none\"\r\n                                    value={newItem.description}\r\n                                    onChange={e => setNewItem({ ...newItem, description: e.target.value })}\r\n                                />\r\n                            </div>\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={isSubmitting}\r\n                                className=\"w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md shadow-indigo-200\"\r\n                            >\r\n                                {isSubmitting ? 'Sending...' : 'Issue to Entire Class'}\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* List Section */}\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 min-h-[500px] flex flex-col\">\r\n                        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4\">\r\n                            <h2 className=\"text-lg font-bold text-gray-800\">Recent Status</h2>\r\n                            <div className=\"relative w-full sm:w-64\">\r\n                                <SearchIcon className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Search student or event...\"\r\n                                    className=\"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-full focus:ring-2 focus:ring-indigo-500 outline-none transition-all text-sm\"\r\n                                    value={searchTerm}\r\n                                    onChange={e => setSearchTerm(e.target.value)}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {loading ? (\r\n                            <div className=\"flex-grow flex justify-center items-center\">\r\n                                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600\"></div>\r\n                            </div>\r\n                        ) : filteredSlips.length === 0 ? (\r\n                            <div className=\"flex-grow flex flex-col justify-center items-center text-gray-400 py-12\">\r\n                                <ClipboardListIcon className=\"w-12 h-12 mb-3 opacity-20\" />\r\n                                <p>No recent slips found.</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"overflow-hidden\">\r\n                                <table className=\"min-w-full text-left\">\r\n                                    <thead>\r\n                                        <tr className=\"border-b border-gray-100 text-gray-400 text-xs uppercase tracking-wider\">\r\n                                            <th className=\"pb-3 px-2 font-semibold\">Student</th>\r\n                                            <th className=\"pb-3 px-2 font-semibold\">Event</th>\r\n                                            <th className=\"pb-3 px-2 font-semibold\">Date</th>\r\n                                            <th className=\"pb-3 px-2 font-semibold\">Status</th>\r\n                                            <th className=\"pb-3 px-2 text-right font-semibold\">Action</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody className=\"text-sm divide-y divide-gray-50\">\r\n                                        {filteredSlips.map(slip => (\r\n                                            <tr key={slip.id} className=\"hover:bg-gray-50 transition-colors group\">\r\n                                                <td className=\"py-3 px-2\">\r\n                                                    <div className=\"flex items-center\">\r\n                                                        <div className=\"w-8 h-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center mr-3 font-bold text-xs\">\r\n                                                            {slip.students?.name?.charAt(0) || <UserIcon className=\"w-4 h-4\" />}\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <div className=\"font-medium text-gray-800\">{slip.students?.name}</div>\r\n                                                            <div className=\"text-xs text-gray-400\">Class {slip.students?.grade}{slip.students?.section}</div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td className=\"py-3 px-2 text-gray-600 font-medium\">{slip.title}</td>\r\n                                                <td className=\"py-3 px-2 text-gray-500\">{new Date(slip.date).toLocaleDateString()}</td>\r\n                                                <td className=\"py-3 px-2\">\r\n                                                    <span className={`px-2.5 py-1 rounded-full text-xs font-bold ${slip.status === 'Approved' ? 'bg-green-100 text-green-700' :\r\n                                                        slip.status === 'Rejected' ? 'bg-red-100 text-red-700' :\r\n                                                            'bg-yellow-100 text-yellow-700'\r\n                                                        }`}>\r\n                                                        {slip.status}\r\n                                                    </span>\r\n                                                </td>\r\n                                                <td className=\"py-3 px-2 text-right\">\r\n                                                    <button\r\n                                                        onClick={() => confirmDelete(slip.id)}\r\n                                                        className=\"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                                        title=\"Delete Slip\"\r\n                                                    >\r\n                                                        <TrashIcon className=\"w-4 h-4\" />\r\n                                                    </button>\r\n                                                </td>\r\n                                            </tr>\r\n                                        ))}\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <ConfirmationModal\r\n                isOpen={showDeleteModal}\r\n                onClose={() => setShowDeleteModal(false)}\r\n                onConfirm={handleDelete}\r\n                title=\"Delete Permission Slip\"\r\n                message=\"Are you sure you want to delete this slip?\"\r\n                confirmText=\"Delete\"\r\n                isDanger\r\n            />\r\n        </div>\r\n    );\r\n};\r\nexport default ManagePermissionSlipsScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}