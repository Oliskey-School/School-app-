{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\student\\\\AssignmentsScreen.tsx\";\nimport React, { useMemo, useState, useEffect } from 'react';\nimport { supabase } from '../../lib/supabase';\nimport { CheckCircleIcon, ClockIcon, ExclamationCircleIcon, DocumentTextIcon, SUBJECT_COLORS } from '../../constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AssignmentsScreen = ({\n  studentId,\n  subjectFilter,\n  navigateTo\n}) => {\n  const [assignments, setAssignments] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchAssignments = async () => {\n      try {\n        const {\n          data: assignmentsData,\n          error: assignError\n        } = await supabase.from('assignments').select('*').order('due_date', {\n          ascending: true\n        });\n        if (assignError) throw assignError;\n        const {\n          data: submissionsData,\n          error: subError\n        } = await supabase.from('submissions').select('*').eq('student_id', studentId);\n        const studentSubmissionsMap = new Map();\n        if (submissionsData) {\n          submissionsData.forEach(s => {\n            studentSubmissionsMap.set(s.assignment_id, {\n              id: s.id,\n              assignmentId: s.assignment_id,\n              student: {\n                id: studentId,\n                name: 'You',\n                avatarUrl: ''\n              },\n              submittedAt: s.submission_date || s.submitted_at || new Date().toISOString(),\n              isLate: s.is_late || false,\n              files: s.file_url ? [{\n                name: 'Submission',\n                size: 0\n              }] : [],\n              status: s.status || 'Ungraded',\n              grade: s.grade,\n              feedback: s.feedback\n            });\n          });\n        }\n        if (assignmentsData) {\n          const mapped = assignmentsData.map(a => ({\n            id: a.id,\n            title: a.title,\n            subject: a.subject,\n            description: a.description,\n            dueDate: a.due_date,\n            className: a.class_name || 'General',\n            totalStudents: a.total_students || 0,\n            submissionsCount: a.submissions_count || 0,\n            submission: studentSubmissionsMap.get(a.id)\n          }));\n          setAssignments(mapped);\n        }\n      } catch (err) {\n        console.error('Error fetching assignments:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchAssignments();\n    const channel = supabase.channel(`student_assignments_${studentId}`).on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'assignments'\n    }, () => {\n      fetchAssignments();\n    }).on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'submissions',\n      filter: `student_id=eq.${studentId}`\n    }, () => {\n      fetchAssignments();\n    }).subscribe();\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [studentId]);\n  const filteredAssignments = useMemo(() => {\n    return assignments.filter(assignment => !subjectFilter || assignment.subject === subjectFilter).sort((a, b) => new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime());\n  }, [assignments, subjectFilter]);\n  const getStatus = assignment => {\n    const dueDate = new Date(assignment.dueDate);\n    const now = new Date();\n    if (assignment.submission) {\n      if (assignment.submission.status === 'Graded') {\n        return {\n          text: `Graded: ${assignment.submission.grade}/100`,\n          icon: _jsxDEV(CheckCircleIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 84\n          }, this),\n          color: 'text-green-600',\n          isComplete: true\n        };\n      }\n      return {\n        text: 'Submitted',\n        icon: _jsxDEV(CheckCircleIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 47\n        }, this),\n        color: 'text-sky-600',\n        isComplete: true\n      };\n    }\n    if (dueDate < now) {\n      return {\n        text: 'Overdue',\n        icon: _jsxDEV(ExclamationCircleIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 45\n        }, this),\n        color: 'text-red-600',\n        isComplete: false\n      };\n    }\n    return {\n      text: 'Pending',\n      icon: _jsxDEV(ClockIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 41\n      }, this),\n      color: 'text-amber-600',\n      isComplete: false\n    };\n  };\n  const getButtonInfo = assignment => {\n    const isOverdue = new Date(assignment.dueDate) < new Date() && !assignment.submission;\n    if (assignment.submission?.status === 'Graded') {\n      return {\n        text: 'View Grade',\n        style: 'bg-green-100 text-green-700 hover:bg-green-200'\n      };\n    }\n    if (assignment.submission) {\n      return {\n        text: 'View Submission',\n        style: 'bg-sky-100 text-sky-700 hover:bg-sky-200'\n      };\n    }\n    if (isOverdue) {\n      return {\n        text: 'Submit Late',\n        style: 'bg-red-500 text-white hover:bg-red-600'\n      };\n    }\n    return {\n      text: 'Submit Now',\n      style: 'bg-orange-500 text-white hover:bg-orange-600'\n    };\n  };\n  const handleButtonClick = (assignment, buttonText) => {\n    switch (buttonText) {\n      case 'View Grade':\n        navigateTo('assignmentFeedback', 'View Feedback', {\n          assignment\n        });\n        break;\n      case 'Submit Now':\n      case 'Submit Late':\n      case 'View Submission':\n        navigateTo('assignmentSubmission', 'Submit Assignment', {\n          assignment\n        });\n        break;\n      default:\n        console.log(\"No action defined for:\", buttonText);\n    }\n  };\n  if (loading) return _jsxDEV(\"div\", {\n    className: \"p-8 text-center text-gray-500\",\n    children: \"Loading assignments...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 25\n  }, this);\n  return _jsxDEV(\"div\", {\n    className: \"flex flex-col h-full bg-gray-50\",\n    children: _jsxDEV(\"main\", {\n      className: \"flex-grow p-4 overflow-y-auto\",\n      children: filteredAssignments.length > 0 ? _jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: filteredAssignments.map(assignment => {\n          const status = getStatus(assignment);\n          const subjectColor = SUBJECT_COLORS[assignment.subject] || 'bg-gray-100 text-gray-800';\n          const buttonInfo = getButtonInfo(assignment);\n          return _jsxDEV(\"div\", {\n            className: \"bg-white rounded-xl shadow-sm overflow-hidden transition-all hover:shadow-md\",\n            children: [_jsxDEV(\"div\", {\n              className: \"p-4\",\n              children: [_jsxDEV(\"div\", {\n                className: \"flex justify-between items-start mb-2\",\n                children: [_jsxDEV(\"h4\", {\n                  className: \"font-bold text-lg text-gray-800 pr-2 flex-1\",\n                  children: assignment.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"span\", {\n                  className: `px-2.5 py-1 text-xs font-semibold rounded-full flex-shrink-0 ${subjectColor}`,\n                  children: assignment.subject\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 41\n              }, this), _jsxDEV(\"div\", {\n                className: \"flex items-center text-sm text-gray-500\",\n                children: [_jsxDEV(ClockIcon, {\n                  className: \"w-4 h-4 mr-1.5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"span\", {\n                  children: [\"Due: \", new Date(assignment.dueDate).toLocaleDateString('en-GB', {\n                    day: 'numeric',\n                    month: 'short'\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 37\n            }, this), _jsxDEV(\"div\", {\n              className: \"bg-gray-50 px-4 py-3 flex justify-between items-center\",\n              children: [_jsxDEV(\"div\", {\n                className: `flex items-center space-x-2 text-sm font-semibold ${status.color}`,\n                children: [React.cloneElement(status.icon, {\n                  className: `w-5 h-5 ${status.isComplete ? 'animate-checkmark-pop' : ''}`.trim()\n                }), _jsxDEV(\"span\", {\n                  children: status.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 41\n              }, this), _jsxDEV(\"button\", {\n                onClick: () => handleButtonClick(assignment, buttonInfo.text),\n                className: `px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${buttonInfo.style}`,\n                children: buttonInfo.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 37\n            }, this)]\n          }, assignment.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }, this) : _jsxDEV(\"div\", {\n        className: \"text-center py-10 bg-white rounded-lg shadow-sm mt-8\",\n        children: [_jsxDEV(DocumentTextIcon, {\n          className: \"mx-auto h-12 w-12 text-gray-300\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 25\n        }, this), _jsxDEV(\"h3\", {\n          className: \"mt-2 text-sm font-medium text-gray-900\",\n          children: \"No Assignments Found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 25\n        }, this), _jsxDEV(\"p\", {\n          className: \"mt-1 text-sm text-gray-500\",\n          children: subjectFilter ? `There are no assignments for this subject yet.` : `You're all caught up!`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 9\n  }, this);\n};\nexport default AssignmentsScreen;","map":{"version":3,"names":["React","useMemo","useState","useEffect","supabase","CheckCircleIcon","ClockIcon","ExclamationCircleIcon","DocumentTextIcon","SUBJECT_COLORS","jsxDEV","_jsxDEV","AssignmentsScreen","studentId","subjectFilter","navigateTo","assignments","setAssignments","loading","setLoading","fetchAssignments","data","assignmentsData","error","assignError","from","select","order","ascending","submissionsData","subError","eq","studentSubmissionsMap","Map","forEach","s","set","assignment_id","id","assignmentId","student","name","avatarUrl","submittedAt","submission_date","submitted_at","Date","toISOString","isLate","is_late","files","file_url","size","status","grade","feedback","mapped","map","a","title","subject","description","dueDate","due_date","className","class_name","totalStudents","total_students","submissionsCount","submissions_count","submission","get","err","console","channel","on","event","schema","table","filter","subscribe","removeChannel","filteredAssignments","assignment","sort","b","getTime","getStatus","now","text","icon","fileName","_jsxFileName","lineNumber","columnNumber","color","isComplete","getButtonInfo","isOverdue","style","handleButtonClick","buttonText","log","children","length","subjectColor","buttonInfo","toLocaleDateString","day","month","cloneElement","trim","onClick"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/student/AssignmentsScreen.tsx"],"sourcesContent":["import React, { useMemo, useState, useEffect } from 'react';\r\nimport { Assignment, Submission, StudentAssignment } from '../../types';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { CheckCircleIcon, ClockIcon, ExclamationCircleIcon, DocumentTextIcon, SUBJECT_COLORS } from '../../constants';\r\n\r\ninterface StudentAssignmentsScreenProps {\r\n    studentId: number;\r\n    subjectFilter?: string;\r\n    navigateTo: (view: string, title: string, props?: any) => void;\r\n}\r\n\r\nconst AssignmentsScreen: React.FC<StudentAssignmentsScreenProps> = ({ studentId, subjectFilter, navigateTo }) => {\r\n\r\n    const [assignments, setAssignments] = useState<StudentAssignment[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchAssignments = async () => {\r\n            try {\r\n                // Fetch all assignments (or filtered by class/grade if we had that info, \r\n                // but we might need to assume all assignments or fetch based on some criteria)\r\n                // For now, fetching all assignments.Ideally should filter by grade.\r\n\r\n                const { data: assignmentsData, error: assignError } = await supabase\r\n                    .from('assignments')\r\n                    .select('*')\r\n                    .order('due_date', { ascending: true });\r\n\r\n                if (assignError) throw assignError;\r\n\r\n                const { data: submissionsData, error: subError } = await supabase\r\n                    .from('submissions')\r\n                    .select('*')\r\n                    .eq('student_id', studentId);\r\n\r\n                // If submissions table doesn't exist or error, we just assume no submissions or handle gracefully\r\n                // but we will throw if real error to see it.\r\n\r\n                const studentSubmissionsMap = new Map<number, Submission>();\r\n                if (submissionsData) {\r\n                    submissionsData.forEach((s: any) => {\r\n                        studentSubmissionsMap.set(s.assignment_id, {\r\n                            id: s.id,\r\n                            assignmentId: s.assignment_id,\r\n                            student: { id: studentId, name: 'You', avatarUrl: '' }, // minimal mock or fetch\r\n                            submittedAt: s.submission_date || s.submitted_at || new Date().toISOString(),\r\n                            isLate: s.is_late || false,\r\n                            files: s.file_url ? [{ name: 'Submission', size: 0 }] : [],\r\n                            status: s.status || 'Ungraded',\r\n                            grade: s.grade,\r\n                            feedback: s.feedback\r\n                        });\r\n                    });\r\n                }\r\n\r\n                if (assignmentsData) {\r\n                    const mapped: StudentAssignment[] = assignmentsData.map((a: any) => ({\r\n                        id: a.id,\r\n                        title: a.title,\r\n                        subject: a.subject,\r\n                        description: a.description,\r\n                        dueDate: a.due_date,\r\n                        className: a.class_name || 'General',\r\n                        totalStudents: a.total_students || 0,\r\n                        submissionsCount: a.submissions_count || 0,\r\n                        submission: studentSubmissionsMap.get(a.id)\r\n                    }));\r\n                    setAssignments(mapped);\r\n                }\r\n\r\n            } catch (err) {\r\n                console.error('Error fetching assignments:', err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchAssignments();\r\n        // Realtime Subscription\r\n        const channel = supabase.channel(`student_assignments_${studentId}`)\r\n            .on('postgres_changes', { event: '*', schema: 'public', table: 'assignments' }, () => {\r\n                fetchAssignments();\r\n            })\r\n            .on('postgres_changes', { event: '*', schema: 'public', table: 'submissions', filter: `student_id=eq.${studentId}` }, () => {\r\n                fetchAssignments();\r\n            })\r\n            .subscribe();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, [studentId]);\r\n\r\n    const filteredAssignments = useMemo(() => {\r\n        return assignments\r\n            .filter(assignment => !subjectFilter || assignment.subject === subjectFilter)\r\n            .sort((a, b) => new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime());\r\n    }, [assignments, subjectFilter]);\r\n\r\n    const getStatus = (assignment: StudentAssignment) => {\r\n        const dueDate = new Date(assignment.dueDate);\r\n        const now = new Date();\r\n\r\n        if (assignment.submission) {\r\n            if (assignment.submission.status === 'Graded') {\r\n                return { text: `Graded: ${assignment.submission.grade}/100`, icon: <CheckCircleIcon />, color: 'text-green-600', isComplete: true };\r\n            }\r\n            return { text: 'Submitted', icon: <CheckCircleIcon />, color: 'text-sky-600', isComplete: true };\r\n        }\r\n\r\n        if (dueDate < now) {\r\n            return { text: 'Overdue', icon: <ExclamationCircleIcon />, color: 'text-red-600', isComplete: false };\r\n        }\r\n        return { text: 'Pending', icon: <ClockIcon />, color: 'text-amber-600', isComplete: false };\r\n    };\r\n\r\n    const getButtonInfo = (assignment: StudentAssignment) => {\r\n        const isOverdue = new Date(assignment.dueDate) < new Date() && !assignment.submission;\r\n\r\n        if (assignment.submission?.status === 'Graded') {\r\n            return { text: 'View Grade', style: 'bg-green-100 text-green-700 hover:bg-green-200' };\r\n        }\r\n        if (assignment.submission) {\r\n            return { text: 'View Submission', style: 'bg-sky-100 text-sky-700 hover:bg-sky-200' };\r\n        }\r\n        if (isOverdue) {\r\n            return { text: 'Submit Late', style: 'bg-red-500 text-white hover:bg-red-600' };\r\n        }\r\n        return { text: 'Submit Now', style: 'bg-orange-500 text-white hover:bg-orange-600' };\r\n    };\r\n\r\n    const handleButtonClick = (assignment: StudentAssignment, buttonText: string) => {\r\n        switch (buttonText) {\r\n            case 'View Grade':\r\n                navigateTo('assignmentFeedback', 'View Feedback', { assignment });\r\n                break;\r\n            case 'Submit Now':\r\n            case 'Submit Late':\r\n            case 'View Submission':\r\n                // Assuming we want to facilitate submission.\r\n                navigateTo('assignmentSubmission', 'Submit Assignment', { assignment });\r\n                break;\r\n            default:\r\n                console.log(\"No action defined for:\", buttonText);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div className=\"p-8 text-center text-gray-500\">Loading assignments...</div>;\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-gray-50\">\r\n            <main className=\"flex-grow p-4 overflow-y-auto\">\r\n                {filteredAssignments.length > 0 ? (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        {filteredAssignments.map(assignment => {\r\n                            const status = getStatus(assignment);\r\n                            const subjectColor = SUBJECT_COLORS[assignment.subject] || 'bg-gray-100 text-gray-800';\r\n                            const buttonInfo = getButtonInfo(assignment);\r\n\r\n                            return (\r\n                                <div key={assignment.id} className=\"bg-white rounded-xl shadow-sm overflow-hidden transition-all hover:shadow-md\">\r\n                                    <div className=\"p-4\">\r\n                                        <div className=\"flex justify-between items-start mb-2\">\r\n                                            <h4 className=\"font-bold text-lg text-gray-800 pr-2 flex-1\">{assignment.title}</h4>\r\n                                            <span className={`px-2.5 py-1 text-xs font-semibold rounded-full flex-shrink-0 ${subjectColor}`}>\r\n                                                {assignment.subject}\r\n                                            </span>\r\n                                        </div>\r\n\r\n                                        <div className=\"flex items-center text-sm text-gray-500\">\r\n                                            <ClockIcon className=\"w-4 h-4 mr-1.5\" />\r\n                                            <span>Due: {new Date(assignment.dueDate).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' })}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"bg-gray-50 px-4 py-3 flex justify-between items-center\">\r\n                                        <div className={`flex items-center space-x-2 text-sm font-semibold ${status.color}`}>\r\n                                            {React.cloneElement(status.icon, { className: `w-5 h-5 ${status.isComplete ? 'animate-checkmark-pop' : ''}`.trim() })}\r\n                                            <span>{status.text}</span>\r\n                                        </div>\r\n\r\n                                        <button\r\n                                            onClick={() => handleButtonClick(assignment, buttonInfo.text)}\r\n                                            className={`px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${buttonInfo.style}`}\r\n                                        >\r\n                                            {buttonInfo.text}\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"text-center py-10 bg-white rounded-lg shadow-sm mt-8\">\r\n                        <DocumentTextIcon className=\"mx-auto h-12 w-12 text-gray-300\" />\r\n                        <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No Assignments Found</h3>\r\n                        <p className=\"mt-1 text-sm text-gray-500\">{subjectFilter ? `There are no assignments for this subject yet.` : `You're all caught up!`}</p>\r\n                    </div>\r\n                )}\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AssignmentsScreen;"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}