{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\teacher\\\\GradeEntryScreen.tsx\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { supabase } from '../../lib/supabase';\nimport { CheckCircleIcon } from '../../constants';\nimport { toast } from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getScoreIndicatorStyle = scoreStr => {\n  const score = parseInt(scoreStr, 10);\n  if (scoreStr === '' || isNaN(score)) return 'border-gray-300 bg-gray-50 focus:bg-white';\n  if (score >= 90) return 'border-green-400 bg-green-100 text-green-900 font-bold';\n  if (score >= 75) return 'border-sky-400 bg-sky-100 text-sky-900 font-bold';\n  if (score >= 60) return 'border-amber-400 bg-amber-100 text-amber-900 font-bold';\n  return 'border-red-400 bg-red-100 text-red-900 font-bold';\n};\nconst SaveStatusIndicator = ({\n  status\n}) => {\n  switch (status) {\n    case 'saving':\n      return _jsxDEV(\"span\", {\n        className: \"text-sm text-gray-500 animate-pulse\",\n        children: \"Saving...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 20\n      }, this);\n    case 'saved':\n      return _jsxDEV(\"span\", {\n        className: \"text-sm text-green-600 flex items-center\",\n        children: [_jsxDEV(CheckCircleIcon, {\n          className: \"w-4 h-4 mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 79\n        }, this), \" All changes saved\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 20\n      }, this);\n    default:\n      return _jsxDEV(\"span\", {\n        className: \"text-sm text-gray-400\",\n        children: \"Grades will auto-save.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 20\n      }, this);\n  }\n};\nconst GradeEntryScreen = ({\n  exam\n}) => {\n  const [scores, setScores] = useState({});\n  const [students, setStudents] = useState([]);\n  const [saveStatus, setSaveStatus] = useState('idle');\n  const [loading, setLoading] = useState(true);\n  const debounceTimeoutRef = useRef(null);\n  const gradeSection = React.useMemo(() => {\n    const gradeMatch = exam.className.match(/\\d+/);\n    const sectionMatch = exam.className.match(/[A-Z]/);\n    if (!gradeMatch || !sectionMatch) return null;\n    return {\n      grade: parseInt(gradeMatch[0], 10),\n      section: sectionMatch[0]\n    };\n  }, [exam.className]);\n  useEffect(() => {\n    if (!gradeSection) {\n      setLoading(false);\n      return;\n    }\n    const fetchData = async () => {\n      setLoading(true);\n      try {\n        const {\n          data: studentsData,\n          error\n        } = await supabase.from('students').select('*').eq('grade', gradeSection.grade).eq('section', gradeSection.section).order('name');\n        if (error) throw error;\n        const loadedStudents = studentsData.map(s => Object.assign({}, s, {\n          avatarUrl: s.avatar_url\n        }));\n        setStudents(loadedStudents);\n        const studentIds = loadedStudents.map(s => s.id);\n        if (studentIds.length > 0) {\n          const {\n            data: gradesData\n          } = await supabase.from('academic_performance').select('student_id, score').eq('subject', exam.subject).eq('term', 'First Term').in('student_id', studentIds);\n          if (gradesData) {\n            const scoreMap = {};\n            gradesData.forEach(g => {\n              scoreMap[g.student_id] = g.score.toString();\n            });\n            setScores(scoreMap);\n          }\n        }\n      } catch (err) {\n        console.error(\"Error loading grade entry data:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [gradeSection, exam.subject]);\n  const saveGrade = async (studentId, value) => {\n    const numericScore = parseInt(value, 10);\n    const {\n      data: existing\n    } = await supabase.from('academic_performance').select('id').eq('student_id', studentId).eq('subject', exam.subject).eq('term', 'First Term').maybeSingle();\n    if (existing) {\n      await supabase.from('academic_performance').update({\n        score: numericScore\n      }).eq('id', existing.id);\n    } else {\n      await supabase.from('academic_performance').insert([{\n        student_id: studentId,\n        subject: exam.subject,\n        score: numericScore,\n        term: 'First Term',\n        session: '2024/2025'\n      }]);\n    }\n    setSaveStatus('saved');\n    setTimeout(() => setSaveStatus('idle'), 2000);\n  };\n  const handleScoreChange = (studentId, value) => {\n    const numericValue = parseInt(value, 10);\n    if (value === '' || numericValue >= 0 && numericValue <= 100) {\n      setScores(prev => Object.assign({}, prev, {\n        [studentId]: value\n      }));\n      if (debounceTimeoutRef.current) {\n        clearTimeout(debounceTimeoutRef.current);\n      }\n      setSaveStatus('saving');\n      debounceTimeoutRef.current = window.setTimeout(() => {\n        if (value !== '') {\n          saveGrade(studentId, value);\n        }\n      }, 1200);\n    }\n  };\n  const handleSubmit = () => {\n    toast.success('All grades submitted successfully!');\n  };\n  return _jsxDEV(\"div\", {\n    className: \"flex flex-col h-full bg-gray-100\",\n    children: [_jsxDEV(\"div\", {\n      className: \"p-4 bg-white border-b border-gray-200\",\n      children: [_jsxDEV(\"h3\", {\n        className: \"font-bold text-lg text-gray-800\",\n        children: [exam.subject, \" - \", exam.type]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"flex justify-between items-center\",\n        children: [_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: exam.className\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this), _jsxDEV(SaveStatusIndicator, {\n          status: saveStatus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }, this), _jsxDEV(\"main\", {\n      className: \"flex-grow overflow-y-auto\",\n      children: loading ? _jsxDEV(\"div\", {\n        className: \"p-10 text-center text-gray-500\",\n        children: \"Loading student list...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }, this) : _jsxDEV(\"ul\", {\n        className: \"divide-y divide-gray-200\",\n        children: [students.map(student => _jsxDEV(\"li\", {\n          className: \"p-4 flex items-center justify-between bg-white hover:bg-gray-50\",\n          children: [_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [student.avatarUrl ? _jsxDEV(\"img\", {\n              src: student.avatarUrl,\n              alt: student.name,\n              className: \"w-12 h-12 rounded-full object-cover\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 41\n            }, this) : _jsxDEV(\"div\", {\n              className: \"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center text-gray-500\",\n              children: _jsxDEV(\"span\", {\n                className: \"font-bold\",\n                children: student.name.charAt(0)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 41\n            }, this), _jsxDEV(\"div\", {\n              children: [_jsxDEV(\"p\", {\n                className: \"font-bold text-gray-800\",\n                children: student.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 41\n              }, this), _jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: [\"Student ID: SCH-0\", student.id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 33\n          }, this), _jsxDEV(\"input\", {\n            type: \"number\",\n            value: scores[student.id] || '',\n            onChange: e => handleScoreChange(student.id, e.target.value),\n            placeholder: \"--\",\n            max: 100,\n            min: 0,\n            \"aria-label\": `Score for ${student.name}`,\n            className: `w-16 sm:w-20 h-12 text-center text-lg rounded-lg border-2 transition-colors ${getScoreIndicatorStyle(scores[student.id] || '')}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 33\n          }, this)]\n        }, student.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 29\n        }, this)), students.length === 0 && _jsxDEV(\"div\", {\n          className: \"text-center py-10 bg-white\",\n          children: _jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: [\"No students found for this class (\", exam.className, \").\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"p-4 bg-white border-t border-gray-200\",\n      children: _jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        disabled: saveStatus === 'saving',\n        className: \"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-gray-400\",\n        children: \"Submit All Grades\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 9\n  }, this);\n};\nexport default GradeEntryScreen;","map":{"version":3,"names":["React","useState","useEffect","useRef","supabase","CheckCircleIcon","toast","jsxDEV","_jsxDEV","getScoreIndicatorStyle","scoreStr","score","parseInt","isNaN","SaveStatusIndicator","status","className","children","fileName","_jsxFileName","lineNumber","columnNumber","GradeEntryScreen","exam","scores","setScores","students","setStudents","saveStatus","setSaveStatus","loading","setLoading","debounceTimeoutRef","gradeSection","useMemo","gradeMatch","match","sectionMatch","grade","section","fetchData","data","studentsData","error","from","select","eq","order","loadedStudents","map","s","Object","assign","avatarUrl","avatar_url","studentIds","id","length","gradesData","subject","in","scoreMap","forEach","g","student_id","toString","err","console","saveGrade","studentId","value","numericScore","existing","maybeSingle","update","insert","term","session","setTimeout","handleScoreChange","numericValue","prev","current","clearTimeout","window","handleSubmit","success","type","student","src","alt","name","charAt","onChange","e","target","placeholder","max","min","onClick","disabled"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/teacher/GradeEntryScreen.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { Exam, Student } from '../../types';\r\nimport { CheckCircleIcon } from '../../constants';\r\n\r\nimport { toast } from 'react-hot-toast';\r\n\r\nconst getScoreIndicatorStyle = (scoreStr: string): string => {\r\n    const score = parseInt(scoreStr, 10);\r\n    if (scoreStr === '' || isNaN(score)) return 'border-gray-300 bg-gray-50 focus:bg-white';\r\n    if (score >= 90) return 'border-green-400 bg-green-100 text-green-900 font-bold';\r\n    if (score >= 75) return 'border-sky-400 bg-sky-100 text-sky-900 font-bold';\r\n    if (score >= 60) return 'border-amber-400 bg-amber-100 text-amber-900 font-bold';\r\n    return 'border-red-400 bg-red-100 text-red-900 font-bold';\r\n};\r\n\r\nconst SaveStatusIndicator: React.FC<{ status: 'idle' | 'saving' | 'saved' }> = ({ status }) => {\r\n    switch (status) {\r\n        case 'saving':\r\n            return <span className=\"text-sm text-gray-500 animate-pulse\">Saving...</span>;\r\n        case 'saved':\r\n            return <span className=\"text-sm text-green-600 flex items-center\"><CheckCircleIcon className=\"w-4 h-4 mr-1\" /> All changes saved</span>;\r\n        default:\r\n            return <span className=\"text-sm text-gray-400\">Grades will auto-save.</span>;\r\n    }\r\n};\r\n\r\ninterface GradeEntryScreenProps {\r\n    exam: Exam;\r\n}\r\n\r\nconst GradeEntryScreen: React.FC<GradeEntryScreenProps> = ({ exam }) => {\r\n    const [scores, setScores] = useState<{ [studentId: number]: string }>({});\r\n    const [students, setStudents] = useState<Student[]>([]);\r\n    const [saveStatus, setSaveStatus] = useState<'idle' | 'saving' | 'saved'>('idle');\r\n    const [loading, setLoading] = useState(true);\r\n    const debounceTimeoutRef = useRef<number | null>(null);\r\n\r\n    // Parse Class Name\r\n    const gradeSection = React.useMemo(() => {\r\n        const gradeMatch = exam.className.match(/\\d+/);\r\n        const sectionMatch = exam.className.match(/[A-Z]/);\r\n        if (!gradeMatch || !sectionMatch) return null;\r\n        return {\r\n            grade: parseInt(gradeMatch[0], 10),\r\n            section: sectionMatch[0]\r\n        };\r\n    }, [exam.className]);\r\n\r\n    // Fetch Students\r\n    useEffect(() => {\r\n        if (!gradeSection) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const fetchData = async () => {\r\n            setLoading(true);\r\n            try {\r\n                // 1. Fetch Students\r\n                const { data: studentsData, error } = await supabase\r\n                    .from('students')\r\n                    .select('*')\r\n                    .eq('grade', gradeSection.grade)\r\n                    .eq('section', gradeSection.section)\r\n                    .order('name');\r\n\r\n                if (error) throw error;\r\n\r\n                const loadedStudents = studentsData.map((s: any) => ({\r\n                    ...s,\r\n                    avatarUrl: s.avatar_url\r\n                }));\r\n                setStudents(loadedStudents);\r\n\r\n                // 2. Fetch Existing Grades for this subject\r\n                const studentIds = loadedStudents.map(s => s.id);\r\n                if (studentIds.length > 0) {\r\n                    const { data: gradesData } = await supabase\r\n                        .from('academic_performance')\r\n                        .select('student_id, score')\r\n                        .eq('subject', exam.subject)\r\n                        .eq('term', 'First Term') // Hardcoded for simplified context\r\n                        .in('student_id', studentIds);\r\n\r\n                    if (gradesData) {\r\n                        const scoreMap: { [key: number]: string } = {};\r\n                        gradesData.forEach((g: any) => {\r\n                            scoreMap[g.student_id] = g.score.toString();\r\n                        });\r\n                        setScores(scoreMap);\r\n                    }\r\n                }\r\n\r\n            } catch (err) {\r\n                console.error(\"Error loading grade entry data:\", err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, [gradeSection, exam.subject]);\r\n\r\n\r\n    const saveGrade = async (studentId: number, value: string) => {\r\n        const numericScore = parseInt(value, 10);\r\n\r\n        // Upsert logic (requires unique constraint usually, but we handle via check first or assume insert/update)\r\n        // Check if exists\r\n        const { data: existing } = await supabase\r\n            .from('academic_performance')\r\n            .select('id')\r\n            .eq('student_id', studentId)\r\n            .eq('subject', exam.subject)\r\n            .eq('term', 'First Term')\r\n            .maybeSingle();\r\n\r\n        if (existing) {\r\n            await supabase.from('academic_performance').update({ score: numericScore }).eq('id', existing.id);\r\n        } else {\r\n            await supabase.from('academic_performance').insert([{\r\n                student_id: studentId,\r\n                subject: exam.subject,\r\n                score: numericScore,\r\n                term: 'First Term',\r\n                session: '2024/2025'\r\n            }]);\r\n        }\r\n\r\n        // console.log(`Saved score for student ${studentId}: ${value}`);\r\n        setSaveStatus('saved');\r\n        setTimeout(() => setSaveStatus('idle'), 2000);\r\n    };\r\n\r\n    const handleScoreChange = (studentId: number, value: string) => {\r\n        const numericValue = parseInt(value, 10);\r\n        if (value === '' || (numericValue >= 0 && numericValue <= 100)) {\r\n            setScores(prev => ({ ...prev, [studentId]: value }));\r\n\r\n            if (debounceTimeoutRef.current) {\r\n                clearTimeout(debounceTimeoutRef.current);\r\n            }\r\n            setSaveStatus('saving');\r\n\r\n            debounceTimeoutRef.current = window.setTimeout(() => {\r\n                if (value !== '') {\r\n                    saveGrade(studentId, value);\r\n                }\r\n            }, 1200);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = () => {\r\n        toast.success('All grades submitted successfully!');\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-gray-100\">\r\n            {/* Header section */}\r\n            <div className=\"p-4 bg-white border-b border-gray-200\">\r\n                <h3 className=\"font-bold text-lg text-gray-800\">{exam.subject} - {exam.type}</h3>\r\n                <div className=\"flex justify-between items-center\">\r\n                    <p className=\"text-sm text-gray-500\">{exam.className}</p>\r\n                    <SaveStatusIndicator status={saveStatus} />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Student List */}\r\n            <main className=\"flex-grow overflow-y-auto\">\r\n                {loading ? (\r\n                    <div className=\"p-10 text-center text-gray-500\">Loading student list...</div>\r\n                ) : (\r\n                    <ul className=\"divide-y divide-gray-200\">\r\n                        {students.map(student => (\r\n                            <li key={student.id} className=\"p-4 flex items-center justify-between bg-white hover:bg-gray-50\">\r\n                                <div className=\"flex items-center space-x-4\">\r\n                                    {student.avatarUrl ? (\r\n                                        <img src={student.avatarUrl} alt={student.name} className=\"w-12 h-12 rounded-full object-cover\" />\r\n                                    ) : (\r\n                                        <div className=\"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center text-gray-500\">\r\n                                            <span className=\"font-bold\">{student.name.charAt(0)}</span>\r\n                                        </div>\r\n                                    )}\r\n                                    <div>\r\n                                        <p className=\"font-bold text-gray-800\">{student.name}</p>\r\n                                        <p className=\"text-sm text-gray-500\">Student ID: SCH-0{student.id}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={scores[student.id] || ''}\r\n                                    onChange={(e) => handleScoreChange(student.id, e.target.value)}\r\n                                    placeholder=\"--\"\r\n                                    max={100}\r\n                                    min={0}\r\n                                    aria-label={`Score for ${student.name}`}\r\n                                    className={`w-16 sm:w-20 h-12 text-center text-lg rounded-lg border-2 transition-colors ${getScoreIndicatorStyle(scores[student.id] || '')}`}\r\n                                />\r\n                            </li>\r\n                        ))}\r\n                        {students.length === 0 && (\r\n                            <div className=\"text-center py-10 bg-white\">\r\n                                <p className=\"text-gray-500\">No students found for this class ({exam.className}).</p>\r\n                            </div>\r\n                        )}\r\n                    </ul>\r\n                )}\r\n            </main>\r\n\r\n            {/* Footer action button */}\r\n            <div className=\"p-4 bg-white border-t border-gray-200\">\r\n                <button\r\n                    onClick={handleSubmit}\r\n                    disabled={saveStatus === 'saving'}\r\n                    className=\"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-gray-400\"\r\n                >\r\n                    Submit All Grades\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GradeEntryScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}