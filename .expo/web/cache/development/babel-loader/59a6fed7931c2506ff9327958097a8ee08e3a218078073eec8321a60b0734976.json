{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\teacher\\\\CBTManagementScreen.tsx\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport { toast } from 'react-hot-toast';\nimport readXlsxFile from 'read-excel-file';\nimport { supabase } from '../../lib/supabase';\nimport { CloudUploadIcon, ExamIcon, XCircleIcon, WifiIcon, getFormattedClassName } from '../../constants';\nimport { fetchSubjects, fetchCBTExams } from '../../lib/database';\nimport { useTeacherClasses } from '../../hooks/useTeacherClasses';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CBTManagementScreen = ({\n  navigateTo,\n  teacherId\n}) => {\n  const [exams, setExams] = useState([]);\n  const [subjects, setSubjects] = useState([]);\n  const {\n    classes: teacherClasses,\n    loading: loadingClasses\n  } = useTeacherClasses(teacherId);\n  const [selectedClassId, setSelectedClassId] = useState('');\n  const [selectedSubjectId, setSelectedSubjectId] = useState('');\n  const [duration, setDuration] = useState(60);\n  const [totalMarks, setTotalMarks] = useState(60);\n  const [uploadType, setUploadType] = useState('Test');\n  const [isUploading, setIsUploading] = useState(false);\n  const [deleteId, setDeleteId] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [errorMsg, setErrorMsg] = useState(null);\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n  const fileInputRef = useRef(null);\n  useEffect(() => {\n    loadInitialData();\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n  const loadInitialData = async () => {\n    setLoading(true);\n    try {\n      const [fetchedSubjects, backendExams] = await Promise.all([fetchSubjects(), fetchCBTExams(teacherId || undefined)]);\n      setSubjects(fetchedSubjects);\n      setExams(backendExams);\n    } catch (err) {\n      console.error(\"Error loading data:\", err);\n      setErrorMsg(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFileUpload = async event => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n    if (!selectedClassId || !selectedSubjectId) {\n      toast.error(\"Please select a valid Class and Subject first.\");\n      if (fileInputRef.current) fileInputRef.current.value = '';\n      return;\n    }\n    setIsUploading(true);\n    setErrorMsg(null);\n    try {\n      const rows = await readXlsxFile(file);\n      console.log(\"Uploaded rows raw:\", rows);\n      const validRows = rows.filter((row, index) => {\n        if (index === 0) return true;\n        const questionText = row[1];\n        return questionText && questionText.toString().trim().length > 0;\n      });\n      if (validRows.length <= 1) {\n        throw new Error(\"The Excel file appears to contain no valid questions. Please ensure Column B has question text.\");\n      }\n      const dataRows = validRows.slice(1);\n      const questionCount = dataRows.length;\n      const markPerQuestion = totalMarks > 0 ? totalMarks / questionCount : 1;\n      const parsedQuestions = dataRows.map(row => ({\n        question_text: row[1]?.toString().trim() || 'Question',\n        option_a: row[2]?.toString().trim() || 'Option A',\n        option_b: row[3]?.toString().trim() || 'Option B',\n        option_c: row[4]?.toString().trim() || 'Option C',\n        option_d: row[5]?.toString().trim() || 'Option D',\n        correct_option: (row[6]?.toString().trim() || 'A').charAt(0).toUpperCase(),\n        marks: parseFloat(markPerQuestion.toFixed(2))\n      }));\n      console.log(\"Parsed questions:\", parsedQuestions);\n      const {\n        data: examData,\n        error: examError\n      } = await supabase.from('cbt_exams').insert([{\n        title: file.name.replace('.xlsx', '').replace('.xls', ''),\n        type: uploadType,\n        class_id: parseInt(selectedClassId),\n        subject_id: selectedSubjectId,\n        duration_minutes: duration,\n        total_marks: totalMarks,\n        teacher_id: teacherId,\n        is_published: false\n      }]).select().single();\n      if (examError) throw examError;\n      const questionsPayload = parsedQuestions.map(q => Object.assign({\n        cbt_exam_id: examData.id\n      }, q));\n      const {\n        error: qError\n      } = await supabase.from('cbt_questions').insert(questionsPayload);\n      if (qError) throw qError;\n      toast.success(\"Exam uploaded successfully!\");\n      loadInitialData();\n    } catch (err) {\n      console.error(\"Upload error:\", err);\n      setErrorMsg(err.message || \"Failed to process upload.\");\n      toast.error(err.message || \"Upload failed.\");\n    } finally {\n      setIsUploading(false);\n      if (fileInputRef.current) fileInputRef.current.value = '';\n    }\n  };\n  const togglePublish = async exam => {\n    const newStatus = !exam.isPublished;\n    setExams(prev => prev.map(e => e.id === exam.id ? Object.assign({}, e, {\n      isPublished: newStatus\n    }) : e));\n    const {\n      error\n    } = await supabase.from('cbt_exams').update({\n      is_published: newStatus\n    }).eq('id', exam.id);\n    if (error) {\n      toast.error(\"Failed to update status.\");\n      loadInitialData();\n    }\n  };\n  return _jsxDEV(\"div\", {\n    className: \"flex flex-col h-full bg-slate-50\",\n    children: _jsxDEV(\"main\", {\n      className: \"flex-grow p-4 md:p-6 space-y-6 overflow-y-auto w-full\",\n      children: [_jsxDEV(\"div\", {\n        className: \"flex flex-col md:flex-row md:items-center justify-between pb-4 border-b border-gray-200\",\n        children: [_jsxDEV(\"div\", {\n          children: [_jsxDEV(\"h1\", {\n            className: \"text-xl md:text-2xl font-bold text-slate-800\",\n            children: \"CBT & Examinations\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 25\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-slate-500 mt-1 text-sm\",\n            children: \"Create assessments from Excel (\\\"Question Bank\\\")\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 21\n        }, this), !isOnline && _jsxDEV(\"div\", {\n          className: \"flex items-center text-amber-600 bg-amber-50 px-3 py-1 rounded-full text-xs font-bold mt-2 md:mt-0 self-start md:self-auto\",\n          children: [_jsxDEV(WifiIcon, {\n            className: \"w-4 h-4 mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 29\n          }, this), \"Offline Mode\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden\",\n        children: [_jsxDEV(\"div\", {\n          className: \"px-6 py-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center\",\n          children: [_jsxDEV(\"h3\", {\n            className: \"font-semibold text-slate-800 flex items-center\",\n            children: [_jsxDEV(ExamIcon, {\n              className: \"w-5 h-5 mr-2 text-indigo-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 29\n            }, this), \"Upload Question Bank\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: \"flex bg-white rounded-lg p-1 border border-slate-200\",\n            children: [_jsxDEV(\"button\", {\n              onClick: () => setUploadType('Test'),\n              className: `px-4 py-1.5 rounded-md text-sm font-medium transition-all ${uploadType === 'Test' ? 'bg-indigo-600 text-white shadow-sm' : 'text-slate-600 hover:bg-slate-50'}`,\n              children: \"Test\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 29\n            }, this), _jsxDEV(\"button\", {\n              onClick: () => setUploadType('Exam'),\n              className: `px-4 py-1.5 rounded-md text-sm font-medium transition-all ${uploadType === 'Exam' ? 'bg-indigo-600 text-white shadow-sm' : 'text-slate-600 hover:bg-slate-50'}`,\n              children: \"Exam\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"p-6 grid grid-cols-1 lg:grid-cols-2 gap-8\",\n          children: [_jsxDEV(\"div\", {\n            className: \"space-y-5\",\n            children: [_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n              children: [_jsxDEV(\"div\", {\n                children: [_jsxDEV(\"label\", {\n                  className: \"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5\",\n                  children: \"Class\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 37\n                }, this), _jsxDEV(\"select\", {\n                  value: selectedClassId,\n                  onChange: e => setSelectedClassId(e.target.value),\n                  className: \"w-full rounded-lg border-slate-300 py-2 text-sm\",\n                  children: [_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Select Class\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 41\n                  }, this), teacherClasses.map(c => {\n                    const name = getFormattedClassName ? getFormattedClassName(c.grade, c.section) : `Grade ${c.grade}${c.section}`;\n                    return _jsxDEV(\"option\", {\n                      value: c.id,\n                      children: name\n                    }, c.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 222,\n                      columnNumber: 52\n                    }, this);\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 33\n              }, this), _jsxDEV(\"div\", {\n                children: [_jsxDEV(\"label\", {\n                  className: \"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5\",\n                  children: \"Subject\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 37\n                }, this), _jsxDEV(\"select\", {\n                  value: selectedSubjectId,\n                  onChange: e => setSelectedSubjectId(e.target.value),\n                  className: \"w-full rounded-lg border-slate-300 py-2 text-sm\",\n                  children: [_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Select Subject\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 229,\n                    columnNumber: 41\n                  }, this), subjects.map(s => _jsxDEV(\"option\", {\n                    value: s.id,\n                    children: [s.name, \" (\", s.code || s.category, \")\"]\n                  }, s.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 60\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 29\n            }, this), _jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-4\",\n              children: [_jsxDEV(\"div\", {\n                children: [_jsxDEV(\"label\", {\n                  className: \"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5\",\n                  children: \"Duration (Mins)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 37\n                }, this), _jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: duration,\n                  onChange: e => setDuration(parseInt(e.target.value)),\n                  className: \"w-full rounded-lg border-slate-300 py-2 text-sm\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 33\n              }, this), _jsxDEV(\"div\", {\n                children: [_jsxDEV(\"label\", {\n                  className: \"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5\",\n                  children: \"Total Marks\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 37\n                }, this), _jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: totalMarks,\n                  onChange: e => setTotalMarks(parseInt(e.target.value)),\n                  className: \"w-full rounded-lg border-slate-300 py-2 text-sm\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: \"border-2 border-dashed border-slate-300 rounded-xl flex flex-col justify-center items-center p-6 cursor-pointer hover:bg-slate-50 hover:border-indigo-400 transition-all group\",\n            onClick: () => fileInputRef.current?.click(),\n            children: [_jsxDEV(\"input\", {\n              type: \"file\",\n              ref: fileInputRef,\n              onChange: handleFileUpload,\n              accept: \".xlsx, .xls\",\n              className: \"hidden\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 29\n            }, this), isUploading ? _jsxDEV(\"div\", {\n              className: \"text-center animate-pulse\",\n              children: [_jsxDEV(CloudUploadIcon, {\n                className: \"h-10 w-10 text-indigo-500 mx-auto mb-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 37\n              }, this), _jsxDEV(\"p\", {\n                className: \"text-indigo-600 font-medium text-sm\",\n                children: \"Processing...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 33\n            }, this) : _jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [_jsxDEV(\"div\", {\n                className: \"bg-indigo-50 p-3 rounded-full inline-block mb-3 group-hover:bg-indigo-100 transition-colors\",\n                children: _jsxDEV(CloudUploadIcon, {\n                  className: \"h-6 w-6 text-indigo-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 37\n              }, this), _jsxDEV(\"p\", {\n                className: \"font-semibold text-slate-700 text-sm\",\n                children: \"Upload Excel File\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 37\n              }, this), _jsxDEV(\"p\", {\n                className: \"text-xs text-slate-400 mt-1\",\n                children: \"Columns: No, Question, A, B, C, D, Answer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }, this), errorMsg && _jsxDEV(\"div\", {\n        className: \"bg-red-50 text-red-700 p-4 rounded-lg flex items-center border border-red-200\",\n        children: [_jsxDEV(XCircleIcon, {\n          className: \"w-5 h-5 mr-2 flex-shrink-0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 25\n        }, this), _jsxDEV(\"span\", {\n          className: \"text-sm\",\n          children: errorMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 21\n      }, this), _jsxDEV(\"div\", {\n        children: [_jsxDEV(\"h2\", {\n          className: \"text-lg font-bold text-slate-800 mb-4 px-1\",\n          children: \"Managed Exams\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 21\n        }, this), loading ? _jsxDEV(\"div\", {\n          className: \"text-center py-12\",\n          children: [_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 29\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-slate-500 text-sm\",\n            children: \"Loading data...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 25\n        }, this) : _jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 gap-4\",\n          children: [exams.map(exam => _jsxDEV(\"div\", {\n            className: \"bg-white p-5 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow\",\n            children: _jsxDEV(\"div\", {\n              className: \"flex justify-between items-center\",\n              children: [_jsxDEV(\"div\", {\n                children: [_jsxDEV(\"h4\", {\n                  className: \"font-bold text-slate-800 text-lg\",\n                  children: exam.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"p\", {\n                  className: \"text-sm text-slate-600\",\n                  children: [exam.type, \" \\u2022 \", exam.duration, \" mins \\u2022 \", exam.totalMarks, \" Marks\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 41\n              }, this), _jsxDEV(\"div\", {\n                className: \"flex items-center gap-3\",\n                children: [_jsxDEV(\"span\", {\n                  className: `px-2 py-1 rounded text-xs font-bold uppercase ${exam.isPublished ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700'}`,\n                  children: exam.isPublished ? 'Live' : 'Draft'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"button\", {\n                  onClick: () => togglePublish(exam),\n                  className: \"text-sm text-indigo-600 font-semibold hover:underline\",\n                  children: exam.isPublished ? 'Unpublish' : 'Publish'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 37\n            }, this)\n          }, exam.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 33\n          }, this)), exams.length === 0 && _jsxDEV(\"div\", {\n            className: \"text-center py-12 text-slate-400 bg-slate-50 rounded-lg\",\n            children: \"No exams found. Upload one to start.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 9\n  }, this);\n};\nexport default CBTManagementScreen;","map":{"version":3,"names":["React","useState","useRef","useEffect","toast","readXlsxFile","supabase","CloudUploadIcon","ExamIcon","XCircleIcon","WifiIcon","getFormattedClassName","fetchSubjects","fetchCBTExams","useTeacherClasses","jsxDEV","_jsxDEV","CBTManagementScreen","navigateTo","teacherId","exams","setExams","subjects","setSubjects","classes","teacherClasses","loading","loadingClasses","selectedClassId","setSelectedClassId","selectedSubjectId","setSelectedSubjectId","duration","setDuration","totalMarks","setTotalMarks","uploadType","setUploadType","isUploading","setIsUploading","deleteId","setDeleteId","setLoading","errorMsg","setErrorMsg","isOnline","setIsOnline","navigator","onLine","fileInputRef","loadInitialData","handleOnline","handleOffline","window","addEventListener","removeEventListener","fetchedSubjects","backendExams","Promise","all","undefined","err","console","error","message","handleFileUpload","event","file","target","files","current","value","rows","log","validRows","filter","row","index","questionText","toString","trim","length","Error","dataRows","slice","questionCount","markPerQuestion","parsedQuestions","map","question_text","option_a","option_b","option_c","option_d","correct_option","charAt","toUpperCase","marks","parseFloat","toFixed","data","examData","examError","from","insert","title","name","replace","type","class_id","parseInt","subject_id","duration_minutes","total_marks","teacher_id","is_published","select","single","questionsPayload","q","Object","assign","cbt_exam_id","id","qError","success","togglePublish","exam","newStatus","isPublished","prev","e","update","eq","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onChange","c","grade","section","s","code","category","click","ref","accept"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/teacher/CBTManagementScreen.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { toast } from 'react-hot-toast';\r\nimport readXlsxFile from 'read-excel-file';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { CloudUploadIcon, EyeIcon, ExamIcon, TrashIcon, XCircleIcon, WifiIcon, getFormattedClassName } from '../../constants';\r\nimport { CBTExam, Subject } from '../../types';\r\nimport ConfirmationModal from '../ui/ConfirmationModal';\r\nimport { fetchSubjects, fetchCBTExams } from '../../lib/database';\r\nimport { useTeacherClasses } from '../../hooks/useTeacherClasses';\r\n\r\ninterface CBTManagementScreenProps {\r\n    navigateTo: (view: string, title: string, props?: any) => void;\r\n    teacherId?: number | null;\r\n}\r\n\r\nconst CBTManagementScreen: React.FC<CBTManagementScreenProps> = ({ navigateTo, teacherId }) => {\r\n    const [exams, setExams] = useState<CBTExam[]>([]);\r\n    const [subjects, setSubjects] = useState<Subject[]>([]);\r\n\r\n    // Use the comprehensive hook for classes\r\n    const { classes: teacherClasses, loading: loadingClasses } = useTeacherClasses(teacherId);\r\n\r\n    // Configuration State\r\n    const [selectedClassId, setSelectedClassId] = useState<string>('');\r\n    const [selectedSubjectId, setSelectedSubjectId] = useState<string>('');\r\n    const [duration, setDuration] = useState(60);\r\n    const [totalMarks, setTotalMarks] = useState(60);\r\n    const [uploadType, setUploadType] = useState<'Test' | 'Exam'>('Test');\r\n\r\n    const [isUploading, setIsUploading] = useState(false);\r\n    const [deleteId, setDeleteId] = useState<number | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [errorMsg, setErrorMsg] = useState<string | null>(null);\r\n    const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    useEffect(() => {\r\n        loadInitialData();\r\n\r\n        const handleOnline = () => setIsOnline(true);\r\n        const handleOffline = () => setIsOnline(false);\r\n        window.addEventListener('online', handleOnline);\r\n        window.addEventListener('offline', handleOffline);\r\n\r\n        return () => {\r\n            window.removeEventListener('online', handleOnline);\r\n            window.removeEventListener('offline', handleOffline);\r\n        };\r\n    }, []);\r\n\r\n    const loadInitialData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            // 1. Fetch Subjects and Exams\r\n            const [fetchedSubjects, backendExams] = await Promise.all([\r\n                fetchSubjects(),\r\n                fetchCBTExams(teacherId || undefined)\r\n            ]);\r\n\r\n            setSubjects(fetchedSubjects);\r\n            setExams(backendExams);\r\n\r\n        } catch (err: any) {\r\n            console.error(\"Error loading data:\", err);\r\n            setErrorMsg(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = event.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        if (!selectedClassId || !selectedSubjectId) {\r\n            toast.error(\"Please select a valid Class and Subject first.\");\r\n            if (fileInputRef.current) fileInputRef.current.value = '';\r\n            return;\r\n        }\r\n\r\n        setIsUploading(true);\r\n        setErrorMsg(null);\r\n\r\n        try {\r\n            const rows = await readXlsxFile(file);\r\n\r\n            // Debug log\r\n            console.log(\"Uploaded rows raw:\", rows);\r\n\r\n            // Filter out completely empty rows or rows where the Question (index 1) is empty\r\n            const validRows = rows.filter((row, index) => {\r\n                // Keep header (index 0) if it looks like a header, but primarily filter data\r\n                if (index === 0) return true; // Skip header validation for now\r\n                const questionText = row[1];\r\n                return questionText && questionText.toString().trim().length > 0;\r\n            });\r\n\r\n            if (validRows.length <= 1) {\r\n                // Only header remains or empty\r\n                throw new Error(\"The Excel file appears to contain no valid questions. Please ensure Column B has question text.\");\r\n            }\r\n\r\n            // Slice(1) to skip header\r\n            const dataRows = validRows.slice(1);\r\n\r\n            const questionCount = dataRows.length;\r\n            const markPerQuestion = totalMarks > 0 ? (totalMarks / questionCount) : 1;\r\n\r\n            const parsedQuestions = dataRows.map((row) => ({\r\n                question_text: row[1]?.toString().trim() || 'Question',\r\n                option_a: row[2]?.toString().trim() || 'Option A',\r\n                option_b: row[3]?.toString().trim() || 'Option B',\r\n                option_c: row[4]?.toString().trim() || 'Option C',\r\n                option_d: row[5]?.toString().trim() || 'Option D',\r\n                correct_option: (row[6]?.toString().trim() || 'A').charAt(0).toUpperCase(),\r\n                marks: parseFloat(markPerQuestion.toFixed(2))\r\n            }));\r\n\r\n            console.log(\"Parsed questions:\", parsedQuestions);\r\n\r\n            // 1. Create Exam Record\r\n            const { data: examData, error: examError } = await supabase\r\n                .from('cbt_exams')\r\n                .insert([{\r\n                    title: file.name.replace('.xlsx', '').replace('.xls', ''),\r\n                    type: uploadType,\r\n                    class_id: parseInt(selectedClassId),\r\n                    subject_id: selectedSubjectId,\r\n                    duration_minutes: duration,\r\n                    total_marks: totalMarks,\r\n                    teacher_id: teacherId,\r\n                    is_published: false\r\n                }])\r\n                .select()\r\n                .single();\r\n\r\n            if (examError) throw examError;\r\n\r\n            // 2. Insert Questions\r\n            const questionsPayload = parsedQuestions.map(q => ({\r\n                cbt_exam_id: examData.id,\r\n                ...q\r\n            }));\r\n\r\n            const { error: qError } = await supabase\r\n                .from('cbt_questions')\r\n                .insert(questionsPayload);\r\n\r\n            if (qError) throw qError;\r\n\r\n            toast.success(\"Exam uploaded successfully!\");\r\n            loadInitialData();\r\n\r\n        } catch (err: any) {\r\n            console.error(\"Upload error:\", err);\r\n            setErrorMsg(err.message || \"Failed to process upload.\");\r\n            toast.error(err.message || \"Upload failed.\");\r\n        } finally {\r\n            setIsUploading(false);\r\n            if (fileInputRef.current) fileInputRef.current.value = '';\r\n        }\r\n    };\r\n\r\n    const togglePublish = async (exam: CBTExam) => {\r\n        const newStatus = !exam.isPublished;\r\n        // Optimistic update\r\n        setExams(prev => prev.map(e => e.id === exam.id ? { ...e, isPublished: newStatus } : e));\r\n\r\n        const { error } = await supabase\r\n            .from('cbt_exams')\r\n            .update({ is_published: newStatus })\r\n            .eq('id', exam.id);\r\n\r\n        if (error) {\r\n            toast.error(\"Failed to update status.\");\r\n            loadInitialData(); // Revert\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-slate-50\">\r\n            <main className=\"flex-grow p-4 md:p-6 space-y-6 overflow-y-auto w-full\">\r\n\r\n                {/* Header */}\r\n                <div className=\"flex flex-col md:flex-row md:items-center justify-between pb-4 border-b border-gray-200\">\r\n                    <div>\r\n                        <h1 className=\"text-xl md:text-2xl font-bold text-slate-800\">CBT & Examinations</h1>\r\n                        <p className=\"text-slate-500 mt-1 text-sm\">Create assessments from Excel (\"Question Bank\")</p>\r\n                    </div>\r\n                    {!isOnline && (\r\n                        <div className=\"flex items-center text-amber-600 bg-amber-50 px-3 py-1 rounded-full text-xs font-bold mt-2 md:mt-0 self-start md:self-auto\">\r\n                            <WifiIcon className=\"w-4 h-4 mr-1\" />\r\n                            Offline Mode\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Configuration Card */}\r\n                <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden\">\r\n                    <div className=\"px-6 py-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center\">\r\n                        <h3 className=\"font-semibold text-slate-800 flex items-center\">\r\n                            <ExamIcon className=\"w-5 h-5 mr-2 text-indigo-600\" />\r\n                            Upload Question Bank\r\n                        </h3>\r\n                        <div className=\"flex bg-white rounded-lg p-1 border border-slate-200\">\r\n                            <button onClick={() => setUploadType('Test')} className={`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${uploadType === 'Test' ? 'bg-indigo-600 text-white shadow-sm' : 'text-slate-600 hover:bg-slate-50'}`}>Test</button>\r\n                            <button onClick={() => setUploadType('Exam')} className={`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${uploadType === 'Exam' ? 'bg-indigo-600 text-white shadow-sm' : 'text-slate-600 hover:bg-slate-50'}`}>Exam</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"p-6 grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n                        {/* Configuration Inputs */}\r\n                        <div className=\"space-y-5\">\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5\">Class</label>\r\n                                    <select value={selectedClassId} onChange={(e) => setSelectedClassId(e.target.value)} className=\"w-full rounded-lg border-slate-300 py-2 text-sm\">\r\n                                        <option value=\"\">Select Class</option>\r\n                                        {teacherClasses.map(c => {\r\n                                            const name = getFormattedClassName ? getFormattedClassName(c.grade, c.section) : `Grade ${c.grade}${c.section}`;\r\n                                            return <option key={c.id} value={c.id}>{name}</option>\r\n                                        })}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5\">Subject</label>\r\n                                    <select value={selectedSubjectId} onChange={(e) => setSelectedSubjectId(e.target.value)} className=\"w-full rounded-lg border-slate-300 py-2 text-sm\">\r\n                                        <option value=\"\">Select Subject</option>\r\n                                        {subjects.map(s => <option key={s.id} value={s.id}>{s.name} ({s.code || s.category})</option>)}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5\">Duration (Mins)</label>\r\n                                    <input type=\"number\" value={duration} onChange={(e) => setDuration(parseInt(e.target.value))} className=\"w-full rounded-lg border-slate-300 py-2 text-sm\" />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5\">Total Marks</label>\r\n                                    <input type=\"number\" value={totalMarks} onChange={(e) => setTotalMarks(parseInt(e.target.value))} className=\"w-full rounded-lg border-slate-300 py-2 text-sm\" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Upload Area */}\r\n                        <div className=\"border-2 border-dashed border-slate-300 rounded-xl flex flex-col justify-center items-center p-6 cursor-pointer hover:bg-slate-50 hover:border-indigo-400 transition-all group\" onClick={() => fileInputRef.current?.click()}>\r\n                            <input type=\"file\" ref={fileInputRef} onChange={handleFileUpload} accept=\".xlsx, .xls\" className=\"hidden\" />\r\n                            {isUploading ? (\r\n                                <div className=\"text-center animate-pulse\">\r\n                                    <CloudUploadIcon className=\"h-10 w-10 text-indigo-500 mx-auto mb-2\" />\r\n                                    <p className=\"text-indigo-600 font-medium text-sm\">Processing...</p>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"text-center\">\r\n                                    <div className=\"bg-indigo-50 p-3 rounded-full inline-block mb-3 group-hover:bg-indigo-100 transition-colors\">\r\n                                        <CloudUploadIcon className=\"h-6 w-6 text-indigo-600\" />\r\n                                    </div>\r\n                                    <p className=\"font-semibold text-slate-700 text-sm\">Upload Excel File</p>\r\n                                    <p className=\"text-xs text-slate-400 mt-1\">Columns: No, Question, A, B, C, D, Answer</p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Error Banner */}\r\n                {errorMsg && (\r\n                    <div className=\"bg-red-50 text-red-700 p-4 rounded-lg flex items-center border border-red-200\">\r\n                        <XCircleIcon className=\"w-5 h-5 mr-2 flex-shrink-0\" />\r\n                        <span className=\"text-sm\">{errorMsg}</span>\r\n                    </div>\r\n                )}\r\n\r\n                {/* List of Exams */}\r\n                <div>\r\n                    <h2 className=\"text-lg font-bold text-slate-800 mb-4 px-1\">Managed Exams</h2>\r\n                    {loading ? (\r\n                        <div className=\"text-center py-12\">\r\n                            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-2\"></div>\r\n                            <p className=\"text-slate-500 text-sm\">Loading data...</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"grid grid-cols-1 gap-4\">\r\n                            {exams.map(exam => (\r\n                                <div key={exam.id} className=\"bg-white p-5 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow\">\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <div>\r\n                                            <h4 className=\"font-bold text-slate-800 text-lg\">{exam.title}</h4>\r\n                                            <p className=\"text-sm text-slate-600\">{exam.type} • {exam.duration} mins • {exam.totalMarks} Marks</p>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <span className={`px-2 py-1 rounded text-xs font-bold uppercase ${exam.isPublished ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700'}`}>\r\n                                                {exam.isPublished ? 'Live' : 'Draft'}\r\n                                            </span>\r\n                                            <button\r\n                                                onClick={() => togglePublish(exam)}\r\n                                                className=\"text-sm text-indigo-600 font-semibold hover:underline\"\r\n                                            >\r\n                                                {exam.isPublished ? 'Unpublish' : 'Publish'}\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            {exams.length === 0 && (\r\n                                <div className=\"text-center py-12 text-slate-400 bg-slate-50 rounded-lg\">No exams found. Upload one to start.</div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CBTManagementScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}