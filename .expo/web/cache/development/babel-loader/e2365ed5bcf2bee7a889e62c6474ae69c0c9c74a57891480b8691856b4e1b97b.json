{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\admin\\\\FinanceDashboard.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from '../../lib/supabase';\nimport { toast } from 'react-hot-toast';\nimport { DollarSign, TrendingUp, TrendingDown, PieChart, Download } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FinanceDashboard = () => {\n  const [viewMode, setViewMode] = useState('monthly');\n  const [selectedPeriod, setSelectedPeriod] = useState(new Date().toISOString().slice(0, 7));\n  const [financialData, setFinancialData] = useState(null);\n  const [paymentMethods, setPaymentMethods] = useState([]);\n  const [feeCollectionRate, setFeeCollectionRate] = useState({\n    collected: 0,\n    outstanding: 0,\n    rate: 0\n  });\n  const [loading, setLoading] = useState(true);\n  const [forecastData, setForecastData] = useState([]);\n  useEffect(() => {\n    fetchFinancialData();\n    fetchPaymentMethods();\n    fetchFeeCollection();\n    generateForecast();\n  }, [viewMode, selectedPeriod]);\n  const fetchFinancialData = async () => {\n    try {\n      setLoading(true);\n      const {\n        startDate,\n        endDate\n      } = calculatePeriodDates();\n      const {\n        data: summaryData\n      } = await supabase.from('financial_summaries').select('*').eq('period_type', viewMode).gte('period_start', startDate).lte('period_end', endDate).single();\n      if (summaryData) {\n        setFinancialData(summaryData);\n      } else {\n        const calculated = await calculateFinancialSummary(startDate, endDate);\n        setFinancialData(calculated);\n      }\n    } catch (error) {\n      console.error('Error fetching financial data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const calculatePeriodDates = () => {\n    const date = new Date(selectedPeriod + '-01');\n    let startDate;\n    let endDate;\n    if (viewMode === 'monthly') {\n      startDate = new Date(date.getFullYear(), date.getMonth(), 1).toISOString().split('T')[0];\n      endDate = new Date(date.getFullYear(), date.getMonth() + 1, 0).toISOString().split('T')[0];\n    } else if (viewMode === 'quarterly') {\n      const quarter = Math.floor(date.getMonth() / 3);\n      startDate = new Date(date.getFullYear(), quarter * 3, 1).toISOString().split('T')[0];\n      endDate = new Date(date.getFullYear(), quarter * 3 + 3, 0).toISOString().split('T')[0];\n    } else {\n      startDate = new Date(date.getFullYear(), 0, 1).toISOString().split('T')[0];\n      endDate = new Date(date.getFullYear(), 11, 31).toISOString().split('T')[0];\n    }\n    return {\n      startDate,\n      endDate\n    };\n  };\n  const calculateFinancialSummary = async (startDate, endDate) => {\n    const {\n      data: payments\n    } = await supabase.from('payments').select('amount, payment_method').gte('payment_date', startDate).lte('payment_date', endDate).eq('status', 'Completed');\n    const feeRevenue = payments?.reduce((sum, p) => sum + p.amount, 0) || 0;\n    const {\n      data: donations\n    } = await supabase.from('donations').select('amount').gte('donation_date', startDate).lte('donation_date', endDate).eq('status', 'Completed');\n    const donationRevenue = donations?.reduce((sum, d) => sum + d.amount, 0) || 0;\n    const {\n      data: salaries\n    } = await supabase.from('salary_payments').select('amount_paid').gte('payment_date', startDate).lte('payment_date', endDate);\n    const salaryExpenses = salaries?.reduce((sum, s) => sum + s.amount_paid, 0) || 0;\n    const totalRevenue = feeRevenue + donationRevenue;\n    const totalExpenses = salaryExpenses;\n    return {\n      period_type: viewMode,\n      period_start: startDate,\n      period_end: endDate,\n      fee_revenue: feeRevenue,\n      donation_revenue: donationRevenue,\n      grant_revenue: 0,\n      other_revenue: 0,\n      total_revenue: totalRevenue,\n      salary_expenses: salaryExpenses,\n      operational_expenses: 0,\n      maintenance_expenses: 0,\n      other_expenses: 0,\n      total_expenses: totalExpenses,\n      net_income: totalRevenue - totalExpenses\n    };\n  };\n  const fetchPaymentMethods = async () => {\n    try {\n      const {\n        startDate,\n        endDate\n      } = calculatePeriodDates();\n      const {\n        data: payments\n      } = await supabase.from('payments').select('payment_method, amount').gte('payment_date', startDate).lte('payment_date', endDate).eq('status', 'Completed');\n      if (payments) {\n        const methodMap = {};\n        let totalAmount = 0;\n        payments.forEach(p => {\n          const method = p.payment_method || 'Other';\n          if (!methodMap[method]) {\n            methodMap[method] = {\n              amount: 0,\n              count: 0\n            };\n          }\n          methodMap[method].amount += p.amount;\n          methodMap[method].count += 1;\n          totalAmount += p.amount;\n        });\n        const breakdown = Object.entries(methodMap).map(([method, data]) => ({\n          method,\n          amount: data.amount,\n          count: data.count,\n          percentage: totalAmount > 0 ? data.amount / totalAmount * 100 : 0\n        }));\n        setPaymentMethods(breakdown.sort((a, b) => b.amount - a.amount));\n      }\n    } catch (error) {\n      console.error('Error fetching payment methods:', error);\n    }\n  };\n  const fetchFeeCollection = async () => {\n    try {\n      const {\n        data: fees\n      } = await supabase.from('student_fees').select('total_fee, paid_amount');\n      if (fees) {\n        const totalFees = fees.reduce((sum, f) => sum + f.total_fee, 0);\n        const totalPaid = fees.reduce((sum, f) => sum + f.paid_amount, 0);\n        const outstanding = totalFees - totalPaid;\n        const rate = totalFees > 0 ? totalPaid / totalFees * 100 : 0;\n        setFeeCollectionRate({\n          collected: totalPaid,\n          outstanding,\n          rate: Math.round(rate * 10) / 10\n        });\n      }\n    } catch (error) {\n      console.error('Error fetching fee collection:', error);\n    }\n  };\n  const generateForecast = () => {\n    if (!financialData) return;\n    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    const currentMonth = new Date().getMonth();\n    const avgRevenue = financialData.total_revenue;\n    const forecast = months.slice(currentMonth + 1, currentMonth + 4).map((month, index) => ({\n      month,\n      projected: avgRevenue * (1 + index * 0.02)\n    }));\n    setForecastData(forecast);\n  };\n  const getMethodIcon = method => {\n    const icons = {\n      'Cash': 'ðŸ’µ',\n      'Bank Transfer': 'ðŸ¦',\n      'Paystack': 'ðŸ’³',\n      'Flutterwave': 'ðŸŒŠ',\n      'POS': 'ðŸ“±'\n    };\n    return icons[method] || 'ðŸ’°';\n  };\n  const exportReport = () => {\n    if (!financialData) return;\n    const reportData = {\n      period: `${financialData.period_start} to ${financialData.period_end}`,\n      revenue: {\n        fees: financialData.fee_revenue,\n        donations: financialData.donation_revenue,\n        grants: financialData.grant_revenue,\n        other: financialData.other_revenue,\n        total: financialData.total_revenue\n      },\n      expenses: {\n        salaries: financialData.salary_expenses,\n        operational: financialData.operational_expenses,\n        maintenance: financialData.maintenance_expenses,\n        other: financialData.other_expenses,\n        total: financialData.total_expenses\n      },\n      netIncome: financialData.net_income,\n      feeCollection: feeCollectionRate,\n      paymentMethods: paymentMethods\n    };\n    const blob = new Blob([JSON.stringify(reportData, null, 2)], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `financial-report-${financialData.period_start}-${financialData.period_end}.json`;\n    a.click();\n    toast.success('Financial report exported!');\n  };\n  if (loading || !financialData) {\n    return _jsxDEV(\"div\", {\n      className: \"flex justify-center items-center h-64\",\n      children: _jsxDEV(\"div\", {\n        className: \"w-10 h-10 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 71\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 16\n    }, this);\n  }\n  const profitMargin = financialData.total_revenue > 0 ? financialData.net_income / financialData.total_revenue * 100 : 0;\n  return _jsxDEV(\"div\", {\n    className: \"p-6 max-w-7xl mx-auto\",\n    children: [_jsxDEV(\"div\", {\n      className: \"bg-gradient-to-r from-green-600 to-teal-600 rounded-xl p-6 text-white mb-6\",\n      children: [_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold mb-2\",\n        children: \"\\uD83D\\uDCB0 Financial Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }, this), _jsxDEV(\"p\", {\n        className: \"text-green-100\",\n        children: \"Comprehensive financial analytics and forecasting\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-sm p-4 mb-6\",\n      children: _jsxDEV(\"div\", {\n        className: \"flex flex-wrap gap-4 items-center justify-between\",\n        children: [_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [_jsxDEV(\"div\", {\n            children: [_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-gray-700 mb-2\",\n              children: \"View Mode\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 29\n            }, this), _jsxDEV(\"div\", {\n              className: \"flex space-x-2\",\n              children: ['monthly', 'quarterly', 'annual'].map(mode => _jsxDEV(\"button\", {\n                onClick: () => setViewMode(mode),\n                className: `px-4 py-2 rounded-lg font-semibold ${viewMode === mode ? 'bg-green-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`,\n                children: mode.charAt(0).toUpperCase() + mode.slice(1)\n              }, mode, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            children: [_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-gray-700 mb-2\",\n              children: \"Period\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 29\n            }, this), _jsxDEV(\"input\", {\n              type: \"month\",\n              value: selectedPeriod,\n              onChange: e => setSelectedPeriod(e.target.value),\n              max: new Date().toISOString().slice(0, 7),\n              className: \"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 21\n        }, this), _jsxDEV(\"button\", {\n          onClick: exportReport,\n          className: \"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold flex items-center space-x-2\",\n          children: [_jsxDEV(Download, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 25\n          }, this), _jsxDEV(\"span\", {\n            children: \"Export Report\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",\n      children: [_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm p-6\",\n        children: _jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [_jsxDEV(\"div\", {\n            children: [_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Total Revenue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 29\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-2xl font-bold text-gray-900\",\n              children: [\"\\u20A6\", financialData.total_revenue.toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: \"p-3 bg-green-100 rounded-lg\",\n            children: _jsxDEV(TrendingUp, {\n              className: \"h-6 w-6 text-green-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm p-6\",\n        children: _jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [_jsxDEV(\"div\", {\n            children: [_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Total Expenses\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 29\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-2xl font-bold text-gray-900\",\n              children: [\"\\u20A6\", financialData.total_expenses.toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: \"p-3 bg-red-100 rounded-lg\",\n            children: _jsxDEV(TrendingDown, {\n              className: \"h-6 w-6 text-red-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm p-6\",\n        children: _jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [_jsxDEV(\"div\", {\n            children: [_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Net Income\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 29\n            }, this), _jsxDEV(\"p\", {\n              className: `text-2xl font-bold ${financialData.net_income >= 0 ? 'text-green-600' : 'text-red-600'}`,\n              children: [\"\\u20A6\", financialData.net_income.toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: `p-3 rounded-lg ${financialData.net_income >= 0 ? 'bg-green-100' : 'bg-red-100'}`,\n            children: _jsxDEV(DollarSign, {\n              className: `h-6 w-6 ${financialData.net_income >= 0 ? 'text-green-600' : 'text-red-600'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm p-6\",\n        children: _jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [_jsxDEV(\"div\", {\n            children: [_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Profit Margin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 29\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-2xl font-bold text-gray-900\",\n              children: [profitMargin.toFixed(1), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: \"p-3 bg-blue-100 rounded-lg\",\n            children: _jsxDEV(PieChart, {\n              className: \"h-6 w-6 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\",\n      children: [_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm p-6\",\n        children: [_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold text-gray-900 mb-4\",\n          children: \"Revenue Breakdown\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: [{\n            label: 'Fee Revenue',\n            amount: financialData.fee_revenue,\n            color: 'bg-green-500'\n          }, {\n            label: 'Donations',\n            amount: financialData.donation_revenue,\n            color: 'bg-blue-500'\n          }, {\n            label: 'Grants',\n            amount: financialData.grant_revenue,\n            color: 'bg-purple-500'\n          }, {\n            label: 'Other',\n            amount: financialData.other_revenue,\n            color: 'bg-yellow-500'\n          }].map(item => {\n            const percentage = financialData.total_revenue > 0 ? item.amount / financialData.total_revenue * 100 : 0;\n            return _jsxDEV(\"div\", {\n              children: [_jsxDEV(\"div\", {\n                className: \"flex justify-between text-sm mb-1\",\n                children: [_jsxDEV(\"span\", {\n                  className: \"text-gray-700\",\n                  children: item.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 41\n                }, this), _jsxDEV(\"span\", {\n                  className: \"font-semibold text-gray-900\",\n                  children: [\"\\u20A6\", item.amount.toLocaleString(), \" (\", percentage.toFixed(1), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 37\n              }, this), _jsxDEV(\"div\", {\n                className: \"w-full bg-gray-200 rounded-full h-3\",\n                children: _jsxDEV(\"div\", {\n                  className: `${item.color} h-3 rounded-full`,\n                  style: {\n                    width: `${percentage}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 37\n              }, this)]\n            }, item.label, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 33\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm p-6\",\n        children: [_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold text-gray-900 mb-4\",\n          children: \"Expense Breakdown\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: [{\n            label: 'Salaries',\n            amount: financialData.salary_expenses,\n            color: 'bg-red-500'\n          }, {\n            label: 'Operational',\n            amount: financialData.operational_expenses,\n            color: 'bg-orange-500'\n          }, {\n            label: 'Maintenance',\n            amount: financialData.maintenance_expenses,\n            color: 'bg-amber-500'\n          }, {\n            label: 'Other',\n            amount: financialData.other_expenses,\n            color: 'bg-gray-500'\n          }].map(item => {\n            const percentage = financialData.total_expenses > 0 ? item.amount / financialData.total_expenses * 100 : 0;\n            return _jsxDEV(\"div\", {\n              children: [_jsxDEV(\"div\", {\n                className: \"flex justify-between text-sm mb-1\",\n                children: [_jsxDEV(\"span\", {\n                  className: \"text-gray-700\",\n                  children: item.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 41\n                }, this), _jsxDEV(\"span\", {\n                  className: \"font-semibold text-gray-900\",\n                  children: [\"\\u20A6\", item.amount.toLocaleString(), \" (\", percentage.toFixed(1), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 428,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 37\n              }, this), _jsxDEV(\"div\", {\n                className: \"w-full bg-gray-200 rounded-full h-3\",\n                children: _jsxDEV(\"div\", {\n                  className: `${item.color} h-3 rounded-full`,\n                  style: {\n                    width: `${percentage}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 431,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 37\n              }, this)]\n            }, item.label, true, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 33\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\",\n      children: [_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm p-6\",\n        children: [_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold text-gray-900 mb-4\",\n          children: \"Fee Collection Rate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [_jsxDEV(\"div\", {\n            className: \"flex justify-between text-sm mb-2\",\n            children: [_jsxDEV(\"span\", {\n              className: \"text-gray-700\",\n              children: \"Collection Rate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 29\n            }, this), _jsxDEV(\"span\", {\n              className: \"font-bold text-green-600\",\n              children: [feeCollectionRate.rate, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: \"w-full bg-gray-200 rounded-full h-4\",\n            children: _jsxDEV(\"div\", {\n              className: \"bg-green-500 h-4 rounded-full\",\n              style: {\n                width: `${feeCollectionRate.rate}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 gap-4 mt-6\",\n          children: [_jsxDEV(\"div\", {\n            className: \"bg-green-50 rounded-lg p-4\",\n            children: [_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Collected\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 29\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-xl font-bold text-green-600\",\n              children: [\"\\u20A6\", feeCollectionRate.collected.toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: \"bg-red-50 rounded-lg p-4\",\n            children: [_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Outstanding\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 29\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-xl font-bold text-red-600\",\n              children: [\"\\u20A6\", feeCollectionRate.outstanding.toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm p-6\",\n        children: [_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold text-gray-900 mb-4\",\n          children: \"Payment Methods\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 21\n        }, this), paymentMethods.length > 0 ? _jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: paymentMethods.map(method => _jsxDEV(\"div\", {\n            className: \"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",\n            children: [_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [_jsxDEV(\"span\", {\n                className: \"text-2xl\",\n                children: getMethodIcon(method.method)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 41\n              }, this), _jsxDEV(\"div\", {\n                children: [_jsxDEV(\"p\", {\n                  className: \"font-semibold text-gray-900\",\n                  children: method.method\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 474,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-600\",\n                  children: [method.count, \" transactions\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 37\n            }, this), _jsxDEV(\"div\", {\n              className: \"text-right\",\n              children: [_jsxDEV(\"p\", {\n                className: \"font-bold text-gray-900\",\n                children: [\"\\u20A6\", method.amount.toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 41\n              }, this), _jsxDEV(\"p\", {\n                className: \"text-xs text-gray-600\",\n                children: [method.percentage.toFixed(1), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 37\n            }, this)]\n          }, method.method, true, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 25\n        }, this) : _jsxDEV(\"p\", {\n          className: \"text-center text-gray-500 py-8\",\n          children: \"No payment data available\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 13\n    }, this), forecastData.length > 0 && _jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-sm p-6\",\n      children: [_jsxDEV(\"h3\", {\n        className: \"text-lg font-bold text-gray-900 mb-4\",\n        children: \"\\uD83D\\uDCC8 Revenue Forecast (Next 3 Months)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 21\n      }, this), _jsxDEV(\"div\", {\n        className: \"grid grid-cols-3 gap-4\",\n        children: forecastData.map(item => _jsxDEV(\"div\", {\n          className: \"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-lg p-4\",\n          children: [_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: item.month\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 33\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-xl font-bold text-indigo-600\",\n            children: [\"\\u20A6\", Math.round(item.projected).toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 33\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-xs text-gray-500 mt-1\",\n            children: \"Projected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 33\n          }, this)]\n        }, item.month, true, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 279,\n    columnNumber: 9\n  }, this);\n};\nexport default FinanceDashboard;","map":{"version":3,"names":["React","useState","useEffect","supabase","toast","DollarSign","TrendingUp","TrendingDown","PieChart","Download","jsxDEV","_jsxDEV","FinanceDashboard","viewMode","setViewMode","selectedPeriod","setSelectedPeriod","Date","toISOString","slice","financialData","setFinancialData","paymentMethods","setPaymentMethods","feeCollectionRate","setFeeCollectionRate","collected","outstanding","rate","loading","setLoading","forecastData","setForecastData","fetchFinancialData","fetchPaymentMethods","fetchFeeCollection","generateForecast","startDate","endDate","calculatePeriodDates","data","summaryData","from","select","eq","gte","lte","single","calculated","calculateFinancialSummary","error","console","date","getFullYear","getMonth","split","quarter","Math","floor","payments","feeRevenue","reduce","sum","p","amount","donations","donationRevenue","d","salaries","salaryExpenses","s","amount_paid","totalRevenue","totalExpenses","period_type","period_start","period_end","fee_revenue","donation_revenue","grant_revenue","other_revenue","total_revenue","salary_expenses","operational_expenses","maintenance_expenses","other_expenses","total_expenses","net_income","methodMap","totalAmount","forEach","method","payment_method","count","breakdown","Object","entries","map","percentage","sort","a","b","fees","totalFees","f","total_fee","totalPaid","paid_amount","round","months","currentMonth","avgRevenue","forecast","month","index","projected","getMethodIcon","icons","exportReport","reportData","period","revenue","grants","other","total","expenses","operational","maintenance","netIncome","feeCollection","blob","Blob","JSON","stringify","type","url","URL","createObjectURL","document","createElement","href","download","click","success","className","children","fileName","_jsxFileName","lineNumber","columnNumber","profitMargin","mode","onClick","charAt","toUpperCase","value","onChange","e","target","max","toLocaleString","toFixed","label","color","item","style","width","length"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/admin/FinanceDashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { toast } from 'react-hot-toast';\r\nimport { DollarSign, TrendingUp, TrendingDown, PieChart, Calendar, Download, CreditCard } from 'lucide-react';\r\n\r\ninterface FinancialSummary {\r\n    period_type: string;\r\n    period_start: string;\r\n    period_end: string;\r\n    fee_revenue: number;\r\n    donation_revenue: number;\r\n    grant_revenue: number;\r\n    other_revenue: number;\r\n    total_revenue: number;\r\n    salary_expenses: number;\r\n    operational_expenses: number;\r\n    maintenance_expenses: number;\r\n    other_expenses: number;\r\n    total_expenses: number;\r\n    net_income: number;\r\n}\r\n\r\ninterface PaymentMethodBreakdown {\r\n    method: string;\r\n    amount: number;\r\n    count: number;\r\n    percentage: number;\r\n}\r\n\r\nconst FinanceDashboard: React.FC = () => {\r\n    const [viewMode, setViewMode] = useState<'monthly' | 'quarterly' | 'annual'>('monthly');\r\n    const [selectedPeriod, setSelectedPeriod] = useState(new Date().toISOString().slice(0, 7)); // YYYY-MM\r\n    const [financialData, setFinancialData] = useState<FinancialSummary | null>(null);\r\n    const [paymentMethods, setPaymentMethods] = useState<PaymentMethodBreakdown[]>([]);\r\n    const [feeCollectionRate, setFeeCollectionRate] = useState({ collected: 0, outstanding: 0, rate: 0 });\r\n    const [loading, setLoading] = useState(true);\r\n    const [forecastData, setForecastData] = useState<{ month: string; projected: number }[]>([]);\r\n\r\n    useEffect(() => {\r\n        fetchFinancialData();\r\n        fetchPaymentMethods();\r\n        fetchFeeCollection();\r\n        generateForecast();\r\n    }, [viewMode, selectedPeriod]);\r\n\r\n    const fetchFinancialData = async () => {\r\n        try {\r\n            setLoading(true);\r\n\r\n            // Calculate period dates based on view mode\r\n            const { startDate, endDate } = calculatePeriodDates();\r\n\r\n            // Fetch or calculate financial summary\r\n            const { data: summaryData } = await supabase\r\n                .from('financial_summaries')\r\n                .select('*')\r\n                .eq('period_type', viewMode)\r\n                .gte('period_start', startDate)\r\n                .lte('period_end', endDate)\r\n                .single();\r\n\r\n            if (summaryData) {\r\n                setFinancialData(summaryData);\r\n            } else {\r\n                // Calculate from raw data if summary doesn't exist\r\n                const calculated = await calculateFinancialSummary(startDate, endDate);\r\n                setFinancialData(calculated);\r\n            }\r\n\r\n        } catch (error: any) {\r\n            console.error('Error fetching financial data:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const calculatePeriodDates = () => {\r\n        const date = new Date(selectedPeriod + '-01');\r\n        let startDate: string;\r\n        let endDate: string;\r\n\r\n        if (viewMode === 'monthly') {\r\n            startDate = new Date(date.getFullYear(), date.getMonth(), 1).toISOString().split('T')[0];\r\n            endDate = new Date(date.getFullYear(), date.getMonth() + 1, 0).toISOString().split('T')[0];\r\n        } else if (viewMode === 'quarterly') {\r\n            const quarter = Math.floor(date.getMonth() / 3);\r\n            startDate = new Date(date.getFullYear(), quarter * 3, 1).toISOString().split('T')[0];\r\n            endDate = new Date(date.getFullYear(), quarter * 3 + 3, 0).toISOString().split('T')[0];\r\n        } else {\r\n            startDate = new Date(date.getFullYear(), 0, 1).toISOString().split('T')[0];\r\n            endDate = new Date(date.getFullYear(), 11, 31).toISOString().split('T')[0];\r\n        }\r\n\r\n        return { startDate, endDate };\r\n    };\r\n\r\n    const calculateFinancialSummary = async (startDate: string, endDate: string): Promise<FinancialSummary> => {\r\n        // Fetch payments (fees)\r\n        const { data: payments } = await supabase\r\n            .from('payments')\r\n            .select('amount, payment_method')\r\n            .gte('payment_date', startDate)\r\n            .lte('payment_date', endDate)\r\n            .eq('status', 'Completed');\r\n\r\n        const feeRevenue = payments?.reduce((sum, p) => sum + p.amount, 0) || 0;\r\n\r\n        // Fetch donations\r\n        const { data: donations } = await supabase\r\n            .from('donations')\r\n            .select('amount')\r\n            .gte('donation_date', startDate)\r\n            .lte('donation_date', endDate)\r\n            .eq('status', 'Completed');\r\n\r\n        const donationRevenue = donations?.reduce((sum, d) => sum + d.amount, 0) || 0;\r\n\r\n        // Fetch salary payments\r\n        const { data: salaries } = await supabase\r\n            .from('salary_payments')\r\n            .select('amount_paid')\r\n            .gte('payment_date', startDate)\r\n            .lte('payment_date', endDate);\r\n\r\n        const salaryExpenses = salaries?.reduce((sum, s) => sum + s.amount_paid, 0) || 0;\r\n\r\n        const totalRevenue = feeRevenue + donationRevenue;\r\n        const totalExpenses = salaryExpenses;\r\n\r\n        return {\r\n            period_type: viewMode,\r\n            period_start: startDate,\r\n            period_end: endDate,\r\n            fee_revenue: feeRevenue,\r\n            donation_revenue: donationRevenue,\r\n            grant_revenue: 0,\r\n            other_revenue: 0,\r\n            total_revenue: totalRevenue,\r\n            salary_expenses: salaryExpenses,\r\n            operational_expenses: 0,\r\n            maintenance_expenses: 0,\r\n            other_expenses: 0,\r\n            total_expenses: totalExpenses,\r\n            net_income: totalRevenue - totalExpenses\r\n        };\r\n    };\r\n\r\n    const fetchPaymentMethods = async () => {\r\n        try {\r\n            const { startDate, endDate } = calculatePeriodDates();\r\n\r\n            const { data: payments } = await supabase\r\n                .from('payments')\r\n                .select('payment_method, amount')\r\n                .gte('payment_date', startDate)\r\n                .lte('payment_date', endDate)\r\n                .eq('status', 'Completed');\r\n\r\n            if (payments) {\r\n                const methodMap: { [key: string]: { amount: number; count: number } } = {};\r\n                let totalAmount = 0;\r\n\r\n                payments.forEach(p => {\r\n                    const method = p.payment_method || 'Other';\r\n                    if (!methodMap[method]) {\r\n                        methodMap[method] = { amount: 0, count: 0 };\r\n                    }\r\n                    methodMap[method].amount += p.amount;\r\n                    methodMap[method].count += 1;\r\n                    totalAmount += p.amount;\r\n                });\r\n\r\n                const breakdown: PaymentMethodBreakdown[] = Object.entries(methodMap).map(([method, data]) => ({\r\n                    method,\r\n                    amount: data.amount,\r\n                    count: data.count,\r\n                    percentage: totalAmount > 0 ? (data.amount / totalAmount) * 100 : 0\r\n                }));\r\n\r\n                setPaymentMethods(breakdown.sort((a, b) => b.amount - a.amount));\r\n            }\r\n        } catch (error: any) {\r\n            console.error('Error fetching payment methods:', error);\r\n        }\r\n    };\r\n\r\n    const fetchFeeCollection = async () => {\r\n        try {\r\n            const { data: fees } = await supabase\r\n                .from('student_fees')\r\n                .select('total_fee, paid_amount');\r\n\r\n            if (fees) {\r\n                const totalFees = fees.reduce((sum, f) => sum + f.total_fee, 0);\r\n                const totalPaid = fees.reduce((sum, f) => sum + f.paid_amount, 0);\r\n                const outstanding = totalFees - totalPaid;\r\n                const rate = totalFees > 0 ? (totalPaid / totalFees) * 100 : 0;\r\n\r\n                setFeeCollectionRate({\r\n                    collected: totalPaid,\r\n                    outstanding,\r\n                    rate: Math.round(rate * 10) / 10\r\n                });\r\n            }\r\n        } catch (error: any) {\r\n            console.error('Error fetching fee collection:', error);\r\n        }\r\n    };\r\n\r\n    const generateForecast = () => {\r\n        // Simple forecast based on historical average\r\n        if (!financialData) return;\r\n\r\n        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n        const currentMonth = new Date().getMonth();\r\n        const avgRevenue = financialData.total_revenue;\r\n\r\n        const forecast = months.slice(currentMonth + 1, currentMonth + 4).map((month, index) => ({\r\n            month,\r\n            projected: avgRevenue * (1 + (index * 0.02)) // 2% growth assumption\r\n        }));\r\n\r\n        setForecastData(forecast);\r\n    };\r\n\r\n    const getMethodIcon = (method: string) => {\r\n        const icons: { [key: string]: string } = {\r\n            'Cash': 'ðŸ’µ',\r\n            'Bank Transfer': 'ðŸ¦',\r\n            'Paystack': 'ðŸ’³',\r\n            'Flutterwave': 'ðŸŒŠ',\r\n            'POS': 'ðŸ“±'\r\n        };\r\n        return icons[method] || 'ðŸ’°';\r\n    };\r\n\r\n    const exportReport = () => {\r\n        if (!financialData) return;\r\n\r\n        const reportData = {\r\n            period: `${financialData.period_start} to ${financialData.period_end}`,\r\n            revenue: {\r\n                fees: financialData.fee_revenue,\r\n                donations: financialData.donation_revenue,\r\n                grants: financialData.grant_revenue,\r\n                other: financialData.other_revenue,\r\n                total: financialData.total_revenue\r\n            },\r\n            expenses: {\r\n                salaries: financialData.salary_expenses,\r\n                operational: financialData.operational_expenses,\r\n                maintenance: financialData.maintenance_expenses,\r\n                other: financialData.other_expenses,\r\n                total: financialData.total_expenses\r\n            },\r\n            netIncome: financialData.net_income,\r\n            feeCollection: feeCollectionRate,\r\n            paymentMethods: paymentMethods\r\n        };\r\n\r\n        const blob = new Blob([JSON.stringify(reportData, null, 2)], { type: 'application/json' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `financial-report-${financialData.period_start}-${financialData.period_end}.json`;\r\n        a.click();\r\n        toast.success('Financial report exported!');\r\n    };\r\n\r\n    if (loading || !financialData) {\r\n        return <div className=\"flex justify-center items-center h-64\"><div className=\"w-10 h-10 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin\"></div></div>;\r\n    }\r\n\r\n    const profitMargin = financialData.total_revenue > 0\r\n        ? ((financialData.net_income / financialData.total_revenue) * 100)\r\n        : 0;\r\n\r\n    return (\r\n        <div className=\"p-6 max-w-7xl mx-auto\">\r\n            {/* Header */}\r\n            <div className=\"bg-gradient-to-r from-green-600 to-teal-600 rounded-xl p-6 text-white mb-6\">\r\n                <h1 className=\"text-3xl font-bold mb-2\">ðŸ’° Financial Dashboard</h1>\r\n                <p className=\"text-green-100\">Comprehensive financial analytics and forecasting</p>\r\n            </div>\r\n\r\n            {/* Controls */}\r\n            <div className=\"bg-white rounded-xl shadow-sm p-4 mb-6\">\r\n                <div className=\"flex flex-wrap gap-4 items-center justify-between\">\r\n                    <div className=\"flex items-center space-x-4\">\r\n                        <div>\r\n                            <label className=\"block text-sm font-semibold text-gray-700 mb-2\">View Mode</label>\r\n                            <div className=\"flex space-x-2\">\r\n                                {(['monthly', 'quarterly', 'annual'] as const).map(mode => (\r\n                                    <button\r\n                                        key={mode}\r\n                                        onClick={() => setViewMode(mode)}\r\n                                        className={`px-4 py-2 rounded-lg font-semibold ${viewMode === mode\r\n                                                ? 'bg-green-600 text-white'\r\n                                                : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                                            }`}\r\n                                    >\r\n                                        {mode.charAt(0).toUpperCase() + mode.slice(1)}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Period</label>\r\n                            <input\r\n                                type=\"month\"\r\n                                value={selectedPeriod}\r\n                                onChange={(e) => setSelectedPeriod(e.target.value)}\r\n                                max={new Date().toISOString().slice(0, 7)}\r\n                                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={exportReport}\r\n                        className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold flex items-center space-x-2\"\r\n                    >\r\n                        <Download className=\"h-5 w-5\" />\r\n                        <span>Export Report</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Key Metrics */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n                <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-sm text-gray-600\">Total Revenue</p>\r\n                            <p className=\"text-2xl font-bold text-gray-900\">â‚¦{financialData.total_revenue.toLocaleString()}</p>\r\n                        </div>\r\n                        <div className=\"p-3 bg-green-100 rounded-lg\">\r\n                            <TrendingUp className=\"h-6 w-6 text-green-600\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-sm text-gray-600\">Total Expenses</p>\r\n                            <p className=\"text-2xl font-bold text-gray-900\">â‚¦{financialData.total_expenses.toLocaleString()}</p>\r\n                        </div>\r\n                        <div className=\"p-3 bg-red-100 rounded-lg\">\r\n                            <TrendingDown className=\"h-6 w-6 text-red-600\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-sm text-gray-600\">Net Income</p>\r\n                            <p className={`text-2xl font-bold ${financialData.net_income >= 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n                                â‚¦{financialData.net_income.toLocaleString()}\r\n                            </p>\r\n                        </div>\r\n                        <div className={`p-3 rounded-lg ${financialData.net_income >= 0 ? 'bg-green-100' : 'bg-red-100'}`}>\r\n                            <DollarSign className={`h-6 w-6 ${financialData.net_income >= 0 ? 'text-green-600' : 'text-red-600'}`} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-sm text-gray-600\">Profit Margin</p>\r\n                            <p className=\"text-2xl font-bold text-gray-900\">{profitMargin.toFixed(1)}%</p>\r\n                        </div>\r\n                        <div className=\"p-3 bg-blue-100 rounded-lg\">\r\n                            <PieChart className=\"h-6 w-6 text-blue-600\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Revenue vs Expenses Chart */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\r\n                <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Revenue Breakdown</h3>\r\n                    <div className=\"space-y-3\">\r\n                        {[\r\n                            { label: 'Fee Revenue', amount: financialData.fee_revenue, color: 'bg-green-500' },\r\n                            { label: 'Donations', amount: financialData.donation_revenue, color: 'bg-blue-500' },\r\n                            { label: 'Grants', amount: financialData.grant_revenue, color: 'bg-purple-500' },\r\n                            { label: 'Other', amount: financialData.other_revenue, color: 'bg-yellow-500' }\r\n                        ].map(item => {\r\n                            const percentage = financialData.total_revenue > 0\r\n                                ? (item.amount / financialData.total_revenue) * 100\r\n                                : 0;\r\n                            return (\r\n                                <div key={item.label}>\r\n                                    <div className=\"flex justify-between text-sm mb-1\">\r\n                                        <span className=\"text-gray-700\">{item.label}</span>\r\n                                        <span className=\"font-semibold text-gray-900\">â‚¦{item.amount.toLocaleString()} ({percentage.toFixed(1)}%)</span>\r\n                                    </div>\r\n                                    <div className=\"w-full bg-gray-200 rounded-full h-3\">\r\n                                        <div className={`${item.color} h-3 rounded-full`} style={{ width: `${percentage}%` }}></div>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Expense Breakdown</h3>\r\n                    <div className=\"space-y-3\">\r\n                        {[\r\n                            { label: 'Salaries', amount: financialData.salary_expenses, color: 'bg-red-500' },\r\n                            { label: 'Operational', amount: financialData.operational_expenses, color: 'bg-orange-500' },\r\n                            { label: 'Maintenance', amount: financialData.maintenance_expenses, color: 'bg-amber-500' },\r\n                            { label: 'Other', amount: financialData.other_expenses, color: 'bg-gray-500' }\r\n                        ].map(item => {\r\n                            const percentage = financialData.total_expenses > 0\r\n                                ? (item.amount / financialData.total_expenses) * 100\r\n                                : 0;\r\n                            return (\r\n                                <div key={item.label}>\r\n                                    <div className=\"flex justify-between text-sm mb-1\">\r\n                                        <span className=\"text-gray-700\">{item.label}</span>\r\n                                        <span className=\"font-semibold text-gray-900\">â‚¦{item.amount.toLocaleString()} ({percentage.toFixed(1)}%)</span>\r\n                                    </div>\r\n                                    <div className=\"w-full bg-gray-200 rounded-full h-3\">\r\n                                        <div className={`${item.color} h-3 rounded-full`} style={{ width: `${percentage}%` }}></div>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Fee Collection & Payment Methods */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\r\n                <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Fee Collection Rate</h3>\r\n                    <div className=\"mb-4\">\r\n                        <div className=\"flex justify-between text-sm mb-2\">\r\n                            <span className=\"text-gray-700\">Collection Rate</span>\r\n                            <span className=\"font-bold text-green-600\">{feeCollectionRate.rate}%</span>\r\n                        </div>\r\n                        <div className=\"w-full bg-gray-200 rounded-full h-4\">\r\n                            <div className=\"bg-green-500 h-4 rounded-full\" style={{ width: `${feeCollectionRate.rate}%` }}></div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-2 gap-4 mt-6\">\r\n                        <div className=\"bg-green-50 rounded-lg p-4\">\r\n                            <p className=\"text-sm text-gray-600\">Collected</p>\r\n                            <p className=\"text-xl font-bold text-green-600\">â‚¦{feeCollectionRate.collected.toLocaleString()}</p>\r\n                        </div>\r\n                        <div className=\"bg-red-50 rounded-lg p-4\">\r\n                            <p className=\"text-sm text-gray-600\">Outstanding</p>\r\n                            <p className=\"text-xl font-bold text-red-600\">â‚¦{feeCollectionRate.outstanding.toLocaleString()}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Payment Methods</h3>\r\n                    {paymentMethods.length > 0 ? (\r\n                        <div className=\"space-y-3\">\r\n                            {paymentMethods.map(method => (\r\n                                <div key={method.method} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                                    <div className=\"flex items-center space-x-3\">\r\n                                        <span className=\"text-2xl\">{getMethodIcon(method.method)}</span>\r\n                                        <div>\r\n                                            <p className=\"font-semibold text-gray-900\">{method.method}</p>\r\n                                            <p className=\"text-xs text-gray-600\">{method.count} transactions</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                        <p className=\"font-bold text-gray-900\">â‚¦{method.amount.toLocaleString()}</p>\r\n                                        <p className=\"text-xs text-gray-600\">{method.percentage.toFixed(1)}%</p>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <p className=\"text-center text-gray-500 py-8\">No payment data available</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Forecast */}\r\n            {forecastData.length > 0 && (\r\n                <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-4\">ðŸ“ˆ Revenue Forecast (Next 3 Months)</h3>\r\n                    <div className=\"grid grid-cols-3 gap-4\">\r\n                        {forecastData.map(item => (\r\n                            <div key={item.month} className=\"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-lg p-4\">\r\n                                <p className=\"text-sm text-gray-600\">{item.month}</p>\r\n                                <p className=\"text-xl font-bold text-indigo-600\">â‚¦{Math.round(item.projected).toLocaleString()}</p>\r\n                                <p className=\"text-xs text-gray-500 mt-1\">Projected</p>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FinanceDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}