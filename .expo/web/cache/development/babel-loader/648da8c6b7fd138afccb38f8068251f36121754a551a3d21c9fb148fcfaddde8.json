{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\parent\\\\ParentNewChatScreen.tsx\";\nimport React, { useState, useMemo } from 'react';\nimport { mockTeachers, mockConversations } from '../../data';\nimport { SearchIcon } from '../../constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserRow = ({\n  user,\n  onSelect\n}) => _jsxDEV(\"button\", {\n  onClick: onSelect,\n  className: \"w-full flex items-center p-3 space-x-4 text-left bg-white rounded-lg hover:bg-gray-50 transition-colors\",\n  children: [_jsxDEV(\"img\", {\n    src: user.avatarUrl,\n    alt: user.name,\n    className: \"w-12 h-12 rounded-full object-cover\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 9\n  }, this), _jsxDEV(\"div\", {\n    className: \"flex-grow\",\n    children: [_jsxDEV(\"p\", {\n      className: \"font-bold text-gray-800\",\n      children: user.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 13\n    }, this), _jsxDEV(\"p\", {\n      className: \"text-sm text-gray-500\",\n      children: user.subtitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 20,\n  columnNumber: 5\n}, this);\nconst ParentNewChatScreen = ({\n  navigateTo,\n  children = []\n}) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const teachers = useMemo(() => {\n    const childrenClasses = children.map(c => `${c.grade}${c.section}`);\n    const relevantTeachers = mockTeachers.filter(t => t.status === 'Active' && t.classes.some(tc => childrenClasses.includes(tc)));\n    return relevantTeachers.map(t => ({\n      id: t.id,\n      name: t.name,\n      avatarUrl: t.avatarUrl,\n      subtitle: `${t.subjects[0]} Teacher`,\n      userType: 'Teacher'\n    }));\n  }, [children]);\n  const filteredUsers = useMemo(() => {\n    return teachers.filter(user => user.name.toLowerCase().includes(searchTerm.toLowerCase()));\n  }, [searchTerm, teachers]);\n  const handleSelectUser = user => {\n    const role = 'Teacher';\n    let conversation = mockConversations.find(c => !c.isGroup && c.participants.some(p => p.userId === user.id));\n    if (!conversation) {\n      const newConversation = {\n        id: Date.now(),\n        type: 'direct',\n        isGroup: false,\n        creatorId: 1002,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        lastMessageAt: new Date().toISOString(),\n        participants: [{\n          roomId: 0,\n          userId: user.id,\n          role: 'member',\n          joinedAt: new Date().toISOString(),\n          user: {\n            id: user.id,\n            name: user.name,\n            avatarUrl: user.avatarUrl,\n            role: role\n          }\n        }, {\n          roomId: 0,\n          userId: 1002,\n          role: 'admin',\n          joinedAt: new Date().toISOString(),\n          user: {\n            id: 1002,\n            name: 'You',\n            avatarUrl: '',\n            role: 'Parent'\n          }\n        }],\n        messages: []\n      };\n      mockConversations.push(newConversation);\n      conversation = newConversation;\n    }\n    navigateTo('chat', user.name, {\n      conversation\n    });\n  };\n  return _jsxDEV(\"div\", {\n    className: \"flex flex-col h-full bg-gray-100\",\n    children: [_jsxDEV(\"div\", {\n      className: \"p-4 bg-gray-100/80 backdrop-blur-sm sticky top-0 z-10 border-b border-gray-200\",\n      children: _jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [_jsxDEV(\"span\", {\n          className: \"absolute inset-y-0 left-0 flex items-center pl-3\",\n          children: _jsxDEV(SearchIcon, {\n            className: \"text-gray-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this), _jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search for a teacher...\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value),\n          className: \"w-full pl-10 pr-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), _jsxDEV(\"main\", {\n      className: \"flex-grow p-4 space-y-2 overflow-y-auto\",\n      children: filteredUsers.length > 0 ? filteredUsers.map(user => _jsxDEV(UserRow, {\n        user: user,\n        onSelect: () => handleSelectUser(user)\n      }, user.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 25\n      }, this)) : _jsxDEV(\"p\", {\n        className: \"text-center text-gray-500 pt-8\",\n        children: \"No teachers found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 9\n  }, this);\n};\nexport default ParentNewChatScreen;","map":{"version":3,"names":["React","useState","useMemo","mockTeachers","mockConversations","SearchIcon","jsxDEV","_jsxDEV","UserRow","user","onSelect","onClick","className","children","src","avatarUrl","alt","name","fileName","_jsxFileName","lineNumber","columnNumber","subtitle","ParentNewChatScreen","navigateTo","searchTerm","setSearchTerm","teachers","childrenClasses","map","c","grade","section","relevantTeachers","filter","t","status","classes","some","tc","includes","id","subjects","userType","filteredUsers","toLowerCase","handleSelectUser","role","conversation","find","isGroup","participants","p","userId","newConversation","Date","now","type","creatorId","createdAt","toISOString","updatedAt","lastMessageAt","roomId","joinedAt","messages","push","placeholder","value","onChange","e","target","length"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/parent/ParentNewChatScreen.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport { Student, Teacher, Conversation, RoleName, ChatRoom, ChatParticipant } from '../../types';\r\nimport { mockTeachers, mockConversations } from '../../data';\r\nimport { SearchIcon } from '../../constants';\r\n\r\ntype UserListItem = {\r\n    id: number;\r\n    name: string;\r\n    avatarUrl: string;\r\n    subtitle: string;\r\n    userType: 'Teacher';\r\n};\r\n\r\ninterface ParentNewChatScreenProps {\r\n    navigateTo: (view: string, title: string, props: any) => void;\r\n    children?: Student[];\r\n}\r\n\r\nconst UserRow: React.FC<{ user: UserListItem, onSelect: () => void }> = ({ user, onSelect }) => (\r\n    <button onClick={onSelect} className=\"w-full flex items-center p-3 space-x-4 text-left bg-white rounded-lg hover:bg-gray-50 transition-colors\">\r\n        <img src={user.avatarUrl} alt={user.name} className=\"w-12 h-12 rounded-full object-cover\" />\r\n        <div className=\"flex-grow\">\r\n            <p className=\"font-bold text-gray-800\">{user.name}</p>\r\n            <p className=\"text-sm text-gray-500\">{user.subtitle}</p>\r\n        </div>\r\n    </button>\r\n);\r\n\r\nconst ParentNewChatScreen: React.FC<ParentNewChatScreenProps> = ({ navigateTo, children = [] }) => {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    const teachers = useMemo((): UserListItem[] => {\r\n        // Find classes of children\r\n        const childrenClasses = children.map(c => `${c.grade}${c.section}`);\r\n\r\n        // Find teachers who teach those classes\r\n        const relevantTeachers = mockTeachers.filter(t =>\r\n            t.status === 'Active' && t.classes.some(tc => childrenClasses.includes(tc))\r\n        );\r\n\r\n        return relevantTeachers.map(t => ({\r\n            id: t.id,\r\n            name: t.name,\r\n            avatarUrl: t.avatarUrl,\r\n            subtitle: `${t.subjects[0]} Teacher`,\r\n            userType: 'Teacher'\r\n        }));\r\n    }, [children]);\r\n\r\n    const filteredUsers = useMemo(() => {\r\n        return teachers.filter(user =>\r\n            user.name.toLowerCase().includes(searchTerm.toLowerCase())\r\n        );\r\n    }, [searchTerm, teachers]);\r\n\r\n    const handleSelectUser = (user: UserListItem) => {\r\n        const role: RoleName = 'Teacher';\r\n\r\n        // Find existing conversation\r\n        let conversation = mockConversations.find(c =>\r\n            !c.isGroup && c.participants.some(p => p.userId === user.id)\r\n        );\r\n\r\n        if (!conversation) {\r\n            // Mock new conversation\r\n            // Note: In real app, we would make an API call to create conversation\r\n            const newConversation: Conversation = {\r\n                id: Date.now(),\r\n                type: 'direct',\r\n                isGroup: false,\r\n                creatorId: 1002, // Mock curr parent\r\n                createdAt: new Date().toISOString(),\r\n                updatedAt: new Date().toISOString(),\r\n                lastMessageAt: new Date().toISOString(),\r\n                participants: [\r\n                    { roomId: 0, userId: user.id, role: 'member', joinedAt: new Date().toISOString(), user: { id: user.id, name: user.name, avatarUrl: user.avatarUrl, role: role } },\r\n                    { roomId: 0, userId: 1002, role: 'admin', joinedAt: new Date().toISOString(), user: { id: 1002, name: 'You', avatarUrl: '', role: 'Parent' } }\r\n                ],\r\n                messages: [], // This is not in ChatRoom interface but might be expected by ChatScreen mock logic?\r\n                // ChatScreen expects `conversation` object to be passed.\r\n                // In types.ts, ChatRoom does NOT have messages. ChatScreen fetches them or expects them separately?\r\n                // Let's check ChatScreen usage.\r\n                // If ChatScreen expects specific props, I need to match.\r\n                // I will add 'messages' as any cast if needed or just omit if ChatScreen loads them.\r\n                // Assuming ChatScreen loads them or uses context, but \"mockConversations\" usually had messages.\r\n            } as any;\r\n\r\n            mockConversations.push(newConversation);\r\n            conversation = newConversation;\r\n        }\r\n\r\n        navigateTo('chat', user.name, { conversation });\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-gray-100\">\r\n            <div className=\"p-4 bg-gray-100/80 backdrop-blur-sm sticky top-0 z-10 border-b border-gray-200\">\r\n                <div className=\"relative\">\r\n                    <span className=\"absolute inset-y-0 left-0 flex items-center pl-3\">\r\n                        <SearchIcon className=\"text-gray-400\" />\r\n                    </span>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search for a teacher...\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                        className=\"w-full pl-10 pr-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <main className=\"flex-grow p-4 space-y-2 overflow-y-auto\">\r\n                {filteredUsers.length > 0 ? (\r\n                    filteredUsers.map(user => (\r\n                        <UserRow key={user.id} user={user} onSelect={() => handleSelectUser(user)} />\r\n                    ))\r\n                ) : (\r\n                    <p className=\"text-center text-gray-500 pt-8\">No teachers found.</p>\r\n                )}\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ParentNewChatScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}