{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\parent\\\\ParentDashboard.tsx\";\nimport React, { useState, useMemo, useEffect, Suspense } from 'react';\nimport { DashboardType } from '../../types';\nimport { THEME_CONFIG, ChevronRightIcon, BusVehicleIcon, ReceiptIcon, ReportIcon, ClipboardListIcon, MegaphoneIcon, AttendanceSummaryIcon, ChevronLeftIcon, CalendarIcon, CalendarPlusIcon, SparklesIcon, getFormattedClassName } from '../../constants';\nimport Header from '../ui/Header';\nimport { ParentBottomNav } from '../ui/DashboardBottomNav';\nimport { ParentSidebar } from '../ui/DashboardSidebar';\nimport GlobalSearchScreen from '../shared/GlobalSearchScreen';\nimport { supabase } from '../../lib/supabase';\nimport { getHomeworkStatus } from '../../utils/homeworkUtils';\nimport ExamSchedule from '../shared/ExamSchedule';\nimport NoticeboardScreen from '../shared/NoticeboardScreen';\nimport NotificationsScreen from '../shared/NotificationsScreen';\nimport CalendarScreen from '../shared/CalendarScreen';\nimport LibraryScreen from '../shared/LibraryScreen';\nimport BusRouteScreen from '../shared/BusRouteScreen';\nimport FeeStatusScreen from '../parent/FeeStatusScreen';\nimport ReportCardScreen from '../parent/ReportCardScreen';\nimport SelectChildForReportScreen from '../parent/SelectChildForReportScreen';\nimport TimetableScreen from '../shared/TimetableScreen';\nimport ParentProfileScreen from '../parent/ParentProfileScreen';\nimport EditParentProfileScreen from '../parent/EditParentProfileScreen';\nimport FeedbackScreen from '../parent/FeedbackScreen';\nimport ParentNotificationSettingsScreen from '../parent/ParentNotificationSettingsScreen';\nimport ParentSecurityScreen from '../parent/ParentSecurityScreen';\nimport LearningResourcesScreen from '../parent/LearningResourcesScreen';\nimport SchoolPoliciesScreen from '../parent/SchoolPoliciesScreen';\nimport PTAMeetingScreen from '../parent/PTAMeetingScreen';\nimport ParentPhotoGalleryScreen from '../parent/ParentPhotoGalleryScreen';\nimport VolunteeringScreen from '../parent/VolunteeringScreen';\nimport PermissionSlipScreen from '../parent/PermissionSlipScreen';\nimport AppointmentScreen from '../parent/AppointmentScreen';\nimport AIParentingTipsScreen from '../parent/AIParentingTips';\nimport ParentMessagesScreen from '../parent/ParentMessagesScreen';\nimport ParentNewChatScreen from '../parent/ParentNewChatScreen';\nimport ChatScreen from '../shared/ChatScreen';\nimport SchoolUtilitiesScreen from '../parent/SchoolUtilitiesScreen';\nimport VolunteerSignup from '../parent/VolunteerSignup';\nimport ConferenceScheduling from '../shared/ConferenceScheduling';\nimport SurveysAndPolls from '../shared/SurveysAndPolls';\nimport DonationPortal from '../shared/DonationPortal';\nimport CommunityResourceDirectory from '../shared/CommunityResourceDirectory';\nimport ReferralSystem from '../shared/ReferralSystem';\nimport PanicButton from '../shared/PanicButton';\nimport MentalHealthResources from '../shared/MentalHealthResources';\nconst DashboardSuspenseFallback = () => _jsxDEV(\"div\", {\n  className: \"flex justify-center items-center h-full p-8\",\n  children: _jsxDEV(\"div\", {\n    className: \"w-10 h-10 border-4 border-t-4 border-gray-200 border-t-green-600 rounded-full animate-spin\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 79,\n  columnNumber: 5\n}, this);\nconst StatItem = ({\n  icon,\n  label,\n  value,\n  colorClass\n}) => _jsxDEV(\"div\", {\n  className: \"flex items-center space-x-3\",\n  children: [_jsxDEV(\"div\", {\n    className: `p-2 rounded-lg ${colorClass}`,\n    children: icon\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this), _jsxDEV(\"div\", {\n    children: [_jsxDEV(\"p\", {\n      className: \"text-xs text-gray-700\",\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), _jsxDEV(\"p\", {\n      className: \"font-bold text-sm text-gray-800\",\n      children: value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 91,\n  columnNumber: 5\n}, this);\nconst ChildStatCard = ({\n  data,\n  navigateTo,\n  colorTheme\n}) => {\n  const {\n    student,\n    feeInfo,\n    nextHomework,\n    attendancePercentage\n  } = data;\n  const formattedClassName = getFormattedClassName(student.grade, student.section);\n  const feeStatus = feeInfo ? _jsxDEV(\"div\", {\n    className: \"flex flex-col\",\n    children: [_jsxDEV(\"span\", {\n      className: feeInfo.status === 'overdue' ? 'text-red-600 font-bold' : 'text-gray-800 font-semibold',\n      children: new Intl.NumberFormat('en-NG', {\n        style: 'currency',\n        currency: 'NGN',\n        minimumFractionDigits: 0\n      }).format(feeInfo.totalDue)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), feeInfo.nextDueDate && _jsxDEV(\"span\", {\n      className: \"text-xs text-gray-500 mt-0.5\",\n      children: [\"Due: \", new Date(feeInfo.nextDueDate).toLocaleDateString('en-GB')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this) : _jsxDEV(\"span\", {\n    className: \"text-green-600 font-semibold\",\n    children: \"All Paid\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 9\n  }, this);\n  return _jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl shadow-md overflow-hidden\",\n    children: [_jsxDEV(\"div\", {\n      className: \"p-4\",\n      style: {\n        backgroundColor: `${colorTheme.bg}1A`\n      },\n      children: _jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [_jsxDEV(\"img\", {\n            src: student.avatarUrl,\n            alt: student.name,\n            className: \"w-14 h-14 rounded-full object-cover border-2\",\n            style: {\n              borderColor: colorTheme.bg\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            children: [_jsxDEV(\"h3\", {\n              className: \"font-bold text-lg text-gray-800\",\n              children: student.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-sm font-semibold\",\n              style: {\n                color: colorTheme.text\n              },\n              children: formattedClassName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this), _jsxDEV(\"button\", {\n          onClick: () => navigateTo('childDetail', student.name, {\n            student: student\n          }),\n          className: \"bg-white p-2 rounded-full shadow-sm hover:bg-gray-100\",\n          children: _jsxDEV(ChevronRightIcon, {\n            className: \"text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"px-4 py-3 grid grid-cols-2 gap-4 border-t border-gray-100\",\n      children: [_jsxDEV(StatItem, {\n        icon: _jsxDEV(AttendanceSummaryIcon, {\n          className: \"h-5 w-5 text-green-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 33\n        }, this),\n        label: \"Attendance\",\n        value: `${attendancePercentage}%`,\n        colorClass: \"bg-green-100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), _jsxDEV(StatItem, {\n        icon: _jsxDEV(ReceiptIcon, {\n          className: \"h-5 w-5 text-red-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 33\n        }, this),\n        label: \"Fees Due\",\n        value: feeStatus,\n        colorClass: \"bg-red-100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), nextHomework && _jsxDEV(StatItem, {\n        icon: _jsxDEV(ClipboardListIcon, {\n          className: \"h-5 w-5 text-purple-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 50\n        }, this),\n        label: \"Homework\",\n        value: `${nextHomework.subject}`,\n        colorClass: \"bg-purple-100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 34\n      }, this), _jsxDEV(StatItem, {\n        icon: _jsxDEV(ReportIcon, {\n          className: \"h-5 w-5 text-sky-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 33\n        }, this),\n        label: \"Report Card\",\n        value: \"View\",\n        colorClass: \"bg-sky-100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 9\n  }, this);\n};\nconst AcademicsTab = ({\n  student,\n  navigateTo\n}) => {\n  const [assignments, setAssignments] = useState([]);\n  const [progressReport, setProgressReport] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchAcademics = async () => {\n      try {\n        const {\n          data: assignmentsData\n        } = await supabase.from('assignments').select('*').or(`class_name.ilike.%${student.grade}%,class_name.ilike.%${student.section}%`).gt('due_date', new Date().toISOString()).order('due_date', {\n          ascending: true\n        });\n        const {\n          data: submissionsData\n        } = await supabase.from('assignment_submissions').select('*').eq('student_id', student.id);\n        if (assignmentsData) {\n          const merged = assignmentsData.map(a => ({\n            id: a.id,\n            title: a.title,\n            description: a.description,\n            className: a.class_name,\n            subject: a.subject,\n            dueDate: a.due_date,\n            totalStudents: 0,\n            submissionsCount: 0,\n            submission: submissionsData?.find(s => s.assignment_id === a.id) ? {\n              id: submissionsData.find(s => s.assignment_id === a.id).id,\n              assignmentId: a.id,\n              student: {\n                id: student.id,\n                name: student.name,\n                avatarUrl: student.avatarUrl\n              },\n              submittedAt: submissionsData.find(s => s.assignment_id === a.id).submitted_at,\n              isLate: false,\n              status: submissionsData.find(s => s.assignment_id === a.id).grade ? 'Graded' : 'Ungraded',\n              grade: submissionsData.find(s => s.assignment_id === a.id).grade\n            } : undefined\n          }));\n          setAssignments(merged);\n        }\n      } catch (err) {\n        console.error(\"Error fetching academics:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchAcademics();\n  }, [student]);\n  const averageScore = useMemo(() => {\n    if (!student.academicPerformance?.length) return 0;\n    return Math.round(student.academicPerformance.reduce((acc, curr) => acc + curr.score, 0) / student.academicPerformance.length);\n  }, [student]);\n  return _jsxDEV(\"div\", {\n    className: \"p-4 space-y-4\",\n    children: [_jsxDEV(\"div\", {\n      className: \"bg-gradient-to-r from-green-500 to-teal-500 p-4 rounded-2xl shadow-lg flex items-center justify-between text-white\",\n      children: [_jsxDEV(\"div\", {\n        children: [_jsxDEV(\"h3\", {\n          className: \"font-bold text-lg\",\n          children: \"Personalized Advice\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this), _jsxDEV(\"p\", {\n          className: \"text-sm opacity-90\",\n          children: \"Get AI-powered tips for your child.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }, this), _jsxDEV(\"button\", {\n        onClick: () => navigateTo('aiParentingTips', 'AI Parenting Tips', {\n          student\n        }),\n        className: \"bg-white/20 px-4 py-2 rounded-lg font-semibold hover:bg-white/30 transition-colors flex items-center space-x-2\",\n        children: [_jsxDEV(SparklesIcon, {\n          className: \"h-5 w-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }, this), _jsxDEV(\"span\", {\n          children: \"Get Tips\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-4\",\n      children: [_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded-xl shadow-sm\",\n        children: [_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [_jsxDEV(\"div\", {\n            children: [_jsxDEV(\"h4\", {\n              className: \"font-bold text-gray-800\",\n              children: \"Term Performance\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 29\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-sm text-gray-700\",\n              children: \"Current Term\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 25\n          }, this), averageScore > 0 && _jsxDEV(\"div\", {\n            className: \"text-right\",\n            children: [_jsxDEV(\"p\", {\n              className: \"font-bold text-2xl text-green-600\",\n              children: [averageScore, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 33\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-xs text-gray-700\",\n              children: \"Overall Average\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 21\n        }, this), student.academicPerformance && student.academicPerformance.length > 0 ? _jsxDEV(\"div\", {\n          className: \"mt-3 space-y-2\",\n          children: student.academicPerformance.map((grade, i) => _jsxDEV(\"div\", {\n            className: \"flex justify-between items-center bg-gray-50 p-2 rounded-lg\",\n            children: [_jsxDEV(\"span\", {\n              className: \"font-semibold text-sm text-gray-700\",\n              children: grade.subject\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 37\n            }, this), _jsxDEV(\"span\", {\n              className: \"font-bold text-sm text-gray-800\",\n              children: [grade.score, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 37\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 25\n        }, this) : _jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500 mt-2\",\n          children: \"No grades recorded yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded-xl shadow-sm\",\n        children: [_jsxDEV(\"h4\", {\n          className: \"font-bold text-gray-800 mb-3\",\n          children: \"Upcoming Homework\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: assignments.length > 0 ? assignments.map(hw => {\n            const status = getHomeworkStatus(hw);\n            return _jsxDEV(\"div\", {\n              className: \"flex justify-between items-center border-b pb-2 last:border-b-0\",\n              children: [_jsxDEV(\"div\", {\n                children: [_jsxDEV(\"p\", {\n                  className: \"font-bold text-gray-800\",\n                  children: hw.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 41\n                }, this), _jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-700\",\n                  children: [hw.subject, \" \\u2022 Due \", new Date(hw.dueDate).toLocaleDateString('en-GB')]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 37\n              }, this), _jsxDEV(\"div\", {\n                className: `flex items-center space-x-2 text-xs font-semibold px-2 py-1 rounded-full ${status.bg} ${status.color}`,\n                children: [React.cloneElement(status.icon, {\n                  className: `h-4 w-4 ${status.isComplete ? 'animate-checkmark-pop' : ''}`.trim()\n                }), _jsxDEV(\"span\", {\n                  children: status.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 37\n              }, this)]\n            }, hw.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 33\n            }, this);\n          }) : _jsxDEV(\"p\", {\n            className: \"text-sm text-gray-700 text-center\",\n            children: \"No upcoming homework.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 30\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 212,\n    columnNumber: 9\n  }, this);\n};\nconst BehaviorTab = ({\n  student\n}) => {\n  return _jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: _jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n      children: student.behaviorNotes && student.behaviorNotes.length > 0 ? [...student.behaviorNotes].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()).map(note => {\n        const isPositive = note.type === 'Positive';\n        return _jsxDEV(\"div\", {\n          className: `p-4 rounded-xl border-l-4 ${isPositive ? 'bg-green-50 border-green-400' : 'bg-red-50 border-red-400'}`,\n          children: [_jsxDEV(\"div\", {\n            className: \"flex justify-between items-start\",\n            children: [_jsxDEV(\"h5\", {\n              className: `font-bold ${isPositive ? 'text-green-800' : 'text-red-800'}`,\n              children: note.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 33\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-xs text-gray-700 font-medium flex-shrink-0 ml-2\",\n              children: new Date(note.date).toLocaleDateString('en-US', {\n                month: 'short',\n                day: 'numeric'\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 29\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-sm text-gray-700 mt-1\",\n            children: note.note\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 29\n          }, this), note.suggestions && _jsxDEV(\"div\", {\n            className: \"mt-3 pt-3 border-t border-gray-200\",\n            children: [_jsxDEV(\"h6\", {\n              className: \"font-semibold text-xs text-gray-600\",\n              children: \"Suggestions for Home:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 37\n            }, this), _jsxDEV(\"ul\", {\n              className: \"list-disc list-inside text-sm text-gray-700 mt-1 space-y-1\",\n              children: note.suggestions.map((s, i) => _jsxDEV(\"li\", {\n                children: s\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 73\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 33\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-xs text-gray-600 text-right mt-2 italic\",\n            children: [\"- \", note.by]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 29\n          }, this)]\n        }, note.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 25\n        }, this);\n      }) : _jsxDEV(\"p\", {\n        className: \"md:col-span-2 text-sm text-gray-700 text-center py-8\",\n        children: \"No behavioral notes recorded.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 22\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 285,\n    columnNumber: 9\n  }, this);\n};\nconst AttendanceTab = ({\n  student\n}) => {\n  const [attendance, setAttendance] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchAttendance = async () => {\n      const {\n        data\n      } = await supabase.from('student_attendance').select('*').eq('student_id', student.id);\n      if (data) {\n        setAttendance(data.map(a => ({\n          id: a.id,\n          studentId: a.student_id,\n          date: a.date,\n          status: a.status\n        })));\n      }\n      setLoading(false);\n    };\n    fetchAttendance();\n  }, [student.id]);\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const attendanceMap = useMemo(() => {\n    const map = new Map();\n    attendance.forEach(att => map.set(att.date, att.status));\n    return map;\n  }, [attendance]);\n  const firstDayOfMonth = useMemo(() => new Date(currentDate.getFullYear(), currentDate.getMonth(), 1), [currentDate]);\n  const daysInMonth = useMemo(() => new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate(), [currentDate]);\n  const startingDayIndex = firstDayOfMonth.getDay();\n  const goToPreviousMonth = () => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1));\n  const goToNextMonth = () => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1));\n  const attendanceColors = {\n    Present: 'bg-green-400 text-white',\n    Absent: 'bg-red-400 text-white',\n    Late: 'bg-blue-400 text-white',\n    Leave: 'bg-gray-200 text-gray-500'\n  };\n  return _jsxDEV(\"div\", {\n    className: \"p-4 bg-white rounded-xl shadow-sm\",\n    children: [_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-4\",\n      children: [_jsxDEV(\"button\", {\n        onClick: goToPreviousMonth,\n        className: \"p-2 rounded-full hover:bg-gray-100\",\n        children: _jsxDEV(ChevronLeftIcon, {\n          className: \"h-5 w-5 text-gray-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 100\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 17\n      }, this), _jsxDEV(\"h3\", {\n        className: \"font-bold text-lg text-gray-800\",\n        children: currentDate.toLocaleString('default', {\n          month: 'long',\n          year: 'numeric'\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 17\n      }, this), _jsxDEV(\"button\", {\n        onClick: goToNextMonth,\n        className: \"p-2 rounded-full hover:bg-gray-100\",\n        children: _jsxDEV(ChevronRightIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 96\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"grid grid-cols-7 gap-1 text-center text-xs font-semibold text-gray-700 mb-2\",\n      children: ['S', 'M', 'T', 'W', 'T', 'F', 'S'].map(day => _jsxDEV(\"div\", {\n        children: day\n      }, day, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 65\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"grid grid-cols-7 gap-2\",\n      children: [Array.from({\n        length: startingDayIndex\n      }).map((_, index) => _jsxDEV(\"div\", {}, `empty-${index}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 77\n      }, this)), Array.from({\n        length: daysInMonth\n      }).map((_, index) => {\n        const day = index + 1;\n        const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);\n        const dateString = date.toISOString().split('T')[0];\n        const status = attendanceMap.get(dateString);\n        return _jsxDEV(\"div\", {\n          className: `w-9 h-9 flex items-center justify-center rounded-full text-sm font-semibold ${status ? attendanceColors[status] : 'bg-gray-100 text-gray-400'}`,\n          children: day\n        }, day, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 25\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"flex justify-center space-x-3 mt-4 text-xs\",\n      children: [_jsxDEV(\"span\", {\n        className: \"flex items-center\",\n        children: [_jsxDEV(\"div\", {\n          className: \"w-3 h-3 rounded-full bg-green-400 mr-1.5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 53\n        }, this), \"Present\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 17\n      }, this), _jsxDEV(\"span\", {\n        className: \"flex items-center\",\n        children: [_jsxDEV(\"div\", {\n          className: \"w-3 h-3 rounded-full bg-red-400 mr-1.5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 53\n        }, this), \"Absent\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 17\n      }, this), _jsxDEV(\"span\", {\n        className: \"flex items-center\",\n        children: [_jsxDEV(\"div\", {\n          className: \"w-3 h-3 rounded-full bg-blue-400 mr-1.5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 53\n        }, this), \"Late\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 360,\n    columnNumber: 9\n  }, this);\n};\nconst ChildDetailScreen = ({\n  student,\n  initialTab,\n  navigateTo\n}) => {\n  const [activeTab, setActiveTab] = useState(initialTab || 'academics');\n  const TabButton = ({\n    id,\n    label\n  }) => _jsxDEV(\"button\", {\n    onClick: () => setActiveTab(id),\n    className: `flex-1 py-2 text-sm font-semibold rounded-md transition-colors ${activeTab === id ? 'bg-green-500 text-white shadow' : 'text-gray-800'}`,\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 398,\n    columnNumber: 9\n  }, this);\n  return _jsxDEV(\"div\", {\n    className: \"flex flex-col h-full bg-gray-50\",\n    children: [_jsxDEV(\"div\", {\n      className: \"p-4 bg-white flex items-center space-x-4\",\n      children: [_jsxDEV(\"img\", {\n        src: student.avatarUrl,\n        alt: student.name,\n        className: \"w-16 h-16 rounded-full object-cover border-4 border-green-100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        children: [_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-gray-800\",\n          children: student.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 21\n        }, this), _jsxDEV(\"p\", {\n          className: \"text-gray-700 font-medium\",\n          children: getFormattedClassName(student.grade, student.section)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"px-4 py-2 bg-white\",\n      children: _jsxDEV(\"div\", {\n        className: \"flex space-x-1 bg-gray-200 p-1 rounded-lg\",\n        children: [_jsxDEV(TabButton, {\n          id: \"academics\",\n          label: \"Academics\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 21\n        }, this), _jsxDEV(TabButton, {\n          id: \"behavior\",\n          label: \"Behavior\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 21\n        }, this), _jsxDEV(TabButton, {\n          id: \"attendance\",\n          label: \"Attendance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"flex-grow overflow-y-auto\",\n      children: [activeTab === 'academics' && _jsxDEV(AcademicsTab, {\n        student: student,\n        navigateTo: navigateTo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 47\n      }, this), activeTab === 'behavior' && _jsxDEV(BehaviorTab, {\n        student: student\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 46\n      }, this), activeTab === 'attendance' && _jsxDEV(\"div\", {\n        className: \"p-4\",\n        children: _jsxDEV(AttendanceTab, {\n          student: student\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 69\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 48\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 408,\n    columnNumber: 9\n  }, this);\n};\nconst Dashboard = ({\n  navigateTo,\n  parentId\n}) => {\n  const theme = THEME_CONFIG[DashboardType.Parent];\n  const [students, setStudents] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchChildren = async () => {\n      const fetchStudents = async ids => {\n        const {\n          data: studentsData,\n          error: studentsError\n        } = await supabase.from('students').select('*').in('id', ids);\n        if (studentsError) throw studentsError;\n        const mappedStudents = studentsData.map(s => ({\n          id: s.id,\n          name: s.name,\n          email: s.user?.email || '',\n          avatarUrl: s.avatar_url || 'https://via.placeholder.com/150',\n          grade: s.grade,\n          section: s.section,\n          department: s.department,\n          attendanceStatus: s.attendance_status || 'Present',\n          birthday: s.birthday,\n          academicPerformance: [],\n          behaviorNotes: [],\n          reportCards: []\n        }));\n        setStudents(mappedStudents);\n      };\n      try {\n        if (!parentId) {\n          const {\n            data: fallbackParent\n          } = await supabase.from('parents').select('id').limit(1).single();\n          if (fallbackParent) {\n            const {\n              data: relations\n            } = await supabase.from('parent_children').select('student_id').eq('parent_id', fallbackParent.id);\n            if (relations) {\n              const studentIds = relations.map(r => r.student_id);\n              fetchStudents(studentIds);\n            }\n          }\n          setLoading(false);\n          return;\n        }\n        const {\n          data: relations,\n          error: relationError\n        } = await supabase.from('parent_children').select('student_id').eq('parent_id', parentId);\n        if (relationError) throw relationError;\n        if (relations && relations.length > 0) {\n          const studentIds = relations.map(r => r.student_id);\n          await fetchStudents(studentIds);\n        } else {\n          setStudents([]);\n        }\n      } catch (err) {\n        if (import.meta.env.DEV) console.warn(\"Error fetching children:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchChildren();\n  }, [parentId]);\n  const [notifications, setNotifications] = useState([]);\n  useEffect(() => {\n    const fetchNotifications = async () => {\n      const {\n        data\n      } = await supabase.from('notifications').select('*').eq('is_read', false).contains('audience', ['parent']);\n      if (data) setNotifications(data);\n    };\n    fetchNotifications();\n  }, []);\n  const notificationCount = notifications.length;\n  const [childrenStats, setChildrenStats] = useState([]);\n  useEffect(() => {\n    const fetchStats = async () => {\n      if (students.length === 0) return;\n      const stats = await Promise.all(students.map(async student => {\n        const {\n          data: feesData\n        } = await supabase.from('fees').select('*').eq('student_id', student.id).in('status', ['pending', 'partial']).order('due_date', {\n          ascending: true\n        });\n        const feeInfo = feesData && feesData.length > 0 ? {\n          totalDue: feesData.reduce((sum, fee) => sum + (fee.amount - (fee.paid_amount || 0)), 0),\n          nextDueDate: feesData[0]?.due_date,\n          status: feesData[0]?.status || 'pending',\n          count: feesData.length\n        } : null;\n        const {\n          count: totalAtt\n        } = await supabase.from('student_attendance').select('id', {\n          count: 'exact',\n          head: true\n        }).eq('student_id', student.id);\n        const {\n          count: presentAtt\n        } = await supabase.from('student_attendance').select('id', {\n          count: 'exact',\n          head: true\n        }).eq('student_id', student.id).eq('status', 'Present');\n        const attendancePercentage = totalAtt && totalAtt > 0 ? Math.round((presentAtt || 0) / totalAtt * 100) : 0;\n        const {\n          data: homework\n        } = await supabase.from('assignments').select('*').or(`class_name.ilike.%${student.grade}%,class_name.ilike.%${student.section}%`).gt('due_date', new Date().toISOString()).order('due_date', {\n          ascending: true\n        }).limit(1).single();\n        return {\n          student,\n          feeInfo,\n          nextHomework: homework ? {\n            subject: homework.subject,\n            title: homework.title\n          } : null,\n          attendancePercentage\n        };\n      }));\n      setChildrenStats(stats);\n    };\n    fetchStats();\n    const studentIds = students.map(s => s.id);\n    const feeChannel = supabase.channel('parent_fees_realtime').on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'student_fees',\n      filter: `student_id=in.(${studentIds.join(',')})`\n    }, () => {\n      console.log('Fee update received, refreshing...');\n      fetchStats();\n    }).subscribe();\n    const attendanceChannel = supabase.channel('parent_attendance_realtime').on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'student_attendance',\n      filter: `student_id=in.(${studentIds.join(',')})`\n    }, () => {\n      console.log('Attendance update received, refreshing...');\n      fetchStats();\n    }).subscribe();\n    const feesChannel = supabase.channel('parent_fees_table_realtime').on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'fees',\n      filter: `student_id=in.(${studentIds.join(',')})`\n    }, () => {\n      console.log('New fee assigned, refreshing...');\n      fetchStats();\n    }).subscribe();\n    return () => {\n      supabase.removeChannel(feeChannel);\n      supabase.removeChannel(attendanceChannel);\n      supabase.removeChannel(feesChannel);\n    };\n  }, [students]);\n  const quickAccessItems = [{\n    label: 'Bus Route',\n    icon: _jsxDEV(BusVehicleIcon, {\n      className: \"h-7 w-7\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 646,\n      columnNumber: 37\n    }, this),\n    action: () => navigateTo('busRoute', 'Bus Route')\n  }, {\n    label: 'Calendar',\n    icon: _jsxDEV(CalendarIcon, {\n      className: \"h-7 w-7\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 647,\n      columnNumber: 36\n    }, this),\n    action: () => navigateTo('calendar', 'School Calendar')\n  }, {\n    label: 'Noticeboard',\n    icon: _jsxDEV(MegaphoneIcon, {\n      className: \"h-7 w-7\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 648,\n      columnNumber: 39\n    }, this),\n    action: () => navigateTo('noticeboard', 'Noticeboard')\n  }, {\n    label: 'Appointments',\n    icon: _jsxDEV(CalendarPlusIcon, {\n      className: \"h-7 w-7\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 649,\n      columnNumber: 40\n    }, this),\n    action: () => navigateTo('appointments', 'Book Appointment')\n  }];\n  const childColorThemes = [{\n    bg: '#3b82f6',\n    text: '#1e40af'\n  }, {\n    bg: '#ec4899',\n    text: '#831843'\n  }];\n  return _jsxDEV(\"div\", {\n    className: \"p-4 lg:p-6 bg-gray-50\",\n    children: _jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n      children: [_jsxDEV(\"div\", {\n        className: \"lg:col-span-2 space-y-6\",\n        children: childrenStats.map((data, index) => _jsxDEV(ChildStatCard, {\n          data: data,\n          navigateTo: navigateTo,\n          colorTheme: childColorThemes[index % childColorThemes.length]\n        }, data.student.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 658,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"lg:col-span-1 space-y-6\",\n        children: _jsxDEV(\"div\", {\n          children: [_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center mb-2 px-1\",\n            children: [_jsxDEV(\"h3\", {\n              className: \"text-lg font-bold text-gray-800\",\n              children: \"School Utilities\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 29\n            }, this), _jsxDEV(\"button\", {\n              onClick: () => navigateTo('schoolUtilities', 'School Utilities'),\n              className: \"text-sm text-blue-600 hover:text-blue-800 font-medium\",\n              children: \"View All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-3\",\n            children: quickAccessItems.map(item => _jsxDEV(\"button\", {\n              onClick: item.action,\n              className: \"bg-white p-3 rounded-2xl shadow-sm flex flex-col items-center justify-center space-y-2 hover:bg-gray-100 transition-colors\",\n              children: [_jsxDEV(\"div\", {\n                className: \"text-gray-600\",\n                children: item.icon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 37\n              }, this), _jsxDEV(\"span\", {\n                className: \"font-semibold text-gray-700 text-center text-xs\",\n                children: item.label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 37\n              }, this)]\n            }, item.label, true, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 664,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 655,\n    columnNumber: 9\n  }, this);\n};\nimport { useRealtimeNotifications } from '../../hooks/useRealtimeNotifications';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ParentDashboard = ({\n  onLogout,\n  setIsHomePage,\n  currentUser\n}) => {\n  const [viewStack, setViewStack] = useState([{\n    view: 'dashboard',\n    title: 'Parent Dashboard'\n  }]);\n  const [activeBottomNav, setActiveBottomNav] = useState('home');\n  const [version, setVersion] = useState(0);\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\n  const [parentId, setParentId] = useState(null);\n  const [parentProfile, setParentProfile] = useState({\n    name: 'Parent',\n    avatarUrl: 'https://i.pravatar.cc/150?u=parent'\n  });\n  const notificationCount = useRealtimeNotifications('parent');\n  const forceUpdate = () => setVersion(v => v + 1);\n  const fetchProfile = async () => {\n    let query = supabase.from('parents').select('id, name, email, phone, avatar_url');\n    if (currentUser?.email) {\n      query = query.eq('email', currentUser.email);\n    } else {\n      const {\n        data: demo\n      } = await supabase.from('parents').select('id, name, email, phone').limit(1).single();\n      if (demo) {\n        setParentId(demo.id);\n        setParentProfile({\n          name: demo.name || 'Parent',\n          avatarUrl: 'https://i.pravatar.cc/150?u=parent'\n        });\n        return;\n      }\n    }\n    const {\n      data,\n      error\n    } = await query.single();\n    if (error) {\n      console.error('Error fetching parent profile:', error);\n      return;\n    }\n    if (data) {\n      setParentId(data.id);\n      setParentProfile({\n        name: data.name || 'Parent',\n        avatarUrl: data.avatar_url || 'https://i.pravatar.cc/150?u=parent'\n      });\n    }\n  };\n  useEffect(() => {\n    fetchProfile();\n  }, [currentUser]);\n  useEffect(() => {\n    const currentView = viewStack[viewStack.length - 1];\n    setIsHomePage(currentView.view === 'dashboard' && !isSearchOpen);\n  }, [viewStack, isSearchOpen, setIsHomePage]);\n  const navigateTo = (view, title, props = {}) => {\n    setViewStack(stack => [...stack, {\n      view,\n      props,\n      title\n    }]);\n  };\n  const handleBack = () => {\n    if (viewStack.length > 1) {\n      setViewStack(stack => stack.slice(0, -1));\n    }\n  };\n  const handleBottomNavClick = screen => {\n    setActiveBottomNav(screen);\n    switch (screen) {\n      case 'home':\n        setViewStack([{\n          view: 'dashboard',\n          title: 'Parent Dashboard'\n        }]);\n        break;\n      case 'fees':\n        setViewStack([{\n          view: 'feeStatus',\n          title: 'Fee Status'\n        }]);\n        break;\n      case 'reports':\n        setViewStack([{\n          view: 'selectReport',\n          title: 'Select Report Card'\n        }]);\n        break;\n      case 'messages':\n        setViewStack([{\n          view: 'messages',\n          title: 'Messages'\n        }]);\n        break;\n      case 'more':\n        setViewStack([{\n          view: 'more',\n          title: 'More Options'\n        }]);\n        break;\n      default:\n        setViewStack([{\n          view: 'dashboard',\n          title: 'Parent Dashboard'\n        }]);\n    }\n  };\n  const handleNotificationClick = () => {\n    navigateTo('notifications', 'Notifications', {});\n  };\n  const viewComponents = {\n    dashboard: Dashboard,\n    childDetail: ChildDetailScreen,\n    examSchedule: ExamSchedule,\n    noticeboard: props => _jsxDEV(NoticeboardScreen, Object.assign({}, props, {\n      userType: \"parent\"\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 793,\n      columnNumber: 38\n    }, this),\n    notifications: props => _jsxDEV(NotificationsScreen, Object.assign({}, props, {\n      userType: \"parent\",\n      navigateTo: navigateTo\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 794,\n      columnNumber: 40\n    }, this),\n    calendar: CalendarScreen,\n    library: LibraryScreen,\n    busRoute: BusRouteScreen,\n    feeStatus: props => _jsxDEV(FeeStatusScreen, Object.assign({}, props, {\n      parentId: parentId\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 798,\n      columnNumber: 36\n    }, this),\n    selectReport: props => _jsxDEV(SelectChildForReportScreen, Object.assign({}, props, {\n      parentId: parentId\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 799,\n      columnNumber: 39\n    }, this),\n    reportCard: ReportCardScreen,\n    timetable: TimetableScreen,\n    more: ParentProfileScreen,\n    editParentProfile: EditParentProfileScreen,\n    feedback: FeedbackScreen,\n    notificationSettings: ParentNotificationSettingsScreen,\n    securitySettings: ParentSecurityScreen,\n    learningResources: LearningResourcesScreen,\n    schoolPolicies: SchoolPoliciesScreen,\n    ptaMeetings: PTAMeetingScreen,\n    photoGallery: ParentPhotoGalleryScreen,\n    volunteering: VolunteeringScreen,\n    permissionSlips: PermissionSlipScreen,\n    appointments: AppointmentScreen,\n    aiParentingTips: AIParentingTipsScreen,\n    messages: ParentMessagesScreen,\n    newChat: ParentNewChatScreen,\n    chat: props => _jsxDEV(ChatScreen, Object.assign({}, props, {\n      currentUserId: parentId ?? 100\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 817,\n      columnNumber: 31\n    }, this),\n    schoolUtilities: SchoolUtilitiesScreen,\n    volunteerSignup: VolunteerSignup,\n    conferenceScheduling: ConferenceScheduling,\n    surveysAndPolls: SurveysAndPolls,\n    donationPortal: DonationPortal,\n    communityResources: CommunityResourceDirectory,\n    referralSystem: ReferralSystem,\n    panicButton: PanicButton,\n    mentalHealthResources: MentalHealthResources\n  };\n  const currentNavigation = viewStack[viewStack.length - 1];\n  const ComponentToRender = viewComponents[currentNavigation.view];\n  const commonProps = {\n    navigateTo,\n    onLogout,\n    handleBack,\n    forceUpdate,\n    parentId,\n    currentUser\n  };\n  return _jsxDEV(\"div\", {\n    className: \"flex h-screen w-full overflow-hidden bg-gray-100\",\n    children: [_jsxDEV(\"div\", {\n      className: \"hidden md:flex w-64 flex-col fixed inset-y-0 left-0 z-50\",\n      children: _jsxDEV(ParentSidebar, {\n        activeScreen: activeBottomNav,\n        setActiveScreen: handleBottomNavClick,\n        onLogout: onLogout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 847,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 846,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col h-screen w-full md:ml-64 overflow-hidden\",\n      children: [_jsxDEV(Header, {\n        title: currentNavigation.title,\n        avatarUrl: parentProfile.avatarUrl,\n        bgColor: THEME_CONFIG[DashboardType.Parent].mainBg,\n        onLogout: onLogout,\n        onBack: viewStack.length > 1 ? handleBack : undefined,\n        onNotificationClick: handleNotificationClick,\n        notificationCount: notificationCount,\n        onSearchClick: () => setIsSearchOpen(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 856,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"flex-1 overflow-hidden relative\",\n        children: [isSearchOpen && _jsxDEV(\"div\", {\n          className: \"absolute inset-0 z-50 bg-white\",\n          children: _jsxDEV(GlobalSearchScreen, {\n            onClose: () => setIsSearchOpen(false),\n            navigateTo: navigateTo,\n            dashboardType: DashboardType.Parent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 871,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 870,\n          columnNumber: 25\n        }, this), _jsxDEV(\"div\", {\n          className: \"h-full overflow-y-auto pb-20 md:pb-6\",\n          children: _jsxDEV(Suspense, {\n            fallback: _jsxDEV(DashboardSuspenseFallback, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 876,\n              columnNumber: 45\n            }, this),\n            children: _jsxDEV(ComponentToRender, Object.assign({}, commonProps, currentNavigation.props), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 877,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 876,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 875,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 867,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"md:hidden\",\n        children: _jsxDEV(ParentBottomNav, {\n          activeScreen: activeBottomNav,\n          setActiveScreen: handleBottomNavClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 884,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 883,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 855,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 844,\n    columnNumber: 9\n  }, this);\n};\nexport default ParentDashboard;","map":{"version":3,"names":["React","useState","useMemo","useEffect","Suspense","DashboardType","THEME_CONFIG","ChevronRightIcon","BusVehicleIcon","ReceiptIcon","ReportIcon","ClipboardListIcon","MegaphoneIcon","AttendanceSummaryIcon","ChevronLeftIcon","CalendarIcon","CalendarPlusIcon","SparklesIcon","getFormattedClassName","Header","ParentBottomNav","ParentSidebar","GlobalSearchScreen","supabase","getHomeworkStatus","ExamSchedule","NoticeboardScreen","NotificationsScreen","CalendarScreen","LibraryScreen","BusRouteScreen","FeeStatusScreen","ReportCardScreen","SelectChildForReportScreen","TimetableScreen","ParentProfileScreen","EditParentProfileScreen","FeedbackScreen","ParentNotificationSettingsScreen","ParentSecurityScreen","LearningResourcesScreen","SchoolPoliciesScreen","PTAMeetingScreen","ParentPhotoGalleryScreen","VolunteeringScreen","PermissionSlipScreen","AppointmentScreen","AIParentingTipsScreen","ParentMessagesScreen","ParentNewChatScreen","ChatScreen","SchoolUtilitiesScreen","VolunteerSignup","ConferenceScheduling","SurveysAndPolls","DonationPortal","CommunityResourceDirectory","ReferralSystem","PanicButton","MentalHealthResources","DashboardSuspenseFallback","_jsxDEV","className","children","fileName","_jsxFileName","lineNumber","columnNumber","StatItem","icon","label","value","colorClass","ChildStatCard","data","navigateTo","colorTheme","student","feeInfo","nextHomework","attendancePercentage","formattedClassName","grade","section","feeStatus","status","Intl","NumberFormat","style","currency","minimumFractionDigits","format","totalDue","nextDueDate","Date","toLocaleDateString","backgroundColor","bg","src","avatarUrl","alt","name","borderColor","color","text","onClick","subject","AcademicsTab","assignments","setAssignments","progressReport","setProgressReport","loading","setLoading","fetchAcademics","assignmentsData","from","select","or","gt","toISOString","order","ascending","submissionsData","eq","id","merged","map","a","title","description","class_name","dueDate","due_date","totalStudents","submissionsCount","submission","find","s","assignment_id","assignmentId","submittedAt","submitted_at","isLate","undefined","err","console","error","averageScore","academicPerformance","length","Math","round","reduce","acc","curr","score","i","hw","cloneElement","isComplete","trim","BehaviorTab","behaviorNotes","sort","b","date","getTime","note","isPositive","type","month","day","suggestions","by","AttendanceTab","attendance","setAttendance","fetchAttendance","studentId","student_id","currentDate","setCurrentDate","attendanceMap","Map","forEach","att","set","firstDayOfMonth","getFullYear","getMonth","daysInMonth","getDate","startingDayIndex","getDay","goToPreviousMonth","goToNextMonth","attendanceColors","Present","Absent","Late","Leave","toLocaleString","year","Array","_","index","dateString","split","get","ChildDetailScreen","initialTab","activeTab","setActiveTab","TabButton","Dashboard","parentId","theme","Parent","students","setStudents","fetchChildren","fetchStudents","ids","studentsData","studentsError","in","mappedStudents","email","user","avatar_url","department","attendanceStatus","attendance_status","birthday","reportCards","fallbackParent","limit","single","relations","studentIds","r","relationError","import","meta","env","DEV","warn","notifications","setNotifications","fetchNotifications","contains","notificationCount","childrenStats","setChildrenStats","fetchStats","stats","Promise","all","feesData","sum","fee","amount","paid_amount","count","totalAtt","head","presentAtt","homework","feeChannel","channel","on","event","schema","table","filter","join","log","subscribe","attendanceChannel","feesChannel","removeChannel","quickAccessItems","action","childColorThemes","item","useRealtimeNotifications","jsxDEV","ParentDashboard","onLogout","setIsHomePage","currentUser","viewStack","setViewStack","view","activeBottomNav","setActiveBottomNav","version","setVersion","isSearchOpen","setIsSearchOpen","setParentId","parentProfile","setParentProfile","forceUpdate","v","fetchProfile","query","demo","currentView","props","stack","handleBack","slice","handleBottomNavClick","screen","handleNotificationClick","viewComponents","dashboard","childDetail","examSchedule","noticeboard","Object","assign","userType","calendar","library","busRoute","selectReport","reportCard","timetable","more","editParentProfile","feedback","notificationSettings","securitySettings","learningResources","schoolPolicies","ptaMeetings","photoGallery","volunteering","permissionSlips","appointments","aiParentingTips","messages","newChat","chat","currentUserId","schoolUtilities","volunteerSignup","conferenceScheduling","surveysAndPolls","donationPortal","communityResources","referralSystem","panicButton","mentalHealthResources","currentNavigation","ComponentToRender","commonProps","activeScreen","setActiveScreen","bgColor","mainBg","onBack","onNotificationClick","onSearchClick","onClose","dashboardType","fallback"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/parent/ParentDashboard.tsx"],"sourcesContent":["import React, { useState, useMemo, useEffect, lazy, Suspense } from 'react';\r\nimport { DashboardType, Student, BehaviorNote, StudentAttendance, AttendanceStatus, StudentAssignment, ProgressReport } from '../../types';\r\nimport {\r\n    THEME_CONFIG,\r\n    ChevronRightIcon,\r\n    BusVehicleIcon,\r\n    ReceiptIcon,\r\n    ReportIcon,\r\n    PhoneIcon,\r\n    ChartBarIcon,\r\n    ClipboardListIcon,\r\n    MegaphoneIcon,\r\n    AttendanceSummaryIcon,\r\n    ClockIcon,\r\n    BookOpenIcon,\r\n    SUBJECT_COLORS,\r\n    ChevronLeftIcon,\r\n    XCircleIcon,\r\n    TrendingUpIcon,\r\n    CheckCircleIcon,\r\n    ExclamationCircleIcon,\r\n    StarIcon,\r\n    CalendarIcon,\r\n    CalendarPlusIcon,\r\n    SparklesIcon,\r\n    getFormattedClassName\r\n} from '../../constants';\r\n\r\nimport Header from '../ui/Header';\r\nimport { ParentBottomNav } from '../ui/DashboardBottomNav';\r\nimport { ParentSidebar } from '../ui/DashboardSidebar';\r\nimport DonutChart from '../ui/DonutChart';\r\nimport GlobalSearchScreen from '../shared/GlobalSearchScreen';\r\n\r\nimport { supabase } from '../../lib/supabase';\r\nimport { getHomeworkStatus } from '../../utils/homeworkUtils';\r\n\r\n// Import all view components\r\nimport ExamSchedule from '../shared/ExamSchedule';\r\nimport NoticeboardScreen from '../shared/NoticeboardScreen';\r\nimport NotificationsScreen from '../shared/NotificationsScreen';\r\nimport CalendarScreen from '../shared/CalendarScreen';\r\nimport LibraryScreen from '../shared/LibraryScreen';\r\nimport BusRouteScreen from '../shared/BusRouteScreen';\r\nimport FeeStatusScreen from '../parent/FeeStatusScreen';\r\nimport ReportCardScreen from '../parent/ReportCardScreen';\r\nimport SelectChildForReportScreen from '../parent/SelectChildForReportScreen';\r\nimport TimetableScreen from '../shared/TimetableScreen';\r\nimport ParentProfileScreen from '../parent/ParentProfileScreen';\r\nimport EditParentProfileScreen from '../parent/EditParentProfileScreen';\r\nimport FeedbackScreen from '../parent/FeedbackScreen';\r\nimport ParentNotificationSettingsScreen from '../parent/ParentNotificationSettingsScreen';\r\nimport ParentSecurityScreen from '../parent/ParentSecurityScreen';\r\nimport LearningResourcesScreen from '../parent/LearningResourcesScreen';\r\nimport SchoolPoliciesScreen from '../parent/SchoolPoliciesScreen';\r\nimport PTAMeetingScreen from '../parent/PTAMeetingScreen';\r\nimport ParentPhotoGalleryScreen from '../parent/ParentPhotoGalleryScreen';\r\nimport VolunteeringScreen from '../parent/VolunteeringScreen';\r\nimport PermissionSlipScreen from '../parent/PermissionSlipScreen';\r\nimport AppointmentScreen from '../parent/AppointmentScreen';\r\nimport AIParentingTipsScreen from '../parent/AIParentingTips';\r\nimport ParentMessagesScreen from '../parent/ParentMessagesScreen';\r\nimport ParentNewChatScreen from '../parent/ParentNewChatScreen';\r\nimport ChatScreen from '../shared/ChatScreen';\r\nimport SchoolUtilitiesScreen from '../parent/SchoolUtilitiesScreen';\r\n\r\n// Phase 5: Parent & Community Empowerment Components\r\nimport VolunteerSignup from '../parent/VolunteerSignup';\r\nimport ConferenceScheduling from '../shared/ConferenceScheduling';\r\nimport SurveysAndPolls from '../shared/SurveysAndPolls';\r\nimport DonationPortal from '../shared/DonationPortal';\r\nimport CommunityResourceDirectory from '../shared/CommunityResourceDirectory';\r\nimport ReferralSystem from '../shared/ReferralSystem';\r\nimport PanicButton from '../shared/PanicButton';\r\nimport MentalHealthResources from '../shared/MentalHealthResources';\r\n\r\n\r\nconst DashboardSuspenseFallback = () => (\r\n    <div className=\"flex justify-center items-center h-full p-8\">\r\n        <div className=\"w-10 h-10 border-4 border-t-4 border-gray-200 border-t-green-600 rounded-full animate-spin\"></div>\r\n    </div>\r\n);\r\n\r\ninterface ViewStackItem {\r\n    view: string;\r\n    props?: any;\r\n    title: string;\r\n}\r\n\r\nconst StatItem = ({ icon, label, value, colorClass }: { icon: React.ReactNode, label: string, value: string | React.ReactNode, colorClass: string }) => (\r\n    <div className=\"flex items-center space-x-3\">\r\n        <div className={`p-2 rounded-lg ${colorClass}`}>\r\n            {icon}\r\n        </div>\r\n        <div>\r\n            <p className=\"text-xs text-gray-700\">{label}</p>\r\n            <p className=\"font-bold text-sm text-gray-800\">{value}</p>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nconst ChildStatCard: React.FC<{ data: any, navigateTo: (view: string, title: string, props?: any) => void, colorTheme: { bg: string, text: string } }> = ({ data, navigateTo, colorTheme }) => {\r\n    const { student, feeInfo, nextHomework, attendancePercentage } = data;\r\n    const formattedClassName = getFormattedClassName(student.grade, student.section);\r\n\r\n    const feeStatus = feeInfo ? (\r\n        <div className=\"flex flex-col\">\r\n            <span className={feeInfo.status === 'overdue' ? 'text-red-600 font-bold' : 'text-gray-800 font-semibold'}>\r\n                {new Intl.NumberFormat('en-NG', { style: 'currency', currency: 'NGN', minimumFractionDigits: 0 }).format(feeInfo.totalDue)}\r\n            </span>\r\n            {feeInfo.nextDueDate && (\r\n                <span className=\"text-xs text-gray-500 mt-0.5\">\r\n                    Due: {new Date(feeInfo.nextDueDate).toLocaleDateString('en-GB')}\r\n                </span>\r\n            )}\r\n        </div>\r\n    ) : <span className=\"text-green-600 font-semibold\">All Paid</span>;\r\n\r\n    return (\r\n        <div className=\"bg-white rounded-2xl shadow-md overflow-hidden\">\r\n            <div className=\"p-4\" style={{ backgroundColor: `${colorTheme.bg}1A` }}>\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                        <img src={student.avatarUrl} alt={student.name} className=\"w-14 h-14 rounded-full object-cover border-2\" style={{ borderColor: colorTheme.bg }} />\r\n                        <div>\r\n                            <h3 className=\"font-bold text-lg text-gray-800\">{student.name}</h3>\r\n                            <p className=\"text-sm font-semibold\" style={{ color: colorTheme.text }}>{formattedClassName}</p>\r\n                        </div>\r\n                    </div>\r\n                    <button onClick={() => navigateTo('childDetail', student.name, { student: student })} className=\"bg-white p-2 rounded-full shadow-sm hover:bg-gray-100\">\r\n                        <ChevronRightIcon className=\"text-gray-600\" />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"px-4 py-3 grid grid-cols-2 gap-4 border-t border-gray-100\">\r\n                <StatItem icon={<AttendanceSummaryIcon className=\"h-5 w-5 text-green-600\" />} label=\"Attendance\" value={`${attendancePercentage}%`} colorClass=\"bg-green-100\" />\r\n                <StatItem icon={<ReceiptIcon className=\"h-5 w-5 text-red-600\" />} label=\"Fees Due\" value={feeStatus} colorClass=\"bg-red-100\" />\r\n                {nextHomework && <StatItem icon={<ClipboardListIcon className=\"h-5 w-5 text-purple-600\" />} label=\"Homework\" value={`${nextHomework.subject}`} colorClass=\"bg-purple-100\" />}\r\n                <StatItem icon={<ReportIcon className=\"h-5 w-5 text-sky-600\" />} label=\"Report Card\" value=\"View\" colorClass=\"bg-sky-100\" />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst AcademicsTab = ({ student, navigateTo }: { student: Student; navigateTo: (view: string, title: string, props?: any) => void }) => {\r\n    const [assignments, setAssignments] = useState<StudentAssignment[]>([]);\r\n    const [progressReport, setProgressReport] = useState<ProgressReport | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchAcademics = async () => {\r\n            try {\r\n                // Fetch Assignments\r\n                const { data: assignmentsData } = await supabase\r\n                    .from('assignments')\r\n                    .select('*')\r\n                    .or(`class_name.ilike.%${student.grade}%,class_name.ilike.%${student.section}%`)\r\n                    .gt('due_date', new Date().toISOString())\r\n                    .order('due_date', { ascending: true });\r\n\r\n                const { data: submissionsData } = await supabase\r\n                    .from('assignment_submissions')\r\n                    .select('*')\r\n                    .eq('student_id', student.id);\r\n\r\n                if (assignmentsData) {\r\n                    const merged: StudentAssignment[] = assignmentsData.map((a: any) => ({\r\n                        id: a.id,\r\n                        title: a.title,\r\n                        description: a.description,\r\n                        className: a.class_name,\r\n                        subject: a.subject,\r\n                        dueDate: a.due_date,\r\n                        totalStudents: 0, // Not needed for parent view usually\r\n                        submissionsCount: 0,\r\n                        submission: submissionsData?.find((s: any) => s.assignment_id === a.id) ? {\r\n                            id: submissionsData.find((s: any) => s.assignment_id === a.id).id,\r\n                            assignmentId: a.id,\r\n                            student: { id: student.id, name: student.name, avatarUrl: student.avatarUrl },\r\n                            submittedAt: submissionsData.find((s: any) => s.assignment_id === a.id).submitted_at,\r\n                            isLate: false, // Calc if needed\r\n                            status: submissionsData.find((s: any) => s.assignment_id === a.id).grade ? 'Graded' : 'Ungraded',\r\n                            grade: submissionsData.find((s: any) => s.assignment_id === a.id).grade\r\n                        } : undefined\r\n                    }));\r\n                    setAssignments(merged);\r\n                }\r\n\r\n                // Fetch AI Progress Report (Mock table or generating on fly? Using mock structure for now but implied DB)\r\n                // For now, let's assume we might store this in a 'progress_reports' table or similar.\r\n                // Since schema might not have it, we'll leave it null or try to fetch if table exists.\r\n                // Skipping distinct table fetch for now to keep it simple, or use empty.\r\n\r\n            } catch (err) {\r\n                console.error(\"Error fetching academics:\", err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchAcademics();\r\n    }, [student]);\r\n\r\n    // Calculate Average from Academic Performance (already on student object)\r\n    const averageScore = useMemo(() => {\r\n        if (!student.academicPerformance?.length) return 0;\r\n        return Math.round(student.academicPerformance.reduce((acc, curr) => acc + curr.score, 0) / student.academicPerformance.length);\r\n    }, [student]);\r\n\r\n    return (\r\n        <div className=\"p-4 space-y-4\">\r\n            {/* NEW AI Parenting Tips Button */}\r\n            <div className=\"bg-gradient-to-r from-green-500 to-teal-500 p-4 rounded-2xl shadow-lg flex items-center justify-between text-white\">\r\n                <div>\r\n                    <h3 className=\"font-bold text-lg\">Personalized Advice</h3>\r\n                    <p className=\"text-sm opacity-90\">Get AI-powered tips for your child.</p>\r\n                </div>\r\n                <button\r\n                    onClick={() => navigateTo('aiParentingTips', 'AI Parenting Tips', { student })}\r\n                    className=\"bg-white/20 px-4 py-2 rounded-lg font-semibold hover:bg-white/30 transition-colors flex items-center space-x-2\"\r\n                >\r\n                    <SparklesIcon className=\"h-5 w-5\" />\r\n                    <span>Get Tips</span>\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n                {/* Term Performance */}\r\n                <div className=\"bg-white p-4 rounded-xl shadow-sm\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <div>\r\n                            <h4 className=\"font-bold text-gray-800\">Term Performance</h4>\r\n                            <p className=\"text-sm text-gray-700\">Current Term</p>\r\n                        </div>\r\n                        {averageScore > 0 && (\r\n                            <div className=\"text-right\">\r\n                                <p className=\"font-bold text-2xl text-green-600\">{averageScore}%</p>\r\n                                <p className=\"text-xs text-gray-700\">Overall Average</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    {student.academicPerformance && student.academicPerformance.length > 0 ? (\r\n                        <div className=\"mt-3 space-y-2\">\r\n                            {student.academicPerformance.map((grade, i) => (\r\n                                <div key={i} className=\"flex justify-between items-center bg-gray-50 p-2 rounded-lg\">\r\n                                    <span className=\"font-semibold text-sm text-gray-700\">{grade.subject}</span>\r\n                                    <span className=\"font-bold text-sm text-gray-800\">{grade.score}%</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ) : <p className=\"text-sm text-gray-500 mt-2\">No grades recorded yet.</p>}\r\n                </div>\r\n\r\n                {/* Homework */}\r\n                <div className=\"bg-white p-4 rounded-xl shadow-sm\">\r\n                    <h4 className=\"font-bold text-gray-800 mb-3\">Upcoming Homework</h4>\r\n                    <div className=\"space-y-3\">\r\n                        {assignments.length > 0 ? assignments.map(hw => {\r\n                            const status = getHomeworkStatus(hw);\r\n                            return (\r\n                                <div key={hw.id} className=\"flex justify-between items-center border-b pb-2 last:border-b-0\">\r\n                                    <div>\r\n                                        <p className=\"font-bold text-gray-800\">{hw.title}</p>\r\n                                        <p className=\"text-sm text-gray-700\">{hw.subject} &bull; Due {new Date(hw.dueDate).toLocaleDateString('en-GB')}</p>\r\n                                    </div>\r\n                                    <div className={`flex items-center space-x-2 text-xs font-semibold px-2 py-1 rounded-full ${status.bg} ${status.color}`}>\r\n                                        {React.cloneElement(status.icon as any, { className: `h-4 w-4 ${status.isComplete ? 'animate-checkmark-pop' : ''}`.trim() })}\r\n                                        <span>{status.text}</span>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        }) : <p className=\"text-sm text-gray-700 text-center\">No upcoming homework.</p>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst BehaviorTab = ({ student }: { student: Student }) => {\r\n    // Behavior notes should ideally come from Supabase too, likely 'behavior_logs' table.\r\n    // Assuming student object has them populated for now (which requires fetching in Dashboard)\r\n    return (\r\n        <div className=\"p-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {student.behaviorNotes && student.behaviorNotes.length > 0 ? [...student.behaviorNotes].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()).map(note => {\r\n                    const isPositive = note.type === 'Positive';\r\n                    return (\r\n                        <div key={note.id} className={`p-4 rounded-xl border-l-4 ${isPositive ? 'bg-green-50 border-green-400' : 'bg-red-50 border-red-400'}`}>\r\n                            <div className=\"flex justify-between items-start\">\r\n                                <h5 className={`font-bold ${isPositive ? 'text-green-800' : 'text-red-800'}`}>{note.title}</h5>\r\n                                <p className=\"text-xs text-gray-700 font-medium flex-shrink-0 ml-2\">{new Date(note.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</p>\r\n                            </div>\r\n                            <p className=\"text-sm text-gray-700 mt-1\">{note.note}</p>\r\n                            {note.suggestions && (\r\n                                <div className=\"mt-3 pt-3 border-t border-gray-200\">\r\n                                    <h6 className=\"font-semibold text-xs text-gray-600\">Suggestions for Home:</h6>\r\n                                    <ul className=\"list-disc list-inside text-sm text-gray-700 mt-1 space-y-1\">\r\n                                        {note.suggestions.map((s, i) => <li key={i}>{s}</li>)}\r\n                                    </ul>\r\n                                </div>\r\n                            )}\r\n                            <p className=\"text-xs text-gray-600 text-right mt-2 italic\">- {note.by}</p>\r\n                        </div>\r\n                    );\r\n                }) : <p className=\"md:col-span-2 text-sm text-gray-700 text-center py-8\">No behavioral notes recorded.</p>}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst AttendanceTab = ({ student }: { student: Student }) => {\r\n    const [attendance, setAttendance] = useState<StudentAttendance[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchAttendance = async () => {\r\n            const { data } = await supabase\r\n                .from('student_attendance')\r\n                .select('*')\r\n                .eq('student_id', student.id);\r\n\r\n            if (data) {\r\n                setAttendance(data.map((a: any) => ({\r\n                    id: a.id,\r\n                    studentId: a.student_id,\r\n                    date: a.date,\r\n                    status: a.status\r\n                })));\r\n            }\r\n            setLoading(false);\r\n        };\r\n        fetchAttendance();\r\n    }, [student.id]);\r\n\r\n    const [currentDate, setCurrentDate] = useState(new Date());\r\n\r\n    const attendanceMap = useMemo(() => {\r\n        const map = new Map<string, AttendanceStatus>();\r\n        attendance.forEach(att => map.set(att.date, att.status));\r\n        return map;\r\n    }, [attendance]);\r\n\r\n    const firstDayOfMonth = useMemo(() => new Date(currentDate.getFullYear(), currentDate.getMonth(), 1), [currentDate]);\r\n    const daysInMonth = useMemo(() => new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate(), [currentDate]);\r\n    const startingDayIndex = firstDayOfMonth.getDay();\r\n\r\n    const goToPreviousMonth = () => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1));\r\n    const goToNextMonth = () => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1));\r\n\r\n    const attendanceColors: { [key in AttendanceStatus]: string } = {\r\n        Present: 'bg-green-400 text-white',\r\n        Absent: 'bg-red-400 text-white',\r\n        Late: 'bg-blue-400 text-white',\r\n        Leave: 'bg-gray-200 text-gray-500',\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-4 bg-white rounded-xl shadow-sm\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n                <button onClick={goToPreviousMonth} className=\"p-2 rounded-full hover:bg-gray-100\"><ChevronLeftIcon className=\"h-5 w-5 text-gray-600\" /></button>\r\n                <h3 className=\"font-bold text-lg text-gray-800\">{currentDate.toLocaleString('default', { month: 'long', year: 'numeric' })}</h3>\r\n                <button onClick={goToNextMonth} className=\"p-2 rounded-full hover:bg-gray-100\"><ChevronRightIcon /></button>\r\n            </div>\r\n            <div className=\"grid grid-cols-7 gap-1 text-center text-xs font-semibold text-gray-700 mb-2\">\r\n                {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map(day => <div key={day}>{day}</div>)}\r\n            </div>\r\n            <div className=\"grid grid-cols-7 gap-2\">\r\n                {Array.from({ length: startingDayIndex }).map((_, index) => <div key={`empty-${index}`} />)}\r\n                {Array.from({ length: daysInMonth }).map((_, index) => {\r\n                    const day = index + 1;\r\n                    const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);\r\n                    const dateString = date.toISOString().split('T')[0];\r\n                    const status = attendanceMap.get(dateString);\r\n                    return (\r\n                        <div key={day} className={`w-9 h-9 flex items-center justify-center rounded-full text-sm font-semibold ${status ? attendanceColors[status] : 'bg-gray-100 text-gray-400'}`}>\r\n                            {day}\r\n                        </div>\r\n                    )\r\n                })}\r\n            </div>\r\n            <div className=\"flex justify-center space-x-3 mt-4 text-xs\">\r\n                <span className=\"flex items-center\"><div className=\"w-3 h-3 rounded-full bg-green-400 mr-1.5\"></div>Present</span>\r\n                <span className=\"flex items-center\"><div className=\"w-3 h-3 rounded-full bg-red-400 mr-1.5\"></div>Absent</span>\r\n                <span className=\"flex items-center\"><div className=\"w-3 h-3 rounded-full bg-blue-400 mr-1.5\"></div>Late</span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\ntype ChildDetailTab = 'academics' | 'behavior' | 'attendance';\r\n\r\nconst ChildDetailScreen = ({ student, initialTab, navigateTo }: { student: Student, initialTab?: ChildDetailTab, navigateTo: (view: string, title: string, props?: any) => void }) => {\r\n    const [activeTab, setActiveTab] = useState<ChildDetailTab>(initialTab || 'academics');\r\n\r\n    const TabButton = ({ id, label }: { id: ChildDetailTab, label: string }) => (\r\n        <button\r\n            onClick={() => setActiveTab(id)}\r\n            className={`flex-1 py-2 text-sm font-semibold rounded-md transition-colors ${activeTab === id ? 'bg-green-500 text-white shadow' : 'text-gray-800'\r\n                }`}\r\n        >\r\n            {label}\r\n        </button>\r\n    );\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-gray-50\">\r\n            {/* Child Header */}\r\n            <div className=\"p-4 bg-white flex items-center space-x-4\">\r\n                <img src={student.avatarUrl} alt={student.name} className=\"w-16 h-16 rounded-full object-cover border-4 border-green-100\" />\r\n                <div>\r\n                    <h3 className=\"text-xl font-bold text-gray-800\">{student.name}</h3>\r\n                    <p className=\"text-gray-700 font-medium\">{getFormattedClassName(student.grade, student.section)}</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"px-4 py-2 bg-white\">\r\n                <div className=\"flex space-x-1 bg-gray-200 p-1 rounded-lg\">\r\n                    <TabButton id=\"academics\" label=\"Academics\" />\r\n                    <TabButton id=\"behavior\" label=\"Behavior\" />\r\n                    <TabButton id=\"attendance\" label=\"Attendance\" />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex-grow overflow-y-auto\">\r\n                {activeTab === 'academics' && <AcademicsTab student={student} navigateTo={navigateTo} />}\r\n                {activeTab === 'behavior' && <BehaviorTab student={student} />}\r\n                {activeTab === 'attendance' && <div className=\"p-4\"><AttendanceTab student={student} /></div>}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Dashboard = ({ navigateTo, parentId }: { navigateTo: (view: string, title: string, props?: any) => void, parentId?: number | null }) => {\r\n    const theme = THEME_CONFIG[DashboardType.Parent];\r\n    const [students, setStudents] = useState<Student[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchChildren = async () => {\r\n            const fetchStudents = async (ids: number[]) => {\r\n                const { data: studentsData, error: studentsError } = await supabase\r\n                    .from('students')\r\n                    .select('*')\r\n                    .in('id', ids);\r\n\r\n                if (studentsError) throw studentsError;\r\n\r\n                // Map DB students to frontend Student type\r\n                const mappedStudents: Student[] = studentsData.map((s: any) => ({\r\n                    id: s.id,\r\n                    name: s.name,\r\n                    email: s.user?.email || '', // Assuming joined or empty\r\n                    avatarUrl: s.avatar_url || 'https://via.placeholder.com/150',\r\n                    grade: s.grade,\r\n                    section: s.section,\r\n                    department: s.department,\r\n                    attendanceStatus: s.attendance_status || 'Present',\r\n                    birthday: s.birthday,\r\n                    academicPerformance: [],\r\n                    behaviorNotes: [],\r\n                    reportCards: []\r\n                }));\r\n                setStudents(mappedStudents);\r\n            };\r\n\r\n            try {\r\n                if (!parentId) {\r\n                    // Fallback for demo/dev if no parentId passed yet\r\n                    const { data: fallbackParent } = await supabase\r\n                        .from('parents')\r\n                        .select('id')\r\n                        .limit(1)\r\n                        .single();\r\n\r\n                    if (fallbackParent) {\r\n                        // Use first found parent as fallback\r\n                        const { data: relations } = await supabase.from('parent_children').select('student_id').eq('parent_id', fallbackParent.id);\r\n                        if (relations) {\r\n                            const studentIds = relations.map(r => r.student_id);\r\n                            fetchStudents(studentIds);\r\n                        }\r\n                    }\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n\r\n                // 2. Get Children IDs\r\n                const { data: relations, error: relationError } = await supabase\r\n                    .from('parent_children')\r\n                    .select('student_id')\r\n                    .eq('parent_id', parentId);\r\n\r\n                if (relationError) throw relationError;\r\n\r\n                if (relations && relations.length > 0) {\r\n                    const studentIds = relations.map(r => r.student_id);\r\n                    await fetchStudents(studentIds);\r\n                } else {\r\n                    setStudents([]);\r\n                }\r\n\r\n            } catch (err) {\r\n                // Silent fail or warn in dev\r\n                if (import.meta.env.DEV) console.warn(\"Error fetching children:\", err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n\r\n\r\n        fetchChildren();\r\n    }, [parentId]);\r\n\r\n    const [notifications, setNotifications] = useState<any[]>([]);\r\n\r\n    useEffect(() => {\r\n        // Fetch Notifications\r\n        const fetchNotifications = async () => {\r\n            const { data } = await supabase\r\n                .from('notifications')\r\n                .select('*')\r\n                .eq('is_read', false)\r\n                .contains('audience', ['parent']);\r\n            if (data) setNotifications(data);\r\n        };\r\n        fetchNotifications();\r\n    }, []);\r\n\r\n    const notificationCount = notifications.length;\r\n\r\n    // We need to fetch extra info for each child (fee, attendance stat) to populate the cards\r\n    const [childrenStats, setChildrenStats] = useState<any[]>([]);\r\n\r\n    useEffect(() => {\r\n        const fetchStats = async () => {\r\n            if (students.length === 0) return;\r\n\r\n            const stats = await Promise.all(students.map(async (student) => {\r\n                // Fee - Query from fees table (not student_fees)\r\n                const { data: feesData } = await supabase\r\n                    .from('fees')\r\n                    .select('*')\r\n                    .eq('student_id', student.id)\r\n                    .in('status', ['pending', 'partial'])\r\n                    .order('due_date', { ascending: true });\r\n\r\n                const feeInfo = feesData && feesData.length > 0 ? {\r\n                    totalDue: feesData.reduce((sum, fee) => sum + (fee.amount - (fee.paid_amount || 0)), 0),\r\n                    nextDueDate: feesData[0]?.due_date,\r\n                    status: feesData[0]?.status || 'pending',\r\n                    count: feesData.length\r\n                } : null;\r\n\r\n                // Attendance %\r\n                const { count: totalAtt } = await supabase\r\n                    .from('student_attendance')\r\n                    .select('id', { count: 'exact', head: true })\r\n                    .eq('student_id', student.id);\r\n\r\n                const { count: presentAtt } = await supabase\r\n                    .from('student_attendance')\r\n                    .select('id', { count: 'exact', head: true })\r\n                    .eq('student_id', student.id)\r\n                    .eq('status', 'Present');\r\n\r\n                const attendancePercentage = totalAtt && totalAtt > 0 ? Math.round(((presentAtt || 0) / totalAtt) * 100) : 0;\r\n\r\n                // Next Homework\r\n                const { data: homework } = await supabase\r\n                    .from('assignments')\r\n                    .select('*')\r\n                    .or(`class_name.ilike.%${student.grade}%,class_name.ilike.%${student.section}%`)\r\n                    .gt('due_date', new Date().toISOString())\r\n                    .order('due_date', { ascending: true })\r\n                    .limit(1)\r\n                    .single();\r\n\r\n                return {\r\n                    student,\r\n                    feeInfo,\r\n                    nextHomework: homework ? { subject: homework.subject, title: homework.title } : null,\r\n                    attendancePercentage\r\n                };\r\n            }));\r\n\r\n            setChildrenStats(stats);\r\n        };\r\n\r\n        fetchStats();\r\n\r\n        // Real-time subscriptions for updates\r\n        const studentIds = students.map(s => s.id);\r\n\r\n        // Subscribe to fee updates\r\n        const feeChannel = supabase.channel('parent_fees_realtime')\r\n            .on('postgres_changes', {\r\n                event: '*',\r\n                schema: 'public',\r\n                table: 'student_fees',\r\n                filter: `student_id=in.(${studentIds.join(',')})`\r\n            }, () => {\r\n                console.log('Fee update received, refreshing...');\r\n                fetchStats(); // Refresh stats when fees change\r\n            })\r\n            .subscribe();\r\n\r\n        // Subscribe to attendance updates\r\n        const attendanceChannel = supabase.channel('parent_attendance_realtime')\r\n            .on('postgres_changes', {\r\n                event: '*',\r\n                schema: 'public',\r\n                table: 'student_attendance',\r\n                filter: `student_id=in.(${studentIds.join(',')})`\r\n            }, () => {\r\n                console.log('Attendance update received, refreshing...');\r\n                fetchStats(); // Refresh stats when attendance changes\r\n            })\r\n            .subscribe();\r\n\r\n        // Subscribe to fees table updates (new fee assignments)\r\n        const feesChannel = supabase.channel('parent_fees_table_realtime')\r\n            .on('postgres_changes', {\r\n                event: '*',\r\n                schema: 'public',\r\n                table: 'fees',\r\n                filter: `student_id=in.(${studentIds.join(',')})`\r\n            }, () => {\r\n                console.log('New fee assigned, refreshing...');\r\n                fetchStats(); // Refresh when new fees are assigned\r\n            })\r\n            .subscribe();\r\n\r\n        return () => {\r\n            supabase.removeChannel(feeChannel);\r\n            supabase.removeChannel(attendanceChannel);\r\n            supabase.removeChannel(feesChannel);\r\n        };\r\n    }, [students]);\r\n\r\n    const quickAccessItems = [\r\n        { label: 'Bus Route', icon: <BusVehicleIcon className=\"h-7 w-7\" />, action: () => navigateTo('busRoute', 'Bus Route') },\r\n        { label: 'Calendar', icon: <CalendarIcon className=\"h-7 w-7\" />, action: () => navigateTo('calendar', 'School Calendar') },\r\n        { label: 'Noticeboard', icon: <MegaphoneIcon className=\"h-7 w-7\" />, action: () => navigateTo('noticeboard', 'Noticeboard') },\r\n        { label: 'Appointments', icon: <CalendarPlusIcon className=\"h-7 w-7\" />, action: () => navigateTo('appointments', 'Book Appointment') },\r\n    ];\r\n\r\n    const childColorThemes = [{ bg: '#3b82f6', text: '#1e40af' }, { bg: '#ec4899', text: '#831843' }];\r\n\r\n    return (\r\n        <div className=\"p-4 lg:p-6 bg-gray-50\">\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* Main content */}\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    {childrenStats.map((data, index) => (\r\n                        <ChildStatCard key={data.student.id} data={data} navigateTo={navigateTo} colorTheme={childColorThemes[index % childColorThemes.length]} />\r\n                    ))}\r\n                </div>\r\n                {/* Sidebar */}\r\n                <div className=\"lg:col-span-1 space-y-6\">\r\n                    <div>\r\n                        <div className=\"flex justify-between items-center mb-2 px-1\">\r\n                            <h3 className=\"text-lg font-bold text-gray-800\">School Utilities</h3>\r\n                            <button onClick={() => navigateTo('schoolUtilities', 'School Utilities')} className=\"text-sm text-blue-600 hover:text-blue-800 font-medium\">View All</button>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-2 gap-3\">\r\n                            {quickAccessItems.map((item) => (\r\n                                <button key={item.label} onClick={item.action} className=\"bg-white p-3 rounded-2xl shadow-sm flex flex-col items-center justify-center space-y-2 hover:bg-gray-100 transition-colors\">\r\n                                    <div className=\"text-gray-600\">{item.icon}</div>\r\n                                    <span className=\"font-semibold text-gray-700 text-center text-xs\">{item.label}</span>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface ParentDashboardProps {\r\n    onLogout: () => void;\r\n    setIsHomePage: (isHome: boolean) => void;\r\n    currentUser: any;\r\n}\r\n\r\nimport { useRealtimeNotifications } from '../../hooks/useRealtimeNotifications';\r\n\r\n// ... (top level)\r\n\r\nconst ParentDashboard: React.FC<ParentDashboardProps> = ({ onLogout, setIsHomePage, currentUser }) => {\r\n    const [viewStack, setViewStack] = useState<ViewStackItem[]>([{ view: 'dashboard', title: 'Parent Dashboard' }]);\r\n    const [activeBottomNav, setActiveBottomNav] = useState('home');\r\n    const [version, setVersion] = useState(0);\r\n    const [isSearchOpen, setIsSearchOpen] = useState(false);\r\n    const [parentId, setParentId] = useState<number | null>(null);\r\n    const [parentProfile, setParentProfile] = useState<{ name: string; avatarUrl: string }>({\r\n        name: 'Parent',\r\n        avatarUrl: 'https://i.pravatar.cc/150?u=parent'\r\n    });\r\n\r\n    // Real-time notifications\r\n    const notificationCount = useRealtimeNotifications('parent');\r\n\r\n    const forceUpdate = () => setVersion(v => v + 1);\r\n\r\n    const fetchProfile = async () => {\r\n        let query = supabase.from('parents').select('id, name, email, phone, avatar_url');\r\n\r\n        if (currentUser?.email) {\r\n            query = query.eq('email', currentUser.email);\r\n        } else {\r\n            // Fallback for dev/demo if no user is passed\r\n            const { data: demo } = await supabase.from('parents').select('id, name, email, phone').limit(1).single();\r\n            if (demo) {\r\n                setParentId(demo.id);\r\n                setParentProfile({ name: demo.name || 'Parent', avatarUrl: 'https://i.pravatar.cc/150?u=parent' });\r\n                return;\r\n            }\r\n        }\r\n\r\n        const { data, error } = await query.single();\r\n\r\n        if (error) {\r\n            console.error('Error fetching parent profile:', error);\r\n            return;\r\n        }\r\n\r\n        if (data) {\r\n            setParentId(data.id);\r\n            setParentProfile({\r\n                name: data.name || 'Parent',\r\n                avatarUrl: data.avatar_url || 'https://i.pravatar.cc/150?u=parent'\r\n            });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchProfile();\r\n    }, [currentUser]);\r\n\r\n    useEffect(() => {\r\n        const currentView = viewStack[viewStack.length - 1];\r\n        setIsHomePage(currentView.view === 'dashboard' && !isSearchOpen);\r\n    }, [viewStack, isSearchOpen, setIsHomePage]);\r\n\r\n    // Navigate function for reuse\r\n    const navigateTo = (view: string, title: string, props: any = {}) => {\r\n        setViewStack(stack => [...stack, { view, props, title }]);\r\n    };\r\n\r\n    const handleBack = () => {\r\n        if (viewStack.length > 1) {\r\n            setViewStack(stack => stack.slice(0, -1));\r\n        }\r\n    };\r\n\r\n    const handleBottomNavClick = (screen: string) => {\r\n        setActiveBottomNav(screen);\r\n        switch (screen) {\r\n            case 'home':\r\n                setViewStack([{ view: 'dashboard', title: 'Parent Dashboard' }]);\r\n                break;\r\n            case 'fees':\r\n                setViewStack([{ view: 'feeStatus', title: 'Fee Status' }]);\r\n                break;\r\n            case 'reports':\r\n                setViewStack([{ view: 'selectReport', title: 'Select Report Card' }]);\r\n                break;\r\n            case 'messages':\r\n                setViewStack([{ view: 'messages', title: 'Messages' }]);\r\n                break;\r\n            case 'more':\r\n                setViewStack([{ view: 'more', title: 'More Options' }]);\r\n                break;\r\n            default:\r\n                setViewStack([{ view: 'dashboard', title: 'Parent Dashboard' }]);\r\n        }\r\n    };\r\n\r\n    const handleNotificationClick = () => {\r\n        navigateTo('notifications', 'Notifications', {});\r\n    };\r\n\r\n    const viewComponents: { [key: string]: React.ComponentType<any> } = {\r\n        dashboard: Dashboard,\r\n        childDetail: ChildDetailScreen,\r\n        examSchedule: ExamSchedule,\r\n        noticeboard: (props: any) => <NoticeboardScreen {...props} userType=\"parent\" />,\r\n        notifications: (props: any) => <NotificationsScreen {...props} userType=\"parent\" navigateTo={navigateTo} />,\r\n        calendar: CalendarScreen,\r\n        library: LibraryScreen,\r\n        busRoute: BusRouteScreen,\r\n        feeStatus: (props: any) => <FeeStatusScreen {...props} parentId={parentId} />,\r\n        selectReport: (props: any) => <SelectChildForReportScreen {...props} parentId={parentId} />,\r\n        reportCard: ReportCardScreen,\r\n        timetable: TimetableScreen,\r\n        more: ParentProfileScreen,\r\n        editParentProfile: EditParentProfileScreen,\r\n        feedback: FeedbackScreen,\r\n        notificationSettings: ParentNotificationSettingsScreen,\r\n        securitySettings: ParentSecurityScreen,\r\n        learningResources: LearningResourcesScreen,\r\n        schoolPolicies: SchoolPoliciesScreen,\r\n        ptaMeetings: PTAMeetingScreen,\r\n        photoGallery: ParentPhotoGalleryScreen,\r\n        volunteering: VolunteeringScreen,\r\n        permissionSlips: PermissionSlipScreen,\r\n        appointments: AppointmentScreen,\r\n        aiParentingTips: AIParentingTipsScreen,\r\n        messages: ParentMessagesScreen,\r\n        newChat: ParentNewChatScreen,\r\n        chat: (props: any) => <ChatScreen {...props} currentUserId={parentId ?? 100} />,\r\n        schoolUtilities: SchoolUtilitiesScreen,\r\n\r\n        // Phase 5: Parent & Community Empowerment\r\n        volunteerSignup: VolunteerSignup,\r\n        conferenceScheduling: ConferenceScheduling,\r\n        surveysAndPolls: SurveysAndPolls,\r\n        donationPortal: DonationPortal,\r\n        communityResources: CommunityResourceDirectory,\r\n        referralSystem: ReferralSystem,\r\n        panicButton: PanicButton,\r\n        mentalHealthResources: MentalHealthResources,\r\n    };\r\n\r\n    const currentNavigation = viewStack[viewStack.length - 1];\r\n    const ComponentToRender = viewComponents[currentNavigation.view];\r\n\r\n    const commonProps = {\r\n        navigateTo,\r\n        onLogout,\r\n        handleBack,\r\n        forceUpdate,\r\n        parentId,\r\n        currentUser\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-screen w-full overflow-hidden bg-gray-100\">\r\n            {/* Desktop Sidebar - Hidden on mobile, fixed on desktop */}\r\n            <div className=\"hidden md:flex w-64 flex-col fixed inset-y-0 left-0 z-50\">\r\n                <ParentSidebar\r\n                    activeScreen={activeBottomNav}\r\n                    setActiveScreen={handleBottomNavClick}\r\n                    onLogout={onLogout}\r\n                />\r\n            </div>\r\n\r\n            {/* Main Content Area */}\r\n            <div className=\"flex-1 flex flex-col h-screen w-full md:ml-64 overflow-hidden\">\r\n                <Header\r\n                    title={currentNavigation.title}\r\n                    avatarUrl={parentProfile.avatarUrl}\r\n                    bgColor={THEME_CONFIG[DashboardType.Parent].mainBg}\r\n                    onLogout={onLogout}\r\n                    onBack={viewStack.length > 1 ? handleBack : undefined}\r\n                    onNotificationClick={handleNotificationClick}\r\n                    notificationCount={notificationCount}\r\n                    onSearchClick={() => setIsSearchOpen(true)}\r\n                />\r\n\r\n                <div className=\"flex-1 overflow-hidden relative\">\r\n                    {/* Search Overlay */}\r\n                    {isSearchOpen && (\r\n                        <div className=\"absolute inset-0 z-50 bg-white\">\r\n                            <GlobalSearchScreen onClose={() => setIsSearchOpen(false)} navigateTo={navigateTo} dashboardType={DashboardType.Parent} />\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"h-full overflow-y-auto pb-20 md:pb-6\">\r\n                        <Suspense fallback={<DashboardSuspenseFallback />}>\r\n                            <ComponentToRender {...commonProps} {...currentNavigation.props} />\r\n                        </Suspense>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Mobile Bottom Nav - Hidden on desktop */}\r\n                <div className=\"md:hidden\">\r\n                    <ParentBottomNav activeScreen={activeBottomNav} setActiveScreen={handleBottomNavClick} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ParentDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}