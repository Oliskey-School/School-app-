{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\parent\\\\SelectChildForReportScreen.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from '../../lib/supabase';\nimport { ChevronRightIcon, ReportIcon } from '../../constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SelectChildForReportScreen = ({\n  navigateTo,\n  parentId\n}) => {\n  const [children, setChildren] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchChildren = async () => {\n      if (!parentId) {\n        setLoading(false);\n        return;\n      }\n      try {\n        const {\n          data: relations\n        } = await supabase.from('parent_children').select('student_id').eq('parent_id', parentId);\n        if (relations && relations.length > 0) {\n          const studentIds = relations.map(r => r.student_id);\n          const {\n            data: students\n          } = await supabase.from('students').select('*').in('id', studentIds);\n          if (students) {\n            const mappedStudents = students.map(s => ({\n              id: s.id,\n              name: s.name,\n              avatarUrl: s.avatar_url,\n              grade: s.grade,\n              section: s.section\n            }));\n            setChildren(mappedStudents);\n          }\n        }\n      } catch (err) {\n        console.error(\"Error fetching children for report:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchChildren();\n  }, [parentId]);\n  if (loading) return _jsxDEV(\"div\", {\n    className: \"p-8 text-center\",\n    children: \"Loading children...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 23\n  }, this);\n  const handleSelectChild = student => {\n    navigateTo('reportCard', `${student.name}'s Report`, {\n      student\n    });\n  };\n  return _jsxDEV(\"div\", {\n    className: \"p-4 space-y-4 bg-gray-50 h-full\",\n    children: [_jsxDEV(\"div\", {\n      className: \"bg-green-50 p-4 rounded-xl text-center border border-green-200\",\n      children: [_jsxDEV(ReportIcon, {\n        className: \"h-10 w-10 mx-auto text-green-400 mb-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), _jsxDEV(\"h3\", {\n        className: \"font-bold text-lg text-green-800\",\n        children: \"Select a Child\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), _jsxDEV(\"p\", {\n        className: \"text-sm text-green-700\",\n        children: \"Choose a child to view their latest academic report card.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), _jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n      children: children.map(child => _jsxDEV(\"button\", {\n        onClick: () => handleSelectChild(child),\n        className: \"w-full bg-white rounded-xl shadow-sm p-4 flex items-center justify-between text-left hover:bg-gray-50 hover:ring-2 hover:ring-green-200 transition-all\",\n        children: [_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [child.avatarUrl ? _jsxDEV(\"img\", {\n            src: child.avatarUrl,\n            alt: child.name,\n            className: \"w-14 h-14 rounded-full object-cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this) : _jsxDEV(\"div\", {\n            className: \"w-14 h-14 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold text-xl\",\n            children: child.name.charAt(0)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 17\n          }, this), _jsxDEV(\"div\", {\n            children: [_jsxDEV(\"p\", {\n              className: \"font-bold text-gray-800\",\n              children: child.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 17\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Grade \", child.grade, child.section]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), _jsxDEV(ChevronRightIcon, {\n          className: \"text-gray-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this)]\n      }, child.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\nexport default SelectChildForReportScreen;","map":{"version":3,"names":["React","useState","useEffect","supabase","ChevronRightIcon","ReportIcon","jsxDEV","_jsxDEV","SelectChildForReportScreen","navigateTo","parentId","children","setChildren","loading","setLoading","fetchChildren","data","relations","from","select","eq","length","studentIds","map","r","student_id","students","in","mappedStudents","s","id","name","avatarUrl","avatar_url","grade","section","err","console","error","className","fileName","_jsxFileName","lineNumber","columnNumber","handleSelectChild","student","child","onClick","src","alt","charAt"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/parent/SelectChildForReportScreen.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { Student } from '../../types';\r\nimport { ChevronRightIcon, ReportIcon } from '../../constants';\r\n\r\ninterface SelectChildForReportScreenProps {\r\n  navigateTo: (view: string, title: string, props?: any) => void;\r\n  parentId?: number | null;\r\n}\r\n\r\nconst SelectChildForReportScreen: React.FC<SelectChildForReportScreenProps> = ({ navigateTo, parentId }) => {\r\n  const [children, setChildren] = useState<Student[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchChildren = async () => {\r\n      if (!parentId) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      try {\r\n        const { data: relations } = await supabase\r\n          .from('parent_children')\r\n          .select('student_id')\r\n          .eq('parent_id', parentId);\r\n\r\n        if (relations && relations.length > 0) {\r\n          const studentIds = relations.map(r => r.student_id);\r\n          const { data: students } = await supabase\r\n            .from('students')\r\n            .select('*')\r\n            .in('id', studentIds);\r\n\r\n          if (students) {\r\n            const mappedStudents = students.map((s: any) => ({\r\n              id: s.id,\r\n              name: s.name,\r\n              avatarUrl: s.avatar_url,\r\n              grade: s.grade,\r\n              section: s.section\r\n            } as Student));\r\n            setChildren(mappedStudents);\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Error fetching children for report:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchChildren();\r\n  }, [parentId]);\r\n\r\n  if (loading) return <div className=\"p-8 text-center\">Loading children...</div>;\r\n\r\n  const handleSelectChild = (student: Student) => {\r\n    navigateTo('reportCard', `${student.name}'s Report`, { student });\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 space-y-4 bg-gray-50 h-full\">\r\n      <div className=\"bg-green-50 p-4 rounded-xl text-center border border-green-200\">\r\n        <ReportIcon className=\"h-10 w-10 mx-auto text-green-400 mb-2\" />\r\n        <h3 className=\"font-bold text-lg text-green-800\">Select a Child</h3>\r\n        <p className=\"text-sm text-green-700\">Choose a child to view their latest academic report card.</p>\r\n      </div>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        {children.map(child => (\r\n          <button\r\n            key={child.id}\r\n            onClick={() => handleSelectChild(child)}\r\n            className=\"w-full bg-white rounded-xl shadow-sm p-4 flex items-center justify-between text-left hover:bg-gray-50 hover:ring-2 hover:ring-green-200 transition-all\"\r\n          >\r\n            <div className=\"flex items-center space-x-4\">\r\n              {child.avatarUrl ? (\r\n                <img src={child.avatarUrl} alt={child.name} className=\"w-14 h-14 rounded-full object-cover\" />\r\n              ) : (\r\n                <div className=\"w-14 h-14 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold text-xl\">\r\n                  {child.name.charAt(0)}\r\n                </div>\r\n              )}\r\n              <div>\r\n                <p className=\"font-bold text-gray-800\">{child.name}</p>\r\n                <p className=\"text-sm text-gray-600\">Grade {child.grade}{child.section}</p>\r\n              </div>\r\n            </div>\r\n            <ChevronRightIcon className=\"text-gray-400\" />\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelectChildForReportScreen;"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}