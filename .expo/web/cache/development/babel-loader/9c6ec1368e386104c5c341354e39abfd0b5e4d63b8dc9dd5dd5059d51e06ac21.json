{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\admin\\\\TeacherAttendanceScreen.tsx\";\nimport React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport { SearchIcon } from '../../constants';\nimport DonutChart from '../ui/DonutChart';\nimport { THEME_CONFIG } from '../../constants';\nimport { DashboardType } from '../../types';\nimport { fetchTeachers } from '../../lib/database';\nimport { supabase } from '../../lib/supabase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TeacherAttendanceScreen = ({\n  navigateTo\n}) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const theme = THEME_CONFIG[DashboardType.Admin];\n  const [teachers, setTeachers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const fetchTeacherData = async () => {\n    setLoading(true);\n    try {\n      const allTeachers = await fetchTeachers();\n      const today = new Date().toISOString().split('T')[0];\n      const {\n        data: attendanceData,\n        error\n      } = await supabase.from('teacher_attendance').select('*').eq('date', today);\n      if (error) throw error;\n      const mergedData = allTeachers.map(teacher => {\n        const record = attendanceData?.find(r => r.teacher_id === teacher.id);\n        let status = 'Not Marked';\n        if (record) {\n          if (record.status === 'Approved') status = 'Present';else if (record.status === 'Pending') status = 'Pending';else if (record.status === 'Rejected') status = 'Absent';\n        }\n        return Object.assign({}, teacher, {\n          attendanceStatus: status,\n          checkInTime: record?.check_in_time,\n          attendanceId: record?.id\n        });\n      });\n      setTeachers(mergedData);\n    } catch (err) {\n      console.error(\"Error fetching teacher attendance:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchTeacherData();\n    const today = new Date().toISOString().split('T')[0];\n    const channel = supabase.channel('teacher_attendance_realtime').on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'teacher_attendance',\n      filter: `date=eq.${today}`\n    }, payload => {\n      console.log('Real-time teacher attendance update:', payload);\n      fetchTeacherData();\n    }).subscribe();\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, []);\n  const handleStatusChange = useCallback(async (teacherId, status) => {\n    setTeachers(currentTeachers => currentTeachers.map(teacher => teacher.id === teacherId ? Object.assign({}, teacher, {\n      attendanceStatus: status\n    }) : teacher));\n  }, []);\n  const filteredTeachers = useMemo(() => teachers.filter(teacher => teacher.name.toLowerCase().includes(searchTerm.toLowerCase())), [teachers, searchTerm]);\n  const attendanceSummary = useMemo(() => {\n    const total = teachers.length;\n    const present = teachers.filter(t => t.attendanceStatus === 'Present').length;\n    const absent = teachers.filter(t => t.attendanceStatus === 'Absent').length;\n    const onLeave = teachers.filter(t => t.attendanceStatus === 'Leave').length;\n    const pending = teachers.filter(t => t.attendanceStatus === 'Pending').length;\n    const presentPercentage = total > 0 ? Math.round((present + onLeave) / total * 100) : 0;\n    return {\n      total,\n      present,\n      absent,\n      onLeave,\n      pending,\n      presentPercentage\n    };\n  }, [teachers]);\n  const statusStyles = {\n    Present: {\n      button: 'bg-green-500 text-white',\n      text: 'text-green-600'\n    },\n    Absent: {\n      button: 'bg-red-500 text-white',\n      text: 'text-red-600'\n    },\n    Leave: {\n      button: 'bg-amber-500 text-white',\n      text: 'text-amber-600'\n    },\n    Pending: {\n      button: 'bg-yellow-500 text-white',\n      text: 'text-yellow-600'\n    },\n    'Not Marked': {\n      button: 'bg-gray-200 text-gray-500',\n      text: 'text-gray-400'\n    }\n  };\n  return _jsxDEV(\"div\", {\n    className: \"flex flex-col h-full bg-gray-100\",\n    children: _jsxDEV(\"main\", {\n      className: \"flex-grow flex flex-col overflow-y-auto\",\n      children: [_jsxDEV(\"div\", {\n        className: \"p-4 bg-white\",\n        children: _jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [_jsxDEV(DonutChart, {\n              percentage: attendanceSummary.presentPercentage,\n              color: theme.chartColor,\n              size: 80,\n              strokeWidth: 9\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 29\n            }, this), _jsxDEV(\"div\", {\n              className: \"absolute inset-0 flex flex-col items-center justify-center\",\n              children: [_jsxDEV(\"span\", {\n                className: \"text-xl font-bold text-gray-800\",\n                children: [attendanceSummary.presentPercentage, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 33\n              }, this), _jsxDEV(\"span\", {\n                className: \"text-xs text-gray-500\",\n                children: \"Present\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: \"text-right space-y-1\",\n            children: [_jsxDEV(\"p\", {\n              className: \"font-semibold text-gray-800\",\n              children: [attendanceSummary.present, \" / \", attendanceSummary.total, \" Present\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 29\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-sm text-yellow-600 font-bold\",\n              children: [attendanceSummary.pending, \" Pending Approval\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 29\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-sm text-red-500\",\n              children: [attendanceSummary.absent, \" Absent\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 29\n            }, this), attendanceSummary.onLeave > 0 && _jsxDEV(\"p\", {\n              className: \"text-sm text-amber-500\",\n              children: [attendanceSummary.onLeave, \" On Leave\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 63\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"px-4 pb-2 bg-white flex justify-end\",\n        children: _jsxDEV(\"button\", {\n          onClick: () => navigateTo('teacherAttendanceApproval', 'Attendance Approvals'),\n          className: \"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors\",\n          children: _jsxDEV(\"span\", {\n            children: [\"Review Approvals \", attendanceSummary.pending > 0 && `(${attendanceSummary.pending})`]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"p-4 bg-gray-100 z-10 border-b border-t border-gray-200\",\n        children: _jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [_jsxDEV(\"span\", {\n            className: \"absolute inset-y-0 left-0 flex items-center pl-3\",\n            children: _jsxDEV(SearchIcon, {\n              className: \"text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this), _jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search by teacher name...\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            className: \"w-full pl-10 pr-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500\",\n            \"aria-label\": \"Search for a teacher\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"flex-grow px-4 pb-4 pt-4 space-y-3\",\n        children: loading ? _jsxDEV(\"div\", {\n          className: \"flex justify-center py-10\",\n          children: _jsxDEV(\"div\", {\n            className: \"animate-spin h-8 w-8 border-4 border-indigo-500 rounded-full border-t-transparent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 68\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }, this) : filteredTeachers.length > 0 ? filteredTeachers.map(teacher => _jsxDEV(\"div\", {\n          className: \"bg-white rounded-xl shadow-sm p-3 flex items-center space-x-3\",\n          children: [_jsxDEV(\"button\", {\n            onClick: () => navigateTo('teacherAttendanceDetail', `${teacher.name}'s Attendance`, {\n              teacher\n            }),\n            className: \"flex items-center space-x-3 flex-grow text-left\",\n            children: [_jsxDEV(\"img\", {\n              src: teacher.avatarUrl,\n              alt: teacher.name,\n              className: \"w-12 h-12 rounded-full object-cover\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 37\n            }, this), _jsxDEV(\"div\", {\n              className: \"flex-grow\",\n              children: [_jsxDEV(\"p\", {\n                className: \"font-bold text-gray-800\",\n                children: teacher.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 41\n              }, this), _jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [_jsxDEV(\"p\", {\n                  className: `text-sm font-semibold ${statusStyles[teacher.attendanceStatus].text}`,\n                  children: [\"Status: \", teacher.attendanceStatus]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 45\n                }, this), teacher.checkInTime && _jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-400\",\n                  children: [\"(\", new Date(teacher.checkInTime).toLocaleTimeString([], {\n                    hour: '2-digit',\n                    minute: '2-digit'\n                  }), \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 69\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 33\n          }, this), _jsxDEV(\"div\", {\n            className: `px-3 py-1 rounded-full text-xs font-bold ${statusStyles[teacher.attendanceStatus].button}`,\n            children: teacher.attendanceStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 33\n          }, this)]\n        }, teacher.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 29\n        }, this)) : _jsxDEV(\"div\", {\n          className: \"text-center py-10\",\n          children: _jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: \"No teachers found.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 9\n  }, this);\n};\nexport default TeacherAttendanceScreen;","map":{"version":3,"names":["React","useState","useMemo","useCallback","useEffect","SearchIcon","DonutChart","THEME_CONFIG","DashboardType","fetchTeachers","supabase","jsxDEV","_jsxDEV","TeacherAttendanceScreen","navigateTo","searchTerm","setSearchTerm","theme","Admin","teachers","setTeachers","loading","setLoading","fetchTeacherData","allTeachers","today","Date","toISOString","split","data","attendanceData","error","from","select","eq","mergedData","map","teacher","record","find","r","teacher_id","id","status","Object","assign","attendanceStatus","checkInTime","check_in_time","attendanceId","err","console","channel","on","event","schema","table","filter","payload","log","subscribe","removeChannel","handleStatusChange","teacherId","currentTeachers","filteredTeachers","name","toLowerCase","includes","attendanceSummary","total","length","present","t","absent","onLeave","pending","presentPercentage","Math","round","statusStyles","Present","button","text","Absent","Leave","Pending","className","children","percentage","color","chartColor","size","strokeWidth","fileName","_jsxFileName","lineNumber","columnNumber","onClick","type","placeholder","value","onChange","e","target","src","avatarUrl","alt","toLocaleTimeString","hour","minute"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/admin/TeacherAttendanceScreen.tsx"],"sourcesContent":["import React, { useState, useMemo, useCallback, useEffect } from 'react';\r\nimport { SearchIcon } from '../../constants';\r\n// import { mockTeachers } from '../../data'; // usage removed\r\nimport DonutChart from '../ui/DonutChart';\r\nimport { THEME_CONFIG } from '../../constants';\r\nimport { DashboardType, Teacher } from '../../types';\r\nimport { fetchTeachers } from '../../lib/database';\r\nimport { supabase } from '../../lib/supabase';\r\n\r\ntype AttendanceStatus = 'Present' | 'Absent' | 'Leave' | 'Pending' | 'Not Marked';\r\n\r\ninterface TeacherWithAttendance extends Teacher {\r\n    attendanceStatus: AttendanceStatus;\r\n    checkInTime?: string;\r\n    attendanceId?: number; // to approve/reject\r\n}\r\n\r\ninterface TeacherAttendanceScreenProps {\r\n    navigateTo: (view: string, title: string, props?: any) => void;\r\n}\r\n\r\nconst TeacherAttendanceScreen: React.FC<TeacherAttendanceScreenProps> = ({ navigateTo }) => {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const theme = THEME_CONFIG[DashboardType.Admin];\r\n    const [teachers, setTeachers] = useState<TeacherWithAttendance[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const fetchTeacherData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            // 1. Fetch all teachers\r\n            const allTeachers = await fetchTeachers();\r\n\r\n            // 2. Fetch today's attendance records\r\n            const today = new Date().toISOString().split('T')[0];\r\n            const { data: attendanceData, error } = await supabase\r\n                .from('teacher_attendance')\r\n                .select('*')\r\n                .eq('date', today);\r\n\r\n            if (error) throw error;\r\n\r\n            // 3. Merge data\r\n            const mergedData: TeacherWithAttendance[] = allTeachers.map(teacher => {\r\n                const record = attendanceData?.find((r: any) => r.teacher_id === teacher.id);\r\n                // Map DB status to UI Status\r\n                let status: AttendanceStatus = 'Not Marked';\r\n                if (record) {\r\n                    if (record.status === 'Approved') status = 'Present';\r\n                    else if (record.status === 'Pending') status = 'Pending';\r\n                    else if (record.status === 'Rejected') status = 'Absent'; // Or keep as Rejected? Using Absent for simplicity based on previous UI, but Pending is key.\r\n                }\r\n\r\n                return {\r\n                    ...teacher,\r\n                    attendanceStatus: status,\r\n                    checkInTime: record?.check_in_time,\r\n                    attendanceId: record?.id\r\n                };\r\n            });\r\n\r\n            setTeachers(mergedData);\r\n\r\n        } catch (err) {\r\n            console.error(\"Error fetching teacher attendance:\", err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchTeacherData();\r\n\r\n        // Real-time subscription\r\n        const today = new Date().toISOString().split('T')[0];\r\n        const channel = supabase.channel('teacher_attendance_realtime')\r\n            .on(\r\n                'postgres_changes',\r\n                { event: '*', schema: 'public', table: 'teacher_attendance', filter: `date=eq.${today}` },\r\n                (payload) => {\r\n                    console.log('Real-time teacher attendance update:', payload);\r\n                    fetchTeacherData(); // Simple re-fetch strategy for correctness\r\n                }\r\n            )\r\n            .subscribe();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, []);\r\n\r\n\r\n    const handleStatusChange = useCallback(async (teacherId: number, status: AttendanceStatus) => {\r\n        // Optimistic update\r\n        setTeachers(currentTeachers =>\r\n            currentTeachers.map(teacher =>\r\n                teacher.id === teacherId ? { ...teacher, attendanceStatus: status } : teacher\r\n            )\r\n        );\r\n\r\n        // TODO: Implement direct admin override if needed. \r\n        // For now, this UI was for marking, but with self-attendance, Admin usually *Approves* rather than marks directly.\r\n        // If we want Admin to manually mark, we'd need an implementation here writing to DB.\r\n        // For this task, we focus on Sync. Assuming the buttons trigger DB updates:\r\n\r\n        // This is a placeholder for the actual DB update logic if Admin assumes control.\r\n        // console.log(\"Admin manually changing status...\", teacherId, status);\r\n    }, []);\r\n\r\n    const filteredTeachers = useMemo(() =>\r\n        teachers.filter(teacher =>\r\n            teacher.name.toLowerCase().includes(searchTerm.toLowerCase())\r\n        ), [teachers, searchTerm]\r\n    );\r\n\r\n    const attendanceSummary = useMemo(() => {\r\n        const total = teachers.length;\r\n        const present = teachers.filter(t => t.attendanceStatus === 'Present').length;\r\n        const absent = teachers.filter(t => t.attendanceStatus === 'Absent').length;\r\n        const onLeave = teachers.filter(t => t.attendanceStatus === 'Leave').length; // Logic for Leave needs a flag in DB or specific status\r\n        const pending = teachers.filter(t => t.attendanceStatus === 'Pending').length;\r\n\r\n        const presentPercentage = total > 0 ? Math.round(((present + onLeave) / total) * 100) : 0; // Usually present count\r\n        return { total, present, absent, onLeave, pending, presentPercentage };\r\n    }, [teachers]);\r\n\r\n    const statusStyles: { [key in AttendanceStatus]: { button: string, text: string } } = {\r\n        Present: { button: 'bg-green-500 text-white', text: 'text-green-600' },\r\n        Absent: { button: 'bg-red-500 text-white', text: 'text-red-600' },\r\n        Leave: { button: 'bg-amber-500 text-white', text: 'text-amber-600' },\r\n        Pending: { button: 'bg-yellow-500 text-white', text: 'text-yellow-600' },\r\n        'Not Marked': { button: 'bg-gray-200 text-gray-500', text: 'text-gray-400' },\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-gray-100\">\r\n            <main className=\"flex-grow flex flex-col overflow-y-auto\">\r\n                {/* Summary Section */}\r\n                <div className=\"p-4 bg-white\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"relative\">\r\n                            <DonutChart percentage={attendanceSummary.presentPercentage} color={theme.chartColor} size={80} strokeWidth={9} />\r\n                            <div className=\"absolute inset-0 flex flex-col items-center justify-center\">\r\n                                <span className=\"text-xl font-bold text-gray-800\">{attendanceSummary.presentPercentage}%</span>\r\n                                <span className=\"text-xs text-gray-500\">Present</span>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"text-right space-y-1\">\r\n                            <p className=\"font-semibold text-gray-800\">{attendanceSummary.present} / {attendanceSummary.total} Present</p>\r\n                            <p className=\"text-sm text-yellow-600 font-bold\">{attendanceSummary.pending} Pending Approval</p>\r\n                            <p className=\"text-sm text-red-500\">{attendanceSummary.absent} Absent</p>\r\n                            {attendanceSummary.onLeave > 0 && <p className=\"text-sm text-amber-500\">{attendanceSummary.onLeave} On Leave</p>}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                {/* Actions Bar */}\r\n                <div className=\"px-4 pb-2 bg-white flex justify-end\">\r\n                    <button\r\n                        onClick={() => navigateTo('teacherAttendanceApproval', 'Attendance Approvals')}\r\n                        className=\"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors\"\r\n                    >\r\n                        <span>Review Approvals {attendanceSummary.pending > 0 && `(${attendanceSummary.pending})`}</span>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Search Bar */}\r\n                <div className=\"p-4 bg-gray-100 z-10 border-b border-t border-gray-200\">\r\n                    <div className=\"relative\">\r\n                        <span className=\"absolute inset-y-0 left-0 flex items-center pl-3\">\r\n                            <SearchIcon className=\"text-gray-400\" />\r\n                        </span>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search by teacher name...\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                            className=\"w-full pl-10 pr-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500\"\r\n                            aria-label=\"Search for a teacher\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Teacher List */}\r\n                <div className=\"flex-grow px-4 pb-4 pt-4 space-y-3\">\r\n                    {loading ? (\r\n                        <div className=\"flex justify-center py-10\"><div className=\"animate-spin h-8 w-8 border-4 border-indigo-500 rounded-full border-t-transparent\"></div></div>\r\n                    ) : filteredTeachers.length > 0 ? (\r\n                        filteredTeachers.map(teacher => (\r\n                            <div key={teacher.id} className=\"bg-white rounded-xl shadow-sm p-3 flex items-center space-x-3\">\r\n                                <button onClick={() => navigateTo('teacherAttendanceDetail', `${teacher.name}'s Attendance`, { teacher })} className=\"flex items-center space-x-3 flex-grow text-left\">\r\n                                    <img src={teacher.avatarUrl} alt={teacher.name} className=\"w-12 h-12 rounded-full object-cover\" />\r\n                                    <div className=\"flex-grow\">\r\n                                        <p className=\"font-bold text-gray-800\">{teacher.name}</p>\r\n                                        <div className=\"flex items-center space-x-2\">\r\n                                            <p className={`text-sm font-semibold ${statusStyles[teacher.attendanceStatus].text}`}>\r\n                                                Status: {teacher.attendanceStatus}\r\n                                            </p>\r\n                                            {teacher.checkInTime && <p className=\"text-xs text-gray-400\">({new Date(teacher.checkInTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })})</p>}\r\n                                        </div>\r\n                                    </div>\r\n                                </button>\r\n                                {/* Removed direct toggles for clarity on \"Sync\" context - Admin should Approve primarily, but here we can leave simple display or add back interactions later if requested. Keeping it cleanup for now to emphasize the real status. */}\r\n                                <div className={`px-3 py-1 rounded-full text-xs font-bold ${statusStyles[teacher.attendanceStatus].button}`}>\r\n                                    {teacher.attendanceStatus}\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    ) : (\r\n                        <div className=\"text-center py-10\">\r\n                            <p className=\"text-gray-500\">No teachers found.</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TeacherAttendanceScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}