{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\admin\\\\BudgetPlanner.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from '../../lib/supabase';\nimport { toast } from 'react-hot-toast';\nimport { Plus } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BudgetPlanner = () => {\n  const [budgets, setBudgets] = useState([]);\n  const [selectedBudget, setSelectedBudget] = useState(null);\n  const [budgetLines, setBudgetLines] = useState([]);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [budgetName, setBudgetName] = useState('');\n  const [budgetYear, setBudgetYear] = useState(new Date().getFullYear());\n  const [totalBudget, setTotalBudget] = useState('');\n  useEffect(() => {\n    fetchBudgets();\n  }, []);\n  useEffect(() => {\n    if (selectedBudget) {\n      fetchBudgetLines(selectedBudget.id);\n    }\n  }, [selectedBudget]);\n  const fetchBudgets = async () => {\n    try {\n      setLoading(true);\n      const {\n        data,\n        error\n      } = await supabase.from('budgets').select('*').order('budget_year', {\n        ascending: false\n      });\n      if (error) throw error;\n      setBudgets(data || []);\n      if (data && data.length > 0 && !selectedBudget) {\n        setSelectedBudget(data[0]);\n      }\n    } catch (error) {\n      console.error('Error fetching budgets:', error);\n      toast.error('Failed to load budgets');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchBudgetLines = async budgetId => {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('budget_lines').select('*').eq('budget_id', budgetId);\n      if (error) throw error;\n      setBudgetLines(data || []);\n    } catch (error) {\n      console.error('Error fetching budget lines:', error);\n    }\n  };\n  const createBudget = async () => {\n    if (!budgetName || !totalBudget) {\n      toast.error('Please fill all required fields');\n      return;\n    }\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('budgets').insert({\n        budget_name: budgetName,\n        budget_year: budgetYear,\n        total_budget: Number(totalBudget),\n        status: 'Draft',\n        fiscal_year_start: `${budgetYear}-01-01`,\n        fiscal_year_end: `${budgetYear}-12-31`,\n        created_by: 1\n      }).select().single();\n      if (error) throw error;\n      toast.success('Budget created successfully!');\n      setShowCreateModal(false);\n      resetForm();\n      fetchBudgets();\n    } catch (error) {\n      console.error('Error creating budget:', error);\n      toast.error('Failed to create budget');\n    }\n  };\n  const resetForm = () => {\n    setBudgetName('');\n    setBudgetYear(new Date().getFullYear());\n    setTotalBudget('');\n  };\n  const getVarianceColor = variance => {\n    if (variance > 0) return 'text-green-600';\n    if (variance < 0) return 'text-red-600';\n    return 'text-gray-600';\n  };\n  const getUtilizationPercentage = (spent, allocated) => {\n    return allocated > 0 ? spent / allocated * 100 : 0;\n  };\n  return _jsxDEV(\"div\", {\n    className: \"p-6 max-w-7xl mx-auto\",\n    children: [_jsxDEV(\"div\", {\n      className: \"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl p-6 text-white mb-6\",\n      children: _jsxDEV(\"div\", {\n        className: \"flex justify-between items-center\",\n        children: [_jsxDEV(\"div\", {\n          children: [_jsxDEV(\"h1\", {\n            className: \"text-3xl font-bold mb-2\",\n            children: \"\\uD83D\\uDCBC Budget Planner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-blue-100\",\n            children: \"Annual budget management and allocation tracking\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this), _jsxDEV(\"button\", {\n          onClick: () => setShowCreateModal(true),\n          className: \"px-4 py-2 bg-white text-blue-600 rounded-lg hover:bg-blue-50 font-semibold flex items-center space-x-2\",\n          children: [_jsxDEV(Plus, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this), _jsxDEV(\"span\", {\n            children: \"New Budget\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-sm p-4 mb-6\",\n      children: [_jsxDEV(\"label\", {\n        className: \"block text-sm font-semibold text-gray-700 mb-2\",\n        children: \"Select Budget\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this), _jsxDEV(\"select\", {\n        value: selectedBudget?.id || '',\n        onChange: e => {\n          const budget = budgets.find(b => b.id === Number(e.target.value));\n          setSelectedBudget(budget || null);\n        },\n        className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",\n        children: budgets.map(budget => _jsxDEV(\"option\", {\n          value: budget.id,\n          children: [budget.budget_name, \" - \", budget.budget_year, \" (\", budget.status, \")\"]\n        }, budget.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, this), selectedBudget && _jsxDEV(_Fragment, {\n      children: [_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",\n        children: [_jsxDEV(\"div\", {\n          className: \"bg-white rounded-xl shadow-sm p-6\",\n          children: [_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: \"Total Budget\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 29\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-2xl font-bold text-gray-900\",\n            children: [\"\\u20A6\", selectedBudget.total_budget.toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 25\n        }, this), _jsxDEV(\"div\", {\n          className: \"bg-white rounded-xl shadow-sm p-6\",\n          children: [_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: \"Allocated\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 29\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-2xl font-bold text-blue-600\",\n            children: [\"\\u20A6\", selectedBudget.allocated_amount.toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 25\n        }, this), _jsxDEV(\"div\", {\n          className: \"bg-white rounded-xl shadow-sm p-6\",\n          children: [_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: \"Spent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 29\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-2xl font-bold text-orange-600\",\n            children: [\"\\u20A6\", selectedBudget.spent_amount.toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 25\n        }, this), _jsxDEV(\"div\", {\n          className: \"bg-white rounded-xl shadow-sm p-6\",\n          children: [_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: \"Remaining\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 29\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-2xl font-bold text-green-600\",\n            children: [\"\\u20A6\", selectedBudget.remaining_amount.toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 21\n      }, this), _jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm p-6\",\n        children: [_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold text-gray-900 mb-4\",\n          children: \"Department Allocations\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 25\n        }, this), budgetLines.length > 0 ? _jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: _jsxDEV(\"table\", {\n            className: \"min-w-full divide-y divide-gray-200\",\n            children: [_jsxDEV(\"thead\", {\n              children: _jsxDEV(\"tr\", {\n                children: [_jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\",\n                  children: \"Department\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\",\n                  children: \"Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase\",\n                  children: \"Allocated\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase\",\n                  children: \"Spent\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase\",\n                  children: \"Committed\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase\",\n                  children: \"Available\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-center text-xs font-semibold text-gray-700 uppercase\",\n                  children: \"Utilization\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase\",\n                  children: \"Variance\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 37\n            }, this), _jsxDEV(\"tbody\", {\n              className: \"divide-y divide-gray-200\",\n              children: budgetLines.map(line => {\n                const utilization = getUtilizationPercentage(line.spent_amount, line.allocated_amount);\n                return _jsxDEV(\"tr\", {\n                  className: \"hover:bg-gray-50\",\n                  children: [_jsxDEV(\"td\", {\n                    className: \"px-4 py-3 text-sm font-medium text-gray-900\",\n                    children: line.department\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 218,\n                    columnNumber: 53\n                  }, this), _jsxDEV(\"td\", {\n                    className: \"px-4 py-3 text-sm text-gray-700\",\n                    children: line.category\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 53\n                  }, this), _jsxDEV(\"td\", {\n                    className: \"px-4 py-3 text-sm text-right text-gray-900\",\n                    children: [\"\\u20A6\", line.allocated_amount.toLocaleString()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 53\n                  }, this), _jsxDEV(\"td\", {\n                    className: \"px-4 py-3 text-sm text-right text-orange-600\",\n                    children: [\"\\u20A6\", line.spent_amount.toLocaleString()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 221,\n                    columnNumber: 53\n                  }, this), _jsxDEV(\"td\", {\n                    className: \"px-4 py-3 text-sm text-right text-yellow-600\",\n                    children: [\"\\u20A6\", line.committed_amount.toLocaleString()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 53\n                  }, this), _jsxDEV(\"td\", {\n                    className: \"px-4 py-3 text-sm text-right text-green-600 font-semibold\",\n                    children: [\"\\u20A6\", line.available_amount.toLocaleString()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 53\n                  }, this), _jsxDEV(\"td\", {\n                    className: \"px-4 py-3\",\n                    children: _jsxDEV(\"div\", {\n                      className: \"flex flex-col items-center\",\n                      children: [_jsxDEV(\"span\", {\n                        className: \"text-xs font-semibold mb-1\",\n                        children: [utilization.toFixed(1), \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 226,\n                        columnNumber: 61\n                      }, this), _jsxDEV(\"div\", {\n                        className: \"w-full bg-gray-200 rounded-full h-2\",\n                        children: _jsxDEV(\"div\", {\n                          className: `h-2 rounded-full ${utilization > 90 ? 'bg-red-500' : utilization > 75 ? 'bg-yellow-500' : 'bg-green-500'}`,\n                          style: {\n                            width: `${Math.min(utilization, 100)}%`\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 228,\n                          columnNumber: 65\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 227,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 225,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 53\n                  }, this), _jsxDEV(\"td\", {\n                    className: `px-4 py-3 text-sm text-right font-semibold ${getVarianceColor(line.variance)}`,\n                    children: [\"\\u20A6\", line.variance.toLocaleString()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 53\n                  }, this)]\n                }, line.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 49\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 29\n        }, this) : _jsxDEV(\"p\", {\n          className: \"text-center text-gray-500 py-8\",\n          children: \"No budget lines allocated yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true), showCreateModal && _jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\",\n      children: _jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl max-w-md w-full p-6\",\n        children: [_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-900 mb-4\",\n          children: \"Create New Budget\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 25\n        }, this), _jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [_jsxDEV(\"div\", {\n            children: [_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-gray-700 mb-2\",\n              children: \"Budget Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 33\n            }, this), _jsxDEV(\"input\", {\n              type: \"text\",\n              value: budgetName,\n              onChange: e => setBudgetName(e.target.value),\n              placeholder: \"e.g., Annual Budget 2026\",\n              className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 29\n          }, this), _jsxDEV(\"div\", {\n            children: [_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-gray-700 mb-2\",\n              children: \"Fiscal Year *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 33\n            }, this), _jsxDEV(\"input\", {\n              type: \"number\",\n              value: budgetYear,\n              onChange: e => setBudgetYear(Number(e.target.value)),\n              min: \"2020\",\n              max: \"2050\",\n              className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 29\n          }, this), _jsxDEV(\"div\", {\n            children: [_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-gray-700 mb-2\",\n              children: \"Total Budget (\\u20A6) *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 33\n            }, this), _jsxDEV(\"input\", {\n              type: \"number\",\n              value: totalBudget,\n              onChange: e => setTotalBudget(e.target.value),\n              placeholder: \"50000000\",\n              className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 25\n        }, this), _jsxDEV(\"div\", {\n          className: \"flex space-x-3 mt-6\",\n          children: [_jsxDEV(\"button\", {\n            onClick: () => {\n              setShowCreateModal(false);\n              resetForm();\n            },\n            className: \"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 29\n          }, this), _jsxDEV(\"button\", {\n            onClick: createBudget,\n            className: \"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold\",\n            children: \"Create Budget\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 9\n  }, this);\n};\nexport default BudgetPlanner;","map":{"version":3,"names":["React","useState","useEffect","supabase","toast","Plus","jsxDEV","_jsxDEV","Fragment","_Fragment","BudgetPlanner","budgets","setBudgets","selectedBudget","setSelectedBudget","budgetLines","setBudgetLines","showCreateModal","setShowCreateModal","loading","setLoading","budgetName","setBudgetName","budgetYear","setBudgetYear","Date","getFullYear","totalBudget","setTotalBudget","fetchBudgets","fetchBudgetLines","id","data","error","from","select","order","ascending","length","console","budgetId","eq","createBudget","insert","budget_name","budget_year","total_budget","Number","status","fiscal_year_start","fiscal_year_end","created_by","single","success","resetForm","getVarianceColor","variance","getUtilizationPercentage","spent","allocated","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","value","onChange","e","budget","find","b","target","map","toLocaleString","allocated_amount","spent_amount","remaining_amount","line","utilization","department","category","committed_amount","available_amount","toFixed","style","width","Math","min","type","placeholder","max"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/admin/BudgetPlanner.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { toast } from 'react-hot-toast';\r\nimport { DollarSign, Plus, Edit, Trash2, TrendingUp, AlertCircle } from 'lucide-react';\r\n\r\ninterface Budget {\r\n    id: number;\r\n    budget_year: number;\r\n    budget_name: string;\r\n    total_budget: number;\r\n    allocated_amount: number;\r\n    spent_amount: number;\r\n    remaining_amount: number;\r\n    status: string;\r\n}\r\n\r\ninterface BudgetLine {\r\n    id: number;\r\n    budget_id: number;\r\n    department: string;\r\n    category: string;\r\n    allocated_amount: number;\r\n    spent_amount: number;\r\n    committed_amount: number;\r\n    available_amount: number;\r\n    variance: number;\r\n}\r\n\r\nconst BudgetPlanner: React.FC = () => {\r\n    const [budgets, setBudgets] = useState<Budget[]>([]);\r\n    const [selectedBudget, setSelectedBudget] = useState<Budget | null>(null);\r\n    const [budgetLines, setBudgetLines] = useState<BudgetLine[]>([]);\r\n    const [showCreateModal, setShowCreateModal] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Form state\r\n    const [budgetName, setBudgetName] = useState('');\r\n    const [budgetYear, setBudgetYear] = useState(new Date().getFullYear());\r\n    const [totalBudget, setTotalBudget] = useState('');\r\n\r\n    useEffect(() => {\r\n        fetchBudgets();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (selectedBudget) {\r\n            fetchBudgetLines(selectedBudget.id);\r\n        }\r\n    }, [selectedBudget]);\r\n\r\n    const fetchBudgets = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const { data, error } = await supabase\r\n                .from('budgets')\r\n                .select('*')\r\n                .order('budget_year', { ascending: false });\r\n\r\n            if (error) throw error;\r\n            setBudgets(data || []);\r\n            if (data && data.length > 0 && !selectedBudget) {\r\n                setSelectedBudget(data[0]);\r\n            }\r\n        } catch (error: any) {\r\n            console.error('Error fetching budgets:', error);\r\n            toast.error('Failed to load budgets');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchBudgetLines = async (budgetId: number) => {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('budget_lines')\r\n                .select('*')\r\n                .eq('budget_id', budgetId);\r\n\r\n            if (error) throw error;\r\n            setBudgetLines(data || []);\r\n        } catch (error: any) {\r\n            console.error('Error fetching budget lines:', error);\r\n        }\r\n    };\r\n\r\n    const createBudget = async () => {\r\n        if (!budgetName || !totalBudget) {\r\n            toast.error('Please fill all required fields');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('budgets')\r\n                .insert({\r\n                    budget_name: budgetName,\r\n                    budget_year: budgetYear,\r\n                    total_budget: Number(totalBudget),\r\n                    status: 'Draft',\r\n                    fiscal_year_start: `${budgetYear}-01-01`,\r\n                    fiscal_year_end: `${budgetYear}-12-31`,\r\n                    created_by: 1 // Current user ID\r\n                })\r\n                .select()\r\n                .single();\r\n\r\n            if (error) throw error;\r\n\r\n            toast.success('Budget created successfully!');\r\n            setShowCreateModal(false);\r\n            resetForm();\r\n            fetchBudgets();\r\n        } catch (error: any) {\r\n            console.error('Error creating budget:', error);\r\n            toast.error('Failed to create budget');\r\n        }\r\n    };\r\n\r\n    const resetForm = () => {\r\n        setBudgetName('');\r\n        setBudgetYear(new Date().getFullYear());\r\n        setTotalBudget('');\r\n    };\r\n\r\n    const getVarianceColor = (variance: number) => {\r\n        if (variance > 0) return 'text-green-600';\r\n        if (variance < 0) return 'text-red-600';\r\n        return 'text-gray-600';\r\n    };\r\n\r\n    const getUtilizationPercentage = (spent: number, allocated: number) => {\r\n        return allocated > 0 ? (spent / allocated) * 100 : 0;\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6 max-w-7xl mx-auto\">\r\n            {/* Header */}\r\n            <div className=\"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl p-6 text-white mb-6\">\r\n                <div className=\"flex justify-between items-center\">\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-bold mb-2\">ðŸ’¼ Budget Planner</h1>\r\n                        <p className=\"text-blue-100\">Annual budget management and allocation tracking</p>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setShowCreateModal(true)}\r\n                        className=\"px-4 py-2 bg-white text-blue-600 rounded-lg hover:bg-blue-50 font-semibold flex items-center space-x-2\"\r\n                    >\r\n                        <Plus className=\"h-5 w-5\" />\r\n                        <span>New Budget</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Budget Selection */}\r\n            <div className=\"bg-white rounded-xl shadow-sm p-4 mb-6\">\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Select Budget</label>\r\n                <select\r\n                    value={selectedBudget?.id || ''}\r\n                    onChange={(e) => {\r\n                        const budget = budgets.find(b => b.id === Number(e.target.value));\r\n                        setSelectedBudget(budget || null);\r\n                    }}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                    {budgets.map(budget => (\r\n                        <option key={budget.id} value={budget.id}>\r\n                            {budget.budget_name} - {budget.budget_year} ({budget.status})\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            {selectedBudget && (\r\n                <>\r\n                    {/* Budget Summary */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n                        <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                            <p className=\"text-sm text-gray-600\">Total Budget</p>\r\n                            <p className=\"text-2xl font-bold text-gray-900\">â‚¦{selectedBudget.total_budget.toLocaleString()}</p>\r\n                        </div>\r\n                        <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                            <p className=\"text-sm text-gray-600\">Allocated</p>\r\n                            <p className=\"text-2xl font-bold text-blue-600\">â‚¦{selectedBudget.allocated_amount.toLocaleString()}</p>\r\n                        </div>\r\n                        <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                            <p className=\"text-sm text-gray-600\">Spent</p>\r\n                            <p className=\"text-2xl font-bold text-orange-600\">â‚¦{selectedBudget.spent_amount.toLocaleString()}</p>\r\n                        </div>\r\n                        <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                            <p className=\"text-sm text-gray-600\">Remaining</p>\r\n                            <p className=\"text-2xl font-bold text-green-600\">â‚¦{selectedBudget.remaining_amount.toLocaleString()}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Budget Lines */}\r\n                    <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                        <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Department Allocations</h3>\r\n                        {budgetLines.length > 0 ? (\r\n                            <div className=\"overflow-x-auto\">\r\n                                <table className=\"min-w-full divide-y divide-gray-200\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\">Department</th>\r\n                                            <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\">Category</th>\r\n                                            <th className=\"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase\">Allocated</th>\r\n                                            <th className=\"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase\">Spent</th>\r\n                                            <th className=\"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase\">Committed</th>\r\n                                            <th className=\"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase\">Available</th>\r\n                                            <th className=\"px-4 py-3 text-center text-xs font-semibold text-gray-700 uppercase\">Utilization</th>\r\n                                            <th className=\"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase\">Variance</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody className=\"divide-y divide-gray-200\">\r\n                                        {budgetLines.map(line => {\r\n                                            const utilization = getUtilizationPercentage(line.spent_amount, line.allocated_amount);\r\n                                            return (\r\n                                                <tr key={line.id} className=\"hover:bg-gray-50\">\r\n                                                    <td className=\"px-4 py-3 text-sm font-medium text-gray-900\">{line.department}</td>\r\n                                                    <td className=\"px-4 py-3 text-sm text-gray-700\">{line.category}</td>\r\n                                                    <td className=\"px-4 py-3 text-sm text-right text-gray-900\">â‚¦{line.allocated_amount.toLocaleString()}</td>\r\n                                                    <td className=\"px-4 py-3 text-sm text-right text-orange-600\">â‚¦{line.spent_amount.toLocaleString()}</td>\r\n                                                    <td className=\"px-4 py-3 text-sm text-right text-yellow-600\">â‚¦{line.committed_amount.toLocaleString()}</td>\r\n                                                    <td className=\"px-4 py-3 text-sm text-right text-green-600 font-semibold\">â‚¦{line.available_amount.toLocaleString()}</td>\r\n                                                    <td className=\"px-4 py-3\">\r\n                                                        <div className=\"flex flex-col items-center\">\r\n                                                            <span className=\"text-xs font-semibold mb-1\">{utilization.toFixed(1)}%</span>\r\n                                                            <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                                                                <div\r\n                                                                    className={`h-2 rounded-full ${utilization > 90 ? 'bg-red-500' : utilization > 75 ? 'bg-yellow-500' : 'bg-green-500'\r\n                                                                        }`}\r\n                                                                    style={{ width: `${Math.min(utilization, 100)}%` }}\r\n                                                                ></div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td className={`px-4 py-3 text-sm text-right font-semibold ${getVarianceColor(line.variance)}`}>\r\n                                                        â‚¦{line.variance.toLocaleString()}\r\n                                                    </td>\r\n                                                </tr>\r\n                                            );\r\n                                        })}\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        ) : (\r\n                            <p className=\"text-center text-gray-500 py-8\">No budget lines allocated yet</p>\r\n                        )}\r\n                    </div>\r\n                </>\r\n            )}\r\n\r\n            {/* Create Budget Modal */}\r\n            {showCreateModal && (\r\n                <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n                    <div className=\"bg-white rounded-xl max-w-md w-full p-6\">\r\n                        <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Create New Budget</h2>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Budget Name *</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={budgetName}\r\n                                    onChange={(e) => setBudgetName(e.target.value)}\r\n                                    placeholder=\"e.g., Annual Budget 2026\"\r\n                                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Fiscal Year *</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={budgetYear}\r\n                                    onChange={(e) => setBudgetYear(Number(e.target.value))}\r\n                                    min=\"2020\"\r\n                                    max=\"2050\"\r\n                                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Total Budget (â‚¦) *</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={totalBudget}\r\n                                    onChange={(e) => setTotalBudget(e.target.value)}\r\n                                    placeholder=\"50000000\"\r\n                                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex space-x-3 mt-6\">\r\n                            <button\r\n                                onClick={() => {\r\n                                    setShowCreateModal(false);\r\n                                    resetForm();\r\n                                }}\r\n                                className=\"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold\"\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button\r\n                                onClick={createBudget}\r\n                                className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold\"\r\n                            >\r\n                                Create Budget\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BudgetPlanner;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}