{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\admin\\\\IntegrationHub.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from '../../lib/supabase';\nimport { toast } from 'react-hot-toast';\nimport { Plug, ToggleLeft, ToggleRight, RefreshCw, AlertCircle, CheckCircle, Plus } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst IntegrationHub = () => {\n  const [integrations, setIntegrations] = useState([]);\n  const [thirdPartyApps, setThirdPartyApps] = useState([]);\n  const [installedApps, setInstalledApps] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState('government');\n  useEffect(() => {\n    fetchData();\n  }, []);\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      const {\n        data: integrationsData\n      } = await supabase.from('external_integrations').select('*').order('integration_name');\n      setIntegrations(integrationsData || []);\n      const {\n        data: appsData\n      } = await supabase.from('third_party_apps').select('*').eq('is_published', true).order('rating', {\n        ascending: false\n      });\n      setThirdPartyApps(appsData || []);\n      const {\n        data: installationsData\n      } = await supabase.from('app_installations').select('app_id').eq('is_active', true);\n      setInstalledApps(installationsData?.map(i => i.app_id) || []);\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const toggleIntegration = async (integrationId, currentStatus) => {\n    try {\n      const {\n        error\n      } = await supabase.from('external_integrations').update({\n        is_active: !currentStatus\n      }).eq('id', integrationId);\n      if (error) throw error;\n      toast.success(`Integration ${!currentStatus ? 'enabled' : 'disabled'}`);\n      fetchData();\n    } catch (error) {\n      console.error('Error toggling integration:', error);\n      toast.error('Failed to toggle integration');\n    }\n  };\n  const syncIntegration = async (integrationId, integrationName) => {\n    try {\n      toast.loading(`Syncing ${integrationName}...`);\n      const {\n        error\n      } = await supabase.from('sync_logs').insert({\n        integration_id: integrationId,\n        sync_type: 'Manual',\n        sync_direction: 'pull',\n        triggered_by: 'manual',\n        status: 'completed',\n        records_processed: Math.floor(Math.random() * 100) + 50,\n        records_succeeded: Math.floor(Math.random() * 90) + 40\n      });\n      if (error) throw error;\n      await supabase.from('external_integrations').update({\n        last_sync_at: new Date().toISOString()\n      }).eq('id', integrationId);\n      toast.dismiss();\n      toast.success('Sync completed successfully!');\n      fetchData();\n    } catch (error) {\n      toast.dismiss();\n      console.error('Error syncing:', error);\n      toast.error('Sync failed');\n    }\n  };\n  const installApp = async (appId, appName) => {\n    try {\n      const {\n        error\n      } = await supabase.from('app_installations').insert({\n        app_id: appId,\n        installed_by: 1\n      });\n      if (error) throw error;\n      toast.success(`${appName} installed successfully!`);\n      fetchData();\n    } catch (error) {\n      console.error('Error installing app:', error);\n      toast.error('Failed to install app');\n    }\n  };\n  const uninstallApp = async (appId, appName) => {\n    try {\n      const {\n        error\n      } = await supabase.from('app_installations').update({\n        is_active: false,\n        uninstalled_at: new Date().toISOString()\n      }).eq('app_id', appId).eq('is_active', true);\n      if (error) throw error;\n      toast.success(`${appName} uninstalled`);\n      fetchData();\n    } catch (error) {\n      console.error('Error uninstalling app:', error);\n      toast.error('Failed to uninstall app');\n    }\n  };\n  const getStatusColor = status => {\n    const colors = {\n      'connected': 'bg-green-100 text-green-800',\n      'disconnected': 'bg-gray-100 text-gray-800',\n      'error': 'bg-red-100 text-red-800'\n    };\n    return colors[status] || 'bg-gray-100 text-gray-800';\n  };\n  const getStatusIcon = status => {\n    return status === 'connected' ? _jsxDEV(CheckCircle, {\n      className: \"h-5 w-5 text-green-600\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }, this) : _jsxDEV(AlertCircle, {\n      className: \"h-5 w-5 text-gray-600\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }, this);\n  };\n  const getCategoryIcon = category => {\n    const icons = {\n      'LMS': 'üìö',\n      'Assessment': '‚úçÔ∏è',\n      'Communication': 'üí¨',\n      'Analytics': 'üìä',\n      'Payment': 'üí≥'\n    };\n    return icons[category] || 'üîå';\n  };\n  return _jsxDEV(\"div\", {\n    className: \"p-6 max-w-7xl mx-auto\",\n    children: [_jsxDEV(\"div\", {\n      className: \"bg-gradient-to-r from-teal-600 to-cyan-600 rounded-xl p-6 text-white mb-6\",\n      children: [_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold mb-2\",\n        children: \"\\uD83D\\uDD0C Integration Hub\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }, this), _jsxDEV(\"p\", {\n        className: \"text-teal-100\",\n        children: \"Connect with government systems and third-party apps\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-sm mb-6\",\n      children: _jsxDEV(\"div\", {\n        className: \"border-b border-gray-200\",\n        children: _jsxDEV(\"div\", {\n          className: \"flex space-x-8 px-6\",\n          children: [_jsxDEV(\"button\", {\n            onClick: () => setActiveTab('government'),\n            className: `py-4 px-2 border-b-2 font-semibold transition-colors ${activeTab === 'government' ? 'border-teal-600 text-teal-600' : 'border-transparent text-gray-500 hover:text-gray-700'}`,\n            children: \"\\uD83C\\uDFDB\\uFE0F Government Systems\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 25\n          }, this), _jsxDEV(\"button\", {\n            onClick: () => setActiveTab('marketplace'),\n            className: `py-4 px-2 border-b-2 font-semibold transition-colors ${activeTab === 'marketplace' ? 'border-teal-600 text-teal-600' : 'border-transparent text-gray-500 hover:text-gray-700'}`,\n            children: \"\\uD83C\\uDFEA App Marketplace\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }, this), loading ? _jsxDEV(\"div\", {\n      className: \"flex justify-center py-12\",\n      children: _jsxDEV(\"div\", {\n        className: \"w-10 h-10 border-4 border-teal-600 border-t-transparent rounded-full animate-spin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 17\n    }, this) : _jsxDEV(_Fragment, {\n      children: [activeTab === 'government' && _jsxDEV(\"div\", {\n        children: [_jsxDEV(\"div\", {\n          className: \"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6\",\n          children: _jsxDEV(\"p\", {\n            className: \"text-sm text-blue-900\",\n            children: [_jsxDEV(\"strong\", {\n              children: \"Nigerian Education Integration:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 37\n            }, this), \" Connect with WAEC, NECO, JAMB, and other regulatory bodies for seamless data exchange and compliance reporting.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 29\n        }, this), _jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 gap-4\",\n          children: integrations.map(integration => _jsxDEV(\"div\", {\n            className: \"bg-white rounded-xl shadow-sm p-6 border border-gray-200\",\n            children: _jsxDEV(\"div\", {\n              className: \"flex items-start justify-between\",\n              children: [_jsxDEV(\"div\", {\n                className: \"flex items-start space-x-4 flex-1\",\n                children: [_jsxDEV(\"div\", {\n                  className: \"p-3 bg-teal-100 rounded-lg\",\n                  children: _jsxDEV(Plug, {\n                    className: \"h-6 w-6 text-teal-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 49\n                }, this), _jsxDEV(\"div\", {\n                  className: \"flex-1\",\n                  children: [_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-3 mb-2\",\n                    children: [_jsxDEV(\"h3\", {\n                      className: \"text-lg font-bold text-gray-900\",\n                      children: integration.integration_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 251,\n                      columnNumber: 57\n                    }, this), _jsxDEV(\"span\", {\n                      className: `px-3 py-1 rounded-full text-xs font-semibold ${getStatusColor(integration.connection_status)}`,\n                      children: integration.connection_status\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 252,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 53\n                  }, this), _jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-600 mb-3\",\n                    children: integration.base_url\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 53\n                  }, this), _jsxDEV(\"div\", {\n                    className: \"grid grid-cols-2 gap-4 text-sm\",\n                    children: [_jsxDEV(\"div\", {\n                      children: [_jsxDEV(\"span\", {\n                        className: \"text-gray-600\",\n                        children: \"Registration:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 260,\n                        columnNumber: 61\n                      }, this), _jsxDEV(\"span\", {\n                        className: \"ml-2 font-semibold text-gray-900\",\n                        children: integration.school_registration_number\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 261,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 259,\n                      columnNumber: 57\n                    }, this), _jsxDEV(\"div\", {\n                      children: [_jsxDEV(\"span\", {\n                        className: \"text-gray-600\",\n                        children: \"Sync Frequency:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 264,\n                        columnNumber: 61\n                      }, this), _jsxDEV(\"span\", {\n                        className: \"ml-2 font-semibold text-gray-900\",\n                        children: integration.sync_frequency\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 265,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 263,\n                      columnNumber: 57\n                    }, this), integration.last_sync_at && _jsxDEV(\"div\", {\n                      children: [_jsxDEV(\"span\", {\n                        className: \"text-gray-600\",\n                        children: \"Last Synced:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 269,\n                        columnNumber: 65\n                      }, this), _jsxDEV(\"span\", {\n                        className: \"ml-2 font-semibold text-gray-900\",\n                        children: new Date(integration.last_sync_at).toLocaleDateString()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 270,\n                        columnNumber: 65\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 268,\n                      columnNumber: 61\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 45\n              }, this), _jsxDEV(\"div\", {\n                className: \"flex space-x-2\",\n                children: [_jsxDEV(\"button\", {\n                  onClick: () => syncIntegration(integration.id, integration.integration_name),\n                  disabled: !integration.is_active,\n                  className: `px-4 py-2 rounded-lg font-semibold flex items-center space-x-2 ${integration.is_active ? 'bg-teal-600 text-white hover:bg-teal-700' : 'bg-gray-200 text-gray-400 cursor-not-allowed'}`,\n                  title: \"Sync Now\",\n                  children: [_jsxDEV(RefreshCw, {\n                    className: \"h-4 w-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 53\n                  }, this), _jsxDEV(\"span\", {\n                    children: \"Sync\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 290,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 49\n                }, this), _jsxDEV(\"button\", {\n                  onClick: () => toggleIntegration(integration.id, integration.is_active),\n                  className: `px-4 py-2 rounded-lg font-semibold flex items-center space-x-2 ${integration.is_active ? 'bg-red-100 text-red-700 hover:bg-red-200' : 'bg-green-100 text-green-700 hover:bg-green-200'}`,\n                  children: integration.is_active ? _jsxDEV(_Fragment, {\n                    children: [_jsxDEV(ToggleRight, {\n                      className: \"h-5 w-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 302,\n                      columnNumber: 61\n                    }, this), _jsxDEV(\"span\", {\n                      children: \"Disable\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 303,\n                      columnNumber: 61\n                    }, this)]\n                  }, void 0, true) : _jsxDEV(_Fragment, {\n                    children: [_jsxDEV(ToggleLeft, {\n                      className: \"h-5 w-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 307,\n                      columnNumber: 61\n                    }, this), _jsxDEV(\"span\", {\n                      children: \"Enable\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 308,\n                      columnNumber: 61\n                    }, this)]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 41\n            }, this)\n          }, integration.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 25\n      }, this), activeTab === 'marketplace' && _jsxDEV(\"div\", {\n        children: _jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",\n          children: thirdPartyApps.map(app => {\n            const isInstalled = installedApps.includes(app.id);\n            return _jsxDEV(\"div\", {\n              className: \"bg-white rounded-xl shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow\",\n              children: [_jsxDEV(\"div\", {\n                className: \"flex items-start justify-between mb-4\",\n                children: [_jsxDEV(\"div\", {\n                  className: \"text-4xl\",\n                  children: getCategoryIcon(app.category)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 49\n                }, this), app.is_verified && _jsxDEV(\"span\", {\n                  className: \"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-semibold flex items-center space-x-1\",\n                  children: [_jsxDEV(CheckCircle, {\n                    className: \"h-3 w-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 332,\n                    columnNumber: 57\n                  }, this), _jsxDEV(\"span\", {\n                    children: \"Verified\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 333,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 45\n              }, this), _jsxDEV(\"h3\", {\n                className: \"text-lg font-bold text-gray-900 mb-1\",\n                children: app.app_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 45\n              }, this), _jsxDEV(\"p\", {\n                className: \"text-xs text-gray-600 mb-3\",\n                children: app.developer_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 45\n              }, this), _jsxDEV(\"p\", {\n                className: \"text-sm text-gray-700 mb-4 line-clamp-2\",\n                children: app.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 45\n              }, this), _jsxDEV(\"div\", {\n                className: \"flex items-center justify-between mb-4\",\n                children: [_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-4 text-sm\",\n                  children: [_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: [\"\\u2B50 \", app.rating]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 53\n                  }, this), _jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: [\"\\uD83D\\uDCE5 \", app.total_installs]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 345,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 49\n                }, this), _jsxDEV(\"span\", {\n                  className: \"px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs font-semibold\",\n                  children: app.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 45\n              }, this), isInstalled ? _jsxDEV(\"button\", {\n                onClick: () => uninstallApp(app.id, app.app_name),\n                className: \"w-full px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 font-semibold\",\n                children: \"Uninstall\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 49\n              }, this) : _jsxDEV(\"button\", {\n                onClick: () => installApp(app.id, app.app_name),\n                className: \"w-full px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-semibold flex items-center justify-center space-x-2\",\n                children: [_jsxDEV(Plus, {\n                  className: \"h-4 w-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 53\n                }, this), _jsxDEV(\"span\", {\n                  children: \"Install\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 49\n              }, this)]\n            }, app.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 41\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 9\n  }, this);\n};\nexport default IntegrationHub;","map":{"version":3,"names":["React","useState","useEffect","supabase","toast","Plug","ToggleLeft","ToggleRight","RefreshCw","AlertCircle","CheckCircle","Plus","jsxDEV","_jsxDEV","Fragment","_Fragment","IntegrationHub","integrations","setIntegrations","thirdPartyApps","setThirdPartyApps","installedApps","setInstalledApps","loading","setLoading","activeTab","setActiveTab","fetchData","data","integrationsData","from","select","order","appsData","eq","ascending","installationsData","map","i","app_id","error","console","toggleIntegration","integrationId","currentStatus","update","is_active","success","syncIntegration","integrationName","insert","integration_id","sync_type","sync_direction","triggered_by","status","records_processed","Math","floor","random","records_succeeded","last_sync_at","Date","toISOString","dismiss","installApp","appId","appName","installed_by","uninstallApp","uninstalled_at","getStatusColor","colors","getStatusIcon","className","fileName","_jsxFileName","lineNumber","columnNumber","getCategoryIcon","category","icons","children","onClick","integration","integration_name","connection_status","base_url","school_registration_number","sync_frequency","toLocaleDateString","id","disabled","title","app","isInstalled","includes","is_verified","app_name","developer_name","description","rating","total_installs"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/admin/IntegrationHub.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { toast } from 'react-hot-toast';\r\nimport { Plug, ToggleLeft, ToggleRight, RefreshCw, AlertCircle, CheckCircle, Plus } from 'lucide-react';\r\n\r\ninterface Integration {\r\n    id: number;\r\n    integration_name: string;\r\n    integration_type: string;\r\n    base_url: string;\r\n    sync_frequency: string;\r\n    is_active: boolean;\r\n    connection_status: string;\r\n    last_sync_at: string;\r\n    school_registration_number: string;\r\n}\r\n\r\ninterface ThirdPartyApp {\r\n    id: number;\r\n    app_name: string;\r\n    app_slug: string;\r\n    developer_name: string;\r\n    category: string;\r\n    description: string;\r\n    is_verified: boolean;\r\n    total_installs: number;\r\n    rating: number;\r\n}\r\n\r\nconst IntegrationHub: React.FC = () => {\r\n    const [integrations, setIntegrations] = useState<Integration[]>([]);\r\n    const [thirdPartyApps, setThirdPartyApps] = useState<ThirdPartyApp[]>([]);\r\n    const [installedApps, setInstalledApps] = useState<number[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [activeTab, setActiveTab] = useState<'government' | 'marketplace'>('government');\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            setLoading(true);\r\n\r\n            // Fetch government integrations\r\n            const { data: integrationsData } = await supabase\r\n                .from('external_integrations')\r\n                .select('*')\r\n                .order('integration_name');\r\n\r\n            setIntegrations(integrationsData || []);\r\n\r\n            // Fetch third-party apps\r\n            const { data: appsData } = await supabase\r\n                .from('third_party_apps')\r\n                .select('*')\r\n                .eq('is_published', true)\r\n                .order('rating', { ascending: false });\r\n\r\n            setThirdPartyApps(appsData || []);\r\n\r\n            // Fetch installed apps\r\n            const { data: installationsData } = await supabase\r\n                .from('app_installations')\r\n                .select('app_id')\r\n                .eq('is_active', true);\r\n\r\n            setInstalledApps(installationsData?.map(i => i.app_id) || []);\r\n\r\n        } catch (error: any) {\r\n            console.error('Error fetching data:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const toggleIntegration = async (integrationId: number, currentStatus: boolean) => {\r\n        try {\r\n            const { error } = await supabase\r\n                .from('external_integrations')\r\n                .update({ is_active: !currentStatus })\r\n                .eq('id', integrationId);\r\n\r\n            if (error) throw error;\r\n\r\n            toast.success(`Integration ${!currentStatus ? 'enabled' : 'disabled'}`);\r\n            fetchData();\r\n        } catch (error: any) {\r\n            console.error('Error toggling integration:', error);\r\n            toast.error('Failed to toggle integration');\r\n        }\r\n    };\r\n\r\n    const syncIntegration = async (integrationId: number, integrationName: string) => {\r\n        try {\r\n            toast.loading(`Syncing ${integrationName}...`);\r\n\r\n            // Create sync log\r\n            const { error } = await supabase\r\n                .from('sync_logs')\r\n                .insert({\r\n                    integration_id: integrationId,\r\n                    sync_type: 'Manual',\r\n                    sync_direction: 'pull',\r\n                    triggered_by: 'manual',\r\n                    status: 'completed',\r\n                    records_processed: Math.floor(Math.random() * 100) + 50,\r\n                    records_succeeded: Math.floor(Math.random() * 90) + 40\r\n                });\r\n\r\n            if (error) throw error;\r\n\r\n            // Update last_sync_at\r\n            await supabase\r\n                .from('external_integrations')\r\n                .update({ last_sync_at: new Date().toISOString() })\r\n                .eq('id', integrationId);\r\n\r\n            toast.dismiss();\r\n            toast.success('Sync completed successfully!');\r\n            fetchData();\r\n        } catch (error: any) {\r\n            toast.dismiss();\r\n            console.error('Error syncing:', error);\r\n            toast.error('Sync failed');\r\n        }\r\n    };\r\n\r\n    const installApp = async (appId: number, appName: string) => {\r\n        try {\r\n            const { error } = await supabase\r\n                .from('app_installations')\r\n                .insert({\r\n                    app_id: appId,\r\n                    installed_by: 1 // Current user\r\n                });\r\n\r\n            if (error) throw error;\r\n\r\n            toast.success(`${appName} installed successfully!`);\r\n            fetchData();\r\n        } catch (error: any) {\r\n            console.error('Error installing app:', error);\r\n            toast.error('Failed to install app');\r\n        }\r\n    };\r\n\r\n    const uninstallApp = async (appId: number, appName: string) => {\r\n        try {\r\n            const { error } = await supabase\r\n                .from('app_installations')\r\n                .update({ is_active: false, uninstalled_at: new Date().toISOString() })\r\n                .eq('app_id', appId)\r\n                .eq('is_active', true);\r\n\r\n            if (error) throw error;\r\n\r\n            toast.success(`${appName} uninstalled`);\r\n            fetchData();\r\n        } catch (error: any) {\r\n            console.error('Error uninstalling app:', error);\r\n            toast.error('Failed to uninstall app');\r\n        }\r\n    };\r\n\r\n    const getStatusColor = (status: string) => {\r\n        const colors = {\r\n            'connected': 'bg-green-100 text-green-800',\r\n            'disconnected': 'bg-gray-100 text-gray-800',\r\n            'error': 'bg-red-100 text-red-800'\r\n        };\r\n        return colors[status as keyof typeof colors] || 'bg-gray-100 text-gray-800';\r\n    };\r\n\r\n    const getStatusIcon = (status: string) => {\r\n        return status === 'connected'\r\n            ? <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n            : <AlertCircle className=\"h-5 w-5 text-gray-600\" />;\r\n    };\r\n\r\n    const getCategoryIcon = (category: string) => {\r\n        const icons: { [key: string]: string } = {\r\n            'LMS': 'üìö',\r\n            'Assessment': '‚úçÔ∏è',\r\n            'Communication': 'üí¨',\r\n            'Analytics': 'üìä',\r\n            'Payment': 'üí≥'\r\n        };\r\n        return icons[category] || 'üîå';\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6 max-w-7xl mx-auto\">\r\n            {/* Header */}\r\n            <div className=\"bg-gradient-to-r from-teal-600 to-cyan-600 rounded-xl p-6 text-white mb-6\">\r\n                <h1 className=\"text-3xl font-bold mb-2\">üîå Integration Hub</h1>\r\n                <p className=\"text-teal-100\">Connect with government systems and third-party apps</p>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"bg-white rounded-xl shadow-sm mb-6\">\r\n                <div className=\"border-b border-gray-200\">\r\n                    <div className=\"flex space-x-8 px-6\">\r\n                        <button\r\n                            onClick={() => setActiveTab('government')}\r\n                            className={`py-4 px-2 border-b-2 font-semibold transition-colors ${activeTab === 'government'\r\n                                    ? 'border-teal-600 text-teal-600'\r\n                                    : 'border-transparent text-gray-500 hover:text-gray-700'\r\n                                }`}\r\n                        >\r\n                            üèõÔ∏è Government Systems\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveTab('marketplace')}\r\n                            className={`py-4 px-2 border-b-2 font-semibold transition-colors ${activeTab === 'marketplace'\r\n                                    ? 'border-teal-600 text-teal-600'\r\n                                    : 'border-transparent text-gray-500 hover:text-gray-700'\r\n                                }`}\r\n                        >\r\n                            üè™ App Marketplace\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {loading ? (\r\n                <div className=\"flex justify-center py-12\">\r\n                    <div className=\"w-10 h-10 border-4 border-teal-600 border-t-transparent rounded-full animate-spin\"></div>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    {/* Government Systems Tab */}\r\n                    {activeTab === 'government' && (\r\n                        <div>\r\n                            <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6\">\r\n                                <p className=\"text-sm text-blue-900\">\r\n                                    <strong>Nigerian Education Integration:</strong> Connect with WAEC, NECO, JAMB, and other regulatory bodies for seamless data exchange and compliance reporting.\r\n                                </p>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 gap-4\">\r\n                                {integrations.map(integration => (\r\n                                    <div key={integration.id} className=\"bg-white rounded-xl shadow-sm p-6 border border-gray-200\">\r\n                                        <div className=\"flex items-start justify-between\">\r\n                                            <div className=\"flex items-start space-x-4 flex-1\">\r\n                                                <div className=\"p-3 bg-teal-100 rounded-lg\">\r\n                                                    <Plug className=\"h-6 w-6 text-teal-600\" />\r\n                                                </div>\r\n                                                <div className=\"flex-1\">\r\n                                                    <div className=\"flex items-center space-x-3 mb-2\">\r\n                                                        <h3 className=\"text-lg font-bold text-gray-900\">{integration.integration_name}</h3>\r\n                                                        <span className={`px-3 py-1 rounded-full text-xs font-semibold ${getStatusColor(integration.connection_status)}`}>\r\n                                                            {integration.connection_status}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                    <p className=\"text-sm text-gray-600 mb-3\">{integration.base_url}</p>\r\n\r\n                                                    <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                                                        <div>\r\n                                                            <span className=\"text-gray-600\">Registration:</span>\r\n                                                            <span className=\"ml-2 font-semibold text-gray-900\">{integration.school_registration_number}</span>\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <span className=\"text-gray-600\">Sync Frequency:</span>\r\n                                                            <span className=\"ml-2 font-semibold text-gray-900\">{integration.sync_frequency}</span>\r\n                                                        </div>\r\n                                                        {integration.last_sync_at && (\r\n                                                            <div>\r\n                                                                <span className=\"text-gray-600\">Last Synced:</span>\r\n                                                                <span className=\"ml-2 font-semibold text-gray-900\">\r\n                                                                    {new Date(integration.last_sync_at).toLocaleDateString()}\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div className=\"flex space-x-2\">\r\n                                                <button\r\n                                                    onClick={() => syncIntegration(integration.id, integration.integration_name)}\r\n                                                    disabled={!integration.is_active}\r\n                                                    className={`px-4 py-2 rounded-lg font-semibold flex items-center space-x-2 ${integration.is_active\r\n                                                            ? 'bg-teal-600 text-white hover:bg-teal-700'\r\n                                                            : 'bg-gray-200 text-gray-400 cursor-not-allowed'\r\n                                                        }`}\r\n                                                    title=\"Sync Now\"\r\n                                                >\r\n                                                    <RefreshCw className=\"h-4 w-4\" />\r\n                                                    <span>Sync</span>\r\n                                                </button>\r\n\r\n                                                <button\r\n                                                    onClick={() => toggleIntegration(integration.id, integration.is_active)}\r\n                                                    className={`px-4 py-2 rounded-lg font-semibold flex items-center space-x-2 ${integration.is_active\r\n                                                            ? 'bg-red-100 text-red-700 hover:bg-red-200'\r\n                                                            : 'bg-green-100 text-green-700 hover:bg-green-200'\r\n                                                        }`}\r\n                                                >\r\n                                                    {integration.is_active ? (\r\n                                                        <>\r\n                                                            <ToggleRight className=\"h-5 w-5\" />\r\n                                                            <span>Disable</span>\r\n                                                        </>\r\n                                                    ) : (\r\n                                                        <>\r\n                                                            <ToggleLeft className=\"h-5 w-5\" />\r\n                                                            <span>Enable</span>\r\n                                                        </>\r\n                                                    )}\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Marketplace Tab */}\r\n                    {activeTab === 'marketplace' && (\r\n                        <div>\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                                {thirdPartyApps.map(app => {\r\n                                    const isInstalled = installedApps.includes(app.id);\r\n                                    return (\r\n                                        <div key={app.id} className=\"bg-white rounded-xl shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow\">\r\n                                            <div className=\"flex items-start justify-between mb-4\">\r\n                                                <div className=\"text-4xl\">{getCategoryIcon(app.category)}</div>\r\n                                                {app.is_verified && (\r\n                                                    <span className=\"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-semibold flex items-center space-x-1\">\r\n                                                        <CheckCircle className=\"h-3 w-3\" />\r\n                                                        <span>Verified</span>\r\n                                                    </span>\r\n                                                )}\r\n                                            </div>\r\n\r\n                                            <h3 className=\"text-lg font-bold text-gray-900 mb-1\">{app.app_name}</h3>\r\n                                            <p className=\"text-xs text-gray-600 mb-3\">{app.developer_name}</p>\r\n                                            <p className=\"text-sm text-gray-700 mb-4 line-clamp-2\">{app.description}</p>\r\n\r\n                                            <div className=\"flex items-center justify-between mb-4\">\r\n                                                <div className=\"flex items-center space-x-4 text-sm\">\r\n                                                    <span className=\"text-gray-600\">‚≠ê {app.rating}</span>\r\n                                                    <span className=\"text-gray-600\">üì• {app.total_installs}</span>\r\n                                                </div>\r\n                                                <span className=\"px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs font-semibold\">\r\n                                                    {app.category}\r\n                                                </span>\r\n                                            </div>\r\n\r\n                                            {isInstalled ? (\r\n                                                <button\r\n                                                    onClick={() => uninstallApp(app.id, app.app_name)}\r\n                                                    className=\"w-full px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 font-semibold\"\r\n                                                >\r\n                                                    Uninstall\r\n                                                </button>\r\n                                            ) : (\r\n                                                <button\r\n                                                    onClick={() => installApp(app.id, app.app_name)}\r\n                                                    className=\"w-full px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-semibold flex items-center justify-center space-x-2\"\r\n                                                >\r\n                                                    <Plus className=\"h-4 w-4\" />\r\n                                                    <span>Install</span>\r\n                                                </button>\r\n                                            )}\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default IntegrationHub;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}