{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\admin\\\\ReportsScreen.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { ChartBarIcon, TrophyIcon, TrendingUpIcon, SUBJECT_COLORS } from '../../constants';\nimport { supabase } from '../../lib/supabase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SubjectGradesChart = ({\n  data\n}) => {\n  const maxValue = 100;\n  return _jsxDEV(\"div\", {\n    className: \"space-y-2\",\n    children: data.map(item => {\n      const colorClass = SUBJECT_COLORS[item.subject] || 'bg-gray-200 text-gray-800';\n      return _jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [_jsxDEV(\"div\", {\n          className: \"w-28 text-sm font-medium text-gray-600 truncate\",\n          children: item.subject\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 13\n        }, this), _jsxDEV(\"div\", {\n          className: \"flex-grow bg-gray-200 rounded-full h-5\",\n          children: _jsxDEV(\"div\", {\n            className: `${colorClass} h-5 rounded-full flex items-center justify-end pr-2 text-xs font-bold`,\n            style: {\n              width: `${item.averageScore / maxValue * 100}%`\n            },\n            children: item.averageScore\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 13\n        }, this)]\n      }, item.subject, true, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n};\nconst TopStudentsList = ({\n  students\n}) => {\n  return _jsxDEV(\"div\", {\n    className: \"space-y-3\",\n    children: students.map(student => _jsxDEV(\"div\", {\n      className: \"bg-gray-50 p-3 rounded-lg flex items-center space-x-3\",\n      children: [student.avatarUrl ? _jsxDEV(\"img\", {\n        src: student.avatarUrl,\n        alt: student.name,\n        className: \"w-12 h-12 rounded-full object-cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this) : _jsxDEV(\"div\", {\n        className: \"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-500\",\n        children: _jsxDEV(\"span\", {\n          className: \"text-sm font-bold\",\n          children: student.name.charAt(0)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }, this), _jsxDEV(\"div\", {\n        className: \"flex-grow\",\n        children: [_jsxDEV(\"p\", {\n          className: \"font-bold text-gray-800\",\n          children: student.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this), _jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: [\"Grade \", student.grade, student.section]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), _jsxDEV(\"div\", {\n        className: \"text-right\",\n        children: [_jsxDEV(\"p\", {\n          className: \"font-bold text-lg text-green-600\",\n          children: [student.averageScore, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), _jsxDEV(\"p\", {\n          className: \"text-xs text-gray-500\",\n          children: \"Average\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this)]\n    }, student.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\nconst AttendanceCorrelationChart = ({\n  data\n}) => {\n  if (data.length < 2) return _jsxDEV(\"div\", {\n    className: \"text-center text-gray-500 py-10\",\n    children: \"Not enough data for correlation\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 31\n  }, this);\n  const width = 280;\n  const height = 120;\n  const padding = 20;\n  const maxValue = 100;\n  const stepX = (width - padding * 2) / (data.length - 1 || 1);\n  const stepY = (height - padding * 2) / maxValue;\n  const points = data.map((d, i) => `${padding + i * stepX},${height - padding - d.averageScore * stepY}`).join(' ');\n  return _jsxDEV(\"div\", {\n    className: \"relative\",\n    children: [_jsxDEV(\"svg\", {\n      viewBox: `0 0 ${width} ${height}`,\n      className: \"w-full h-auto\",\n      children: [[...Array(5)].map((_, i) => {\n        const y = height - padding - i * 25 * stepY;\n        return _jsxDEV(\"g\", {\n          children: [_jsxDEV(\"line\", {\n            x1: padding,\n            y1: y,\n            x2: width - padding,\n            y2: y,\n            stroke: \"#e5e7eb\",\n            strokeWidth: \"1\",\n            strokeDasharray: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this), _jsxDEV(\"text\", {\n            x: padding - 5,\n            y: y + 3,\n            textAnchor: \"end\",\n            fontSize: \"10\",\n            fill: \"#6b7280\",\n            children: i * 25\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this);\n      }), _jsxDEV(\"polyline\", {\n        fill: \"none\",\n        stroke: \"#4f46e5\",\n        strokeWidth: \"2\",\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        points: points\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), data.map((d, i) => _jsxDEV(\"circle\", {\n        cx: padding + i * stepX,\n        cy: height - padding - d.averageScore * stepY,\n        r: \"3\",\n        fill: \"white\",\n        stroke: \"#4f46e5\",\n        strokeWidth: \"2\"\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), _jsxDEV(\"div\", {\n      className: \"flex justify-between px-5 -mt-4\",\n      children: data.map((d, i) => _jsxDEV(\"span\", {\n        className: \"text-xs text-gray-500\",\n        children: d.attendanceBracket\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\nconst ReportsScreen = () => {\n  const [subjectAverages, setSubjectAverages] = useState([]);\n  const [topStudents, setTopStudents] = useState([]);\n  const [attendanceData, setAttendanceData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchReportsData = async () => {\n      setLoading(true);\n      try {\n        const {\n          data: performanceData,\n          error: perfError\n        } = await supabase.from('academic_performance').select('student_id, subject, score');\n        if (perfError) throw perfError;\n        const {\n          data: studentsData,\n          error: studentError\n        } = await supabase.from('students').select('id, name, grade, section, avatar_url');\n        if (studentError) throw studentError;\n        const subjectMap = {};\n        performanceData?.forEach(p => {\n          if (!subjectMap[p.subject]) subjectMap[p.subject] = {\n            total: 0,\n            count: 0\n          };\n          subjectMap[p.subject].total += p.score || 0;\n          subjectMap[p.subject].count += 1;\n        });\n        const avgList = Object.keys(subjectMap).map(sub => ({\n          subject: sub,\n          averageScore: Math.round(subjectMap[sub].total / subjectMap[sub].count)\n        })).sort((a, b) => b.averageScore - a.averageScore);\n        setSubjectAverages(avgList);\n        const studentPerformanceMap = {};\n        performanceData?.forEach(p => {\n          if (!studentPerformanceMap[p.student_id]) studentPerformanceMap[p.student_id] = {\n            total: 0,\n            count: 0\n          };\n          studentPerformanceMap[p.student_id].total += p.score || 0;\n          studentPerformanceMap[p.student_id].count += 1;\n        });\n        const rankedStudents = studentsData?.map(student => {\n          const stats = studentPerformanceMap[student.id];\n          const avg = stats ? Math.round(stats.total / stats.count) : 0;\n          return {\n            id: student.id,\n            name: student.name,\n            grade: student.grade,\n            section: student.section,\n            averageScore: avg,\n            avatarUrl: student.avatar_url\n          };\n        }).sort((a, b) => b.averageScore - a.averageScore).slice(0, 5);\n        setTopStudents(rankedStudents || []);\n        const brackets = [{\n          label: '<60%',\n          scores: [],\n          attendanceLabel: '<75%'\n        }, {\n          label: '60-70%',\n          scores: [],\n          attendanceLabel: '75-85%'\n        }, {\n          label: '70-80%',\n          scores: [],\n          attendanceLabel: '85-90%'\n        }, {\n          label: '80-90%',\n          scores: [],\n          attendanceLabel: '90-95%'\n        }, {\n          label: '90%+',\n          scores: [],\n          attendanceLabel: '95%+'\n        }];\n        (studentsData || []).forEach(student => {\n          const stats = studentPerformanceMap[student.id];\n          const avg = stats ? stats.total / stats.count : 0;\n          if (avg >= 90) brackets[4].scores.push(avg);else if (avg >= 80) brackets[3].scores.push(avg);else if (avg >= 70) brackets[2].scores.push(avg);else if (avg >= 60) brackets[1].scores.push(avg);else brackets[0].scores.push(avg);\n        });\n        const correlationData = brackets.map(b => ({\n          attendanceBracket: b.attendanceLabel,\n          averageScore: b.scores.length > 0 ? Math.round(b.scores.reduce((a, b) => a + b, 0) / b.scores.length) : 0\n        })).filter(d => d.averageScore > 0);\n        setAttendanceData(correlationData);\n      } catch (err) {\n        console.error(\"Error fetching reports:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchReportsData();\n  }, []);\n  if (loading) {\n    return _jsxDEV(\"div\", {\n      className: \"p-8 text-center text-gray-500\",\n      children: \"Loading reports...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 12\n    }, this);\n  }\n  return _jsxDEV(\"div\", {\n    className: \"p-4 space-y-5 bg-gray-50\",\n    children: [_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl shadow-sm p-4\",\n      children: [_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3 mb-4\",\n        children: [_jsxDEV(\"div\", {\n          className: \"bg-sky-100 text-sky-500 p-2 rounded-lg\",\n          children: _jsxDEV(ChartBarIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 67\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), _jsxDEV(\"h3\", {\n          className: \"font-bold text-gray-800\",\n          children: \"Average Grades by Subject\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), subjectAverages.length > 0 ? _jsxDEV(SubjectGradesChart, {\n        data: subjectAverages\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 39\n      }, this) : _jsxDEV(\"p\", {\n        className: \"text-gray-400 text-sm\",\n        children: \"No academic data available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 87\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this), _jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl shadow-sm p-4\",\n      children: [_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3 mb-4\",\n        children: [_jsxDEV(\"div\", {\n          className: \"bg-green-100 text-green-500 p-2 rounded-lg\",\n          children: _jsxDEV(TrophyIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 71\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), _jsxDEV(\"h3\", {\n          className: \"font-bold text-gray-800\",\n          children: \"Top Performing Students\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), topStudents.length > 0 ? _jsxDEV(TopStudentsList, {\n        students: topStudents\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 35\n      }, this) : _jsxDEV(\"p\", {\n        className: \"text-gray-400 text-sm\",\n        children: \"No student data available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 80\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this), _jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl shadow-sm p-4\",\n      children: [_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3 mb-2\",\n        children: [_jsxDEV(\"div\", {\n          className: \"bg-indigo-100 text-indigo-500 p-2 rounded-lg\",\n          children: _jsxDEV(TrendingUpIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 73\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), _jsxDEV(\"h3\", {\n          className: \"font-bold text-gray-800\",\n          children: \"Attendance-Performance Trend\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), attendanceData.length > 0 ? _jsxDEV(AttendanceCorrelationChart, {\n        data: attendanceData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 38\n      }, this) : _jsxDEV(\"p\", {\n        className: \"text-gray-400 text-sm\",\n        children: \"Insufficient data for analysis\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 93\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, this);\n};\nexport default ReportsScreen;","map":{"version":3,"names":["React","useState","useEffect","ChartBarIcon","TrophyIcon","TrendingUpIcon","SUBJECT_COLORS","supabase","jsxDEV","_jsxDEV","SubjectGradesChart","data","maxValue","className","children","map","item","colorClass","subject","fileName","_jsxFileName","lineNumber","columnNumber","style","width","averageScore","TopStudentsList","students","student","avatarUrl","src","alt","name","charAt","grade","section","id","AttendanceCorrelationChart","length","height","padding","stepX","stepY","points","d","i","join","viewBox","Array","_","y","x1","y1","x2","y2","stroke","strokeWidth","strokeDasharray","x","textAnchor","fontSize","fill","strokeLinecap","strokeLinejoin","cx","cy","r","attendanceBracket","ReportsScreen","subjectAverages","setSubjectAverages","topStudents","setTopStudents","attendanceData","setAttendanceData","loading","setLoading","fetchReportsData","performanceData","error","perfError","from","select","studentsData","studentError","subjectMap","forEach","p","total","count","score","avgList","Object","keys","sub","Math","round","sort","a","b","studentPerformanceMap","student_id","rankedStudents","stats","avg","avatar_url","slice","brackets","label","scores","attendanceLabel","push","correlationData","reduce","filter","err","console"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/admin/ReportsScreen.tsx"],"sourcesContent":["\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { ChartBarIcon, TrophyIcon, TrendingUpIcon, SUBJECT_COLORS, gradeColors } from '../../constants';\r\n// import { mockSubjectAverages, mockTopStudents, mockAttendanceCorrelation } from '../../data';\r\nimport { supabase } from '../../lib/supabase';\r\n\r\ninterface SubjectAverage {\r\n  subject: string;\r\n  averageScore: number;\r\n}\r\n\r\ninterface TopStudent {\r\n  id: string;\r\n  name: string;\r\n  grade: number;\r\n  section: string;\r\n  averageScore: number;\r\n  avatarUrl?: string;\r\n}\r\n\r\ninterface AttendanceCorrelation {\r\n  attendanceBracket: string;\r\n  averageScore: number;\r\n}\r\n\r\nconst SubjectGradesChart: React.FC<{ data: SubjectAverage[] }> = ({ data }) => {\r\n  const maxValue = 100;\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      {data.map(item => {\r\n        const colorClass = SUBJECT_COLORS[item.subject] || 'bg-gray-200 text-gray-800';\r\n        return (\r\n          <div key={item.subject} className=\"flex items-center space-x-2\">\r\n            <div className=\"w-28 text-sm font-medium text-gray-600 truncate\">{item.subject}</div>\r\n            <div className=\"flex-grow bg-gray-200 rounded-full h-5\">\r\n              <div className={`${colorClass} h-5 rounded-full flex items-center justify-end pr-2 text-xs font-bold`} style={{ width: `${(item.averageScore / maxValue) * 100}%` }}>\r\n                {item.averageScore}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TopStudentsList: React.FC<{ students: TopStudent[] }> = ({ students }) => {\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {students.map((student) => (\r\n        <div key={student.id} className=\"bg-gray-50 p-3 rounded-lg flex items-center space-x-3\">\r\n          {student.avatarUrl ? (\r\n            <img src={student.avatarUrl} alt={student.name} className=\"w-12 h-12 rounded-full object-cover\" />\r\n          ) : (\r\n            <div className=\"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-500\">\r\n              {/* Use a simple placeholder if UserIcon is not imported in this file scope's props, but ReportsScreen imports chart icons. \r\n                  Wait, reports screen imports chart icons. I need to make sure UserIcon is imported or available. \r\n                  Checking imports: `import { ChartBarIcon, TrophyIcon, TrendingUpIcon, SUBJECT_COLORS, gradeColors } from '../../constants';`\r\n                  It does NOT import UserIcon. I must add it to imports first. \r\n               */}\r\n              <span className=\"text-sm font-bold\">{student.name.charAt(0)}</span>\r\n            </div>\r\n          )}\r\n          <div className=\"flex-grow\">\r\n            <p className=\"font-bold text-gray-800\">{student.name}</p>\r\n            <p className=\"text-sm text-gray-500\">Grade {student.grade}{student.section}</p>\r\n          </div>\r\n          <div className=\"text-right\">\r\n            <p className=\"font-bold text-lg text-green-600\">{student.averageScore}%</p>\r\n            <p className=\"text-xs text-gray-500\">Average</p>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AttendanceCorrelationChart: React.FC<{ data: AttendanceCorrelation[] }> = ({ data }) => {\r\n  if (data.length < 2) return <div className=\"text-center text-gray-500 py-10\">Not enough data for correlation</div>;\r\n\r\n  const width = 280;\r\n  const height = 120;\r\n  const padding = 20;\r\n  const maxValue = 100;\r\n  // Sort logic just in case, though brackets usually ordered\r\n  const stepX = (width - padding * 2) / (data.length - 1 || 1);\r\n  const stepY = (height - padding * 2) / maxValue;\r\n  const points = data.map((d, i) => `${padding + i * stepX},${height - padding - d.averageScore * stepY}`).join(' ');\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <svg viewBox={`0 0 ${width} ${height}`} className=\"w-full h-auto\">\r\n        {/* Y-axis labels and lines */}\r\n        {[...Array(5)].map((_, i) => {\r\n          const y = height - padding - ((i * 25) * stepY);\r\n          return (\r\n            <g key={i}>\r\n              <line x1={padding} y1={y} x2={width - padding} y2={y} stroke=\"#e5e7eb\" strokeWidth=\"1\" strokeDasharray=\"2\" />\r\n              <text x={padding - 5} y={y + 3} textAnchor=\"end\" fontSize=\"10\" fill=\"#6b7280\">{i * 25}</text>\r\n            </g>\r\n          )\r\n        })}\r\n        {/* Main line */}\r\n        <polyline fill=\"none\" stroke=\"#4f46e5\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" points={points} />\r\n        {/* Data points */}\r\n        {data.map((d, i) => (\r\n          <circle key={i} cx={padding + i * stepX} cy={height - padding - d.averageScore * stepY} r=\"3\" fill=\"white\" stroke=\"#4f46e5\" strokeWidth=\"2\" />\r\n        ))}\r\n      </svg>\r\n      {/* X-axis labels */}\r\n      <div className=\"flex justify-between px-5 -mt-4\">\r\n        {data.map((d, i) => (\r\n          <span key={i} className=\"text-xs text-gray-500\">{d.attendanceBracket}</span>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst ReportsScreen: React.FC = () => {\r\n  const [subjectAverages, setSubjectAverages] = useState<SubjectAverage[]>([]);\r\n  const [topStudents, setTopStudents] = useState<TopStudent[]>([]);\r\n  const [attendanceData, setAttendanceData] = useState<AttendanceCorrelation[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchReportsData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        // Fetch Performance Data\r\n        // Join with students to get names/grades\r\n        // Note: supabase-js plain query doesn't do deep aggregation easily without Views or RPC.\r\n        // We will fetch raw data and aggregate in JS for now (assuming dataset < 1000 records for prototype)\r\n\r\n        const { data: performanceData, error: perfError } = await supabase\r\n          .from('academic_performance')\r\n          .select('student_id, subject, score');\r\n\r\n        if (perfError) throw perfError;\r\n\r\n        const { data: studentsData, error: studentError } = await supabase\r\n          .from('students')\r\n          .select('id, name, grade, section, avatar_url');\r\n\r\n        if (studentError) throw studentError;\r\n\r\n        // 1. Calculate Subject Averages\r\n        const subjectMap: { [key: string]: { total: number, count: number } } = {};\r\n        performanceData?.forEach(p => {\r\n          if (!subjectMap[p.subject]) subjectMap[p.subject] = { total: 0, count: 0 };\r\n          subjectMap[p.subject].total += (p.score || 0);\r\n          subjectMap[p.subject].count += 1;\r\n        });\r\n\r\n        const avgList = Object.keys(subjectMap).map(sub => ({\r\n          subject: sub,\r\n          averageScore: Math.round(subjectMap[sub].total / subjectMap[sub].count)\r\n        })).sort((a, b) => b.averageScore - a.averageScore);\r\n\r\n        setSubjectAverages(avgList);\r\n\r\n        // 2. Calculate Top Students\r\n        const studentPerformanceMap: { [key: string]: { total: number, count: number } } = {};\r\n        performanceData?.forEach(p => {\r\n          if (!studentPerformanceMap[p.student_id]) studentPerformanceMap[p.student_id] = { total: 0, count: 0 };\r\n          studentPerformanceMap[p.student_id].total += (p.score || 0);\r\n          studentPerformanceMap[p.student_id].count += 1;\r\n        });\r\n\r\n        const rankedStudents = studentsData?.map(student => {\r\n          const stats = studentPerformanceMap[student.id];\r\n          const avg = stats ? Math.round(stats.total / stats.count) : 0;\r\n          return {\r\n            id: student.id,\r\n            name: student.name,\r\n            grade: student.grade,\r\n            section: student.section,\r\n            averageScore: avg,\r\n            avatarUrl: student.avatar_url\r\n          };\r\n        }).sort((a, b) => b.averageScore - a.averageScore).slice(0, 5); // Top 5\r\n\r\n        setTopStudents(rankedStudents || []);\r\n\r\n        // 3. Attendance Correlation (Mockish logic with real data if available, simply mapping avg score to some dummy attendance if attendance table is sparse, \r\n        // but let's try to fetch attendance if possible or leave empty)\r\n        // For now, let's use a placeholder that relies on the calculated averages to show *some* chart \r\n        // We don't have linked attendance-performance readily available without complex joins.\r\n        // We'll generate a chart based on the distribution of student averages we just calculated.\r\n\r\n        // Group students by average score brackets (High, Med, Low) -> usually correlates to attendance in real life\r\n        // This is a simplification.\r\n        const brackets = [\r\n          { label: '<60%', scores: [] as number[], attendanceLabel: '<75%' },\r\n          { label: '60-70%', scores: [] as number[], attendanceLabel: '75-85%' },\r\n          { label: '70-80%', scores: [] as number[], attendanceLabel: '85-90%' },\r\n          { label: '80-90%', scores: [] as number[], attendanceLabel: '90-95%' },\r\n          { label: '90%+', scores: [] as number[], attendanceLabel: '95%+' },\r\n        ];\r\n\r\n        // Check actual student averages\r\n        (studentsData || []).forEach(student => {\r\n          const stats = studentPerformanceMap[student.id];\r\n          const avg = stats ? (stats.total / stats.count) : 0;\r\n          if (avg >= 90) brackets[4].scores.push(avg);\r\n          else if (avg >= 80) brackets[3].scores.push(avg);\r\n          else if (avg >= 70) brackets[2].scores.push(avg);\r\n          else if (avg >= 60) brackets[1].scores.push(avg);\r\n          else brackets[0].scores.push(avg);\r\n        });\r\n\r\n        const correlationData = brackets.map(b => ({\r\n          attendanceBracket: b.attendanceLabel, // Pretending X-axis is attendance\r\n          averageScore: b.scores.length > 0 ? Math.round(b.scores.reduce((a, b) => a + b, 0) / b.scores.length) : 0\r\n        })).filter(d => d.averageScore > 0); // Only show relevant points\r\n\r\n        setAttendanceData(correlationData);\r\n\r\n      } catch (err) {\r\n        console.error(\"Error fetching reports:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchReportsData();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <div className=\"p-8 text-center text-gray-500\">Loading reports...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 space-y-5 bg-gray-50\">\r\n      <div className=\"bg-white rounded-2xl shadow-sm p-4\">\r\n        <div className=\"flex items-center space-x-3 mb-4\">\r\n          <div className=\"bg-sky-100 text-sky-500 p-2 rounded-lg\"><ChartBarIcon /></div>\r\n          <h3 className=\"font-bold text-gray-800\">Average Grades by Subject</h3>\r\n        </div>\r\n        {subjectAverages.length > 0 ? <SubjectGradesChart data={subjectAverages} /> : <p className=\"text-gray-400 text-sm\">No academic data available</p>}\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-2xl shadow-sm p-4\">\r\n        <div className=\"flex items-center space-x-3 mb-4\">\r\n          <div className=\"bg-green-100 text-green-500 p-2 rounded-lg\"><TrophyIcon /></div>\r\n          <h3 className=\"font-bold text-gray-800\">Top Performing Students</h3>\r\n        </div>\r\n        {topStudents.length > 0 ? <TopStudentsList students={topStudents} /> : <p className=\"text-gray-400 text-sm\">No student data available</p>}\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-2xl shadow-sm p-4\">\r\n        <div className=\"flex items-center space-x-3 mb-2\">\r\n          <div className=\"bg-indigo-100 text-indigo-500 p-2 rounded-lg\"><TrendingUpIcon /></div>\r\n          <h3 className=\"font-bold text-gray-800\">Attendance-Performance Trend</h3>\r\n        </div>\r\n        {attendanceData.length > 0 ? <AttendanceCorrelationChart data={attendanceData} /> : <p className=\"text-gray-400 text-sm\">Insufficient data for analysis</p>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportsScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}