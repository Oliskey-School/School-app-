{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\shared\\\\LiveSession.tsx\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { getAIClient } from '../../lib/ai';\nimport { MicrophoneIcon, StopIcon, VideoIcon } from '../../constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction arrayBufferToBase64(buffer) {\n  let binary = '';\n  const bytes = new Uint8Array(buffer);\n  const len = bytes.byteLength;\n  for (let i = 0; i < len; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return btoa(binary);\n}\nfunction base64ToArrayBuffer(base64) {\n  const binaryString = atob(base64);\n  const len = binaryString.length;\n  const bytes = new Uint8Array(len);\n  for (let i = 0; i < len; i++) {\n    bytes[i] = binaryString.charCodeAt(i);\n  }\n  return bytes.buffer;\n}\nconst LiveSession = ({\n  onClose\n}) => {\n  const [status, setStatus] = useState('disconnected');\n  const [isMuted, setIsMuted] = useState(false);\n  const [volumeLevel, setVolumeLevel] = useState(0);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const audioContextRef = useRef(null);\n  const inputSourceRef = useRef(null);\n  const processorRef = useRef(null);\n  const streamRef = useRef(null);\n  const nextStartTimeRef = useRef(0);\n  const outputGainNodeRef = useRef(null);\n  useEffect(() => {\n    let session = null;\n    let mounted = true;\n    const startSession = async () => {\n      setStatus('connecting');\n      try {\n        const ai = getAIClient(import.meta.env.VITE_GEMINI_API_KEY || '');\n        audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)({\n          sampleRate: 24000\n        });\n        outputGainNodeRef.current = audioContextRef.current.createGain();\n        outputGainNodeRef.current.connect(audioContextRef.current.destination);\n        const stream = await navigator.mediaDevices.getUserMedia({\n          audio: {\n            sampleRate: 16000,\n            channelCount: 1,\n            echoCancellation: true\n          },\n          video: true\n        });\n        streamRef.current = stream;\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n          videoRef.current.play();\n        }\n        const sessionPromise = ai.live.connect({\n          model: 'gemini-2.0-flash',\n          config: {\n            responseModalities: [Modality.AUDIO],\n            systemInstruction: {\n              parts: [{\n                text: \"You are a helpful school assistant. Keep responses concise and friendly.\"\n              }]\n            }\n          },\n          callbacks: {\n            onopen: () => {\n              if (!mounted) return;\n              setStatus('connected');\n              console.log(\"Live Session Connected\");\n              const ctx = new (window.AudioContext || window.webkitAudioContext)({\n                sampleRate: 16000\n              });\n              const source = ctx.createMediaStreamSource(stream);\n              const processor = ctx.createScriptProcessor(4096, 1, 1);\n              processor.onaudioprocess = e => {\n                if (isMuted) return;\n                const inputData = e.inputBuffer.getChannelData(0);\n                let sum = 0;\n                for (let i = 0; i < inputData.length; i++) sum += Math.abs(inputData[i]);\n                setVolumeLevel(Math.min(100, sum / inputData.length * 500));\n                const pcmData = new Int16Array(inputData.length);\n                for (let i = 0; i < inputData.length; i++) {\n                  const s = Math.max(-1, Math.min(1, inputData[i]));\n                  pcmData[i] = s < 0 ? s * 0x8000 : s * 0x7FFF;\n                }\n                const base64Audio = arrayBufferToBase64(pcmData.buffer);\n                sessionPromise.then(currentSession => {\n                  currentSession.sendRealtimeInput({\n                    media: {\n                      mimeType: 'audio/pcm;rate=16000',\n                      data: base64Audio\n                    }\n                  });\n                });\n              };\n              source.connect(processor);\n              processor.connect(ctx.destination);\n              inputSourceRef.current = source;\n              processorRef.current = processor;\n            },\n            onmessage: async msg => {\n              if (!mounted) return;\n              const audioData = msg.serverContent?.modelTurn?.parts?.[0]?.inlineData?.data;\n              if (audioData && audioContextRef.current && outputGainNodeRef.current) {\n                const audioBufferChunk = base64ToArrayBuffer(audioData);\n                const float32Data = new Float32Array(audioBufferChunk.byteLength / 2);\n                const dataView = new DataView(audioBufferChunk);\n                for (let i = 0; i < float32Data.length; i++) {\n                  float32Data[i] = dataView.getInt16(i * 2, true) / 32768.0;\n                }\n                const audioBuffer = audioContextRef.current.createBuffer(1, float32Data.length, 24000);\n                audioBuffer.getChannelData(0).set(float32Data);\n                const source = audioContextRef.current.createBufferSource();\n                source.buffer = audioBuffer;\n                source.connect(outputGainNodeRef.current);\n                const currentTime = audioContextRef.current.currentTime;\n                const startTime = Math.max(currentTime, nextStartTimeRef.current);\n                source.start(startTime);\n                nextStartTimeRef.current = startTime + audioBuffer.duration;\n              }\n            },\n            onclose: () => {\n              if (mounted) setStatus('disconnected');\n            },\n            onerror: err => {\n              console.error(\"Live Error:\", err);\n              if (mounted) setStatus('disconnected');\n            }\n          }\n        });\n        session = sessionPromise;\n        const sendVideoFrame = () => {\n          if (!mounted || status === 'disconnected') return;\n          if (videoRef.current && canvasRef.current && session) {\n            const ctx = canvasRef.current.getContext('2d');\n            if (ctx) {\n              canvasRef.current.width = videoRef.current.videoWidth * 0.2;\n              canvasRef.current.height = videoRef.current.videoHeight * 0.2;\n              ctx.drawImage(videoRef.current, 0, 0, canvasRef.current.width, canvasRef.current.height);\n              const base64Image = canvasRef.current.toDataURL('image/jpeg', 0.5).split(',')[1];\n              session.then(s => {\n                s.sendRealtimeInput({\n                  media: {\n                    mimeType: 'image/jpeg',\n                    data: base64Image\n                  }\n                });\n              });\n            }\n          }\n          setTimeout(sendVideoFrame, 1000);\n        };\n        sendVideoFrame();\n      } catch (error) {\n        console.error(\"Failed to start live session\", error);\n        setStatus('disconnected');\n      }\n    };\n    startSession();\n    return () => {\n      mounted = false;\n      if (streamRef.current) {\n        streamRef.current.getTracks().forEach(track => track.stop());\n      }\n      if (audioContextRef.current) {\n        audioContextRef.current.close();\n      }\n      if (session) {\n        session.then(s => s.close());\n      }\n    };\n  }, []);\n  return _jsxDEV(\"div\", {\n    className: \"absolute inset-0 z-50 bg-gray-900 flex flex-col items-center justify-center p-4 text-white\",\n    children: [_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      className: \"hidden\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"relative w-full max-w-md aspect-[3/4] bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800\",\n      children: [_jsxDEV(\"video\", {\n        ref: videoRef,\n        muted: true,\n        playsInline: true,\n        className: \"w-full h-full object-cover opacity-60\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"absolute inset-0 flex flex-col items-center justify-center space-y-8\",\n        children: [_jsxDEV(\"div\", {\n          className: `w-24 h-24 rounded-full flex items-center justify-center transition-all duration-200 ${status === 'connected' ? 'bg-blue-500/20 border-4 border-blue-500' : 'bg-gray-700 animate-pulse'}`,\n          style: {\n            transform: `scale(${1 + volumeLevel / 100})`\n          },\n          children: status === 'connected' ? _jsxDEV(\"div\", {\n            className: \"w-16 h-16 rounded-full bg-blue-500 flex items-center justify-center animate-pulse\",\n            children: _jsxDEV(VideoIcon, {\n              className: \"w-8 h-8 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 29\n          }, this) : _jsxDEV(\"div\", {\n            className: \"text-xs font-mono\",\n            children: \"Connecting...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold\",\n            children: \"Gemini Live\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 25\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-gray-300 text-sm\",\n            children: \"Listening & Watching\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"absolute bottom-8 left-0 right-0 flex justify-center items-center space-x-8\",\n        children: [_jsxDEV(\"button\", {\n          onClick: () => setIsMuted(!isMuted),\n          className: `p-4 rounded-full ${isMuted ? 'bg-red-500' : 'bg-gray-700 hover:bg-gray-600'}`,\n          children: _jsxDEV(MicrophoneIcon, {\n            className: \"w-6 h-6 text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 21\n        }, this), _jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"p-6 rounded-full bg-red-600 hover:bg-red-700 shadow-lg transform hover:scale-105 transition-all\",\n          children: _jsxDEV(StopIcon, {\n            className: \"w-8 h-8 text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 9\n  }, this);\n};\nexport default LiveSession;","map":{"version":3,"names":["React","useEffect","useRef","useState","getAIClient","MicrophoneIcon","StopIcon","VideoIcon","jsxDEV","_jsxDEV","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","i","String","fromCharCode","btoa","base64ToArrayBuffer","base64","binaryString","atob","length","charCodeAt","LiveSession","onClose","status","setStatus","isMuted","setIsMuted","volumeLevel","setVolumeLevel","videoRef","canvasRef","audioContextRef","inputSourceRef","processorRef","streamRef","nextStartTimeRef","outputGainNodeRef","session","mounted","startSession","ai","import","meta","env","VITE_GEMINI_API_KEY","current","window","AudioContext","webkitAudioContext","sampleRate","createGain","connect","destination","stream","navigator","mediaDevices","getUserMedia","audio","channelCount","echoCancellation","video","srcObject","play","sessionPromise","live","model","config","responseModalities","Modality","AUDIO","systemInstruction","parts","text","callbacks","onopen","console","log","ctx","source","createMediaStreamSource","processor","createScriptProcessor","onaudioprocess","e","inputData","inputBuffer","getChannelData","sum","Math","abs","min","pcmData","Int16Array","s","max","base64Audio","then","currentSession","sendRealtimeInput","media","mimeType","data","onmessage","msg","audioData","serverContent","modelTurn","inlineData","audioBufferChunk","float32Data","Float32Array","dataView","DataView","getInt16","audioBuffer","createBuffer","set","createBufferSource","currentTime","startTime","start","duration","onclose","onerror","err","error","sendVideoFrame","getContext","width","videoWidth","height","videoHeight","drawImage","base64Image","toDataURL","split","setTimeout","getTracks","forEach","track","stop","close","className","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","muted","playsInline","style","transform","onClick"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/shared/LiveSession.tsx"],"sourcesContent":["\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { getAIClient, AI_MODEL_NAME } from '../../lib/ai';\r\nimport { MicrophoneIcon, StopIcon, VideoIcon } from '../../constants';\r\n\r\ninterface LiveSessionProps {\r\n    onClose: () => void;\r\n}\r\n\r\n// Helper for base64 encoding\r\nfunction arrayBufferToBase64(buffer: ArrayBuffer) {\r\n    let binary = '';\r\n    const bytes = new Uint8Array(buffer);\r\n    const len = bytes.byteLength;\r\n    for (let i = 0; i < len; i++) {\r\n        binary += String.fromCharCode(bytes[i]);\r\n    }\r\n    return btoa(binary);\r\n}\r\n\r\n// Helper for base64 decoding\r\nfunction base64ToArrayBuffer(base64: string) {\r\n    const binaryString = atob(base64);\r\n    const len = binaryString.length;\r\n    const bytes = new Uint8Array(len);\r\n    for (let i = 0; i < len; i++) {\r\n        bytes[i] = binaryString.charCodeAt(i);\r\n    }\r\n    return bytes.buffer;\r\n}\r\n\r\nconst LiveSession: React.FC<LiveSessionProps> = ({ onClose }) => {\r\n    const [status, setStatus] = useState<'disconnected' | 'connecting' | 'connected'>('disconnected');\r\n    const [isMuted, setIsMuted] = useState(false);\r\n    const [volumeLevel, setVolumeLevel] = useState(0);\r\n\r\n    const videoRef = useRef<HTMLVideoElement>(null);\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const audioContextRef = useRef<AudioContext | null>(null);\r\n    const inputSourceRef = useRef<MediaStreamAudioSourceNode | null>(null);\r\n    const processorRef = useRef<ScriptProcessorNode | null>(null);\r\n    const streamRef = useRef<MediaStream | null>(null);\r\n\r\n    // Audio Playback\r\n    const nextStartTimeRef = useRef<number>(0);\r\n    const outputGainNodeRef = useRef<GainNode | null>(null);\r\n\r\n    useEffect(() => {\r\n        let session: any = null;\r\n        let mounted = true;\r\n\r\n        const startSession = async () => {\r\n            setStatus('connecting');\r\n            try {\r\n                const ai = getAIClient(import.meta.env.VITE_GEMINI_API_KEY || '');\r\n\r\n                // Setup Audio Context\r\n                audioContextRef.current = new (window.AudioContext || (window as any).webkitAudioContext)({ sampleRate: 24000 });\r\n                outputGainNodeRef.current = audioContextRef.current.createGain();\r\n                outputGainNodeRef.current.connect(audioContextRef.current.destination);\r\n\r\n                // Get Media Stream (Audio & Video)\r\n                const stream = await navigator.mediaDevices.getUserMedia({\r\n                    audio: {\r\n                        sampleRate: 16000,\r\n                        channelCount: 1,\r\n                        echoCancellation: true\r\n                    },\r\n                    video: true\r\n                });\r\n                streamRef.current = stream;\r\n\r\n                // Setup Video Preview\r\n                if (videoRef.current) {\r\n                    videoRef.current.srcObject = stream;\r\n                    videoRef.current.play();\r\n                }\r\n\r\n                // Connect to Gemini Live\r\n                const sessionPromise = ai.live.connect({\r\n                    model: 'gemini-2.0-flash',\r\n                    config: {\r\n                        responseModalities: [Modality.AUDIO],\r\n                        systemInstruction: { parts: [{ text: \"You are a helpful school assistant. Keep responses concise and friendly.\" }] },\r\n                    },\r\n                    callbacks: {\r\n                        onopen: () => {\r\n                            if (!mounted) return;\r\n                            setStatus('connected');\r\n                            console.log(\"Live Session Connected\");\r\n\r\n                            // Start Audio Input Processing\r\n                            const ctx = new (window.AudioContext || (window as any).webkitAudioContext)({ sampleRate: 16000 });\r\n                            const source = ctx.createMediaStreamSource(stream);\r\n                            const processor = ctx.createScriptProcessor(4096, 1, 1);\r\n\r\n                            processor.onaudioprocess = (e) => {\r\n                                if (isMuted) return;\r\n                                const inputData = e.inputBuffer.getChannelData(0);\r\n\r\n                                // Simple visualizer\r\n                                let sum = 0;\r\n                                for (let i = 0; i < inputData.length; i++) sum += Math.abs(inputData[i]);\r\n                                setVolumeLevel(Math.min(100, (sum / inputData.length) * 500));\r\n\r\n                                // Convert Float32 to Int16 PCM\r\n                                const pcmData = new Int16Array(inputData.length);\r\n                                for (let i = 0; i < inputData.length; i++) {\r\n                                    const s = Math.max(-1, Math.min(1, inputData[i]));\r\n                                    pcmData[i] = s < 0 ? s * 0x8000 : s * 0x7FFF;\r\n                                }\r\n\r\n                                const base64Audio = arrayBufferToBase64(pcmData.buffer);\r\n\r\n                                sessionPromise.then(currentSession => {\r\n                                    currentSession.sendRealtimeInput({\r\n                                        media: {\r\n                                            mimeType: 'audio/pcm;rate=16000',\r\n                                            data: base64Audio\r\n                                        }\r\n                                    });\r\n                                });\r\n                            };\r\n\r\n                            source.connect(processor);\r\n                            processor.connect(ctx.destination);\r\n\r\n                            inputSourceRef.current = source;\r\n                            processorRef.current = processor;\r\n                        },\r\n                        onmessage: async (msg: LiveServerMessage) => {\r\n                            if (!mounted) return;\r\n\r\n                            // Handle Audio Output\r\n                            const audioData = msg.serverContent?.modelTurn?.parts?.[0]?.inlineData?.data;\r\n                            if (audioData && audioContextRef.current && outputGainNodeRef.current) {\r\n                                const audioBufferChunk = base64ToArrayBuffer(audioData);\r\n                                const float32Data = new Float32Array(audioBufferChunk.byteLength / 2);\r\n                                const dataView = new DataView(audioBufferChunk);\r\n\r\n                                for (let i = 0; i < float32Data.length; i++) {\r\n                                    float32Data[i] = dataView.getInt16(i * 2, true) / 32768.0;\r\n                                }\r\n\r\n                                const audioBuffer = audioContextRef.current.createBuffer(1, float32Data.length, 24000);\r\n                                audioBuffer.getChannelData(0).set(float32Data);\r\n\r\n                                const source = audioContextRef.current.createBufferSource();\r\n                                source.buffer = audioBuffer;\r\n                                source.connect(outputGainNodeRef.current);\r\n\r\n                                const currentTime = audioContextRef.current.currentTime;\r\n                                const startTime = Math.max(currentTime, nextStartTimeRef.current);\r\n                                source.start(startTime);\r\n                                nextStartTimeRef.current = startTime + audioBuffer.duration;\r\n                            }\r\n                        },\r\n                        onclose: () => {\r\n                            if (mounted) setStatus('disconnected');\r\n                        },\r\n                        onerror: (err) => {\r\n                            console.error(\"Live Error:\", err);\r\n                            if (mounted) setStatus('disconnected');\r\n                        }\r\n                    }\r\n                });\r\n\r\n                session = sessionPromise;\r\n\r\n                // Video Frame Streaming Loop\r\n                const sendVideoFrame = () => {\r\n                    if (!mounted || status === 'disconnected') return;\r\n\r\n                    if (videoRef.current && canvasRef.current && session) {\r\n                        const ctx = canvasRef.current.getContext('2d');\r\n                        if (ctx) {\r\n                            canvasRef.current.width = videoRef.current.videoWidth * 0.2; // Low res for preview\r\n                            canvasRef.current.height = videoRef.current.videoHeight * 0.2;\r\n                            ctx.drawImage(videoRef.current, 0, 0, canvasRef.current.width, canvasRef.current.height);\r\n\r\n                            const base64Image = canvasRef.current.toDataURL('image/jpeg', 0.5).split(',')[1];\r\n\r\n                            session.then((s: any) => {\r\n                                s.sendRealtimeInput({\r\n                                    media: {\r\n                                        mimeType: 'image/jpeg',\r\n                                        data: base64Image\r\n                                    }\r\n                                });\r\n                            });\r\n                        }\r\n                    }\r\n                    setTimeout(sendVideoFrame, 1000); // 1 FPS for visual context\r\n                };\r\n                sendVideoFrame();\r\n\r\n            } catch (error) {\r\n                console.error(\"Failed to start live session\", error);\r\n                setStatus('disconnected');\r\n            }\r\n        };\r\n\r\n        startSession();\r\n\r\n        return () => {\r\n            mounted = false;\r\n            if (streamRef.current) {\r\n                streamRef.current.getTracks().forEach(track => track.stop());\r\n            }\r\n            if (audioContextRef.current) {\r\n                audioContextRef.current.close();\r\n            }\r\n            if (session) {\r\n                session.then((s: any) => s.close());\r\n            }\r\n        };\r\n    }, []); // Empty dependency array to run once on mount\r\n\r\n    return (\r\n        <div className=\"absolute inset-0 z-50 bg-gray-900 flex flex-col items-center justify-center p-4 text-white\">\r\n            {/* Hidden canvas for processing */}\r\n            <canvas ref={canvasRef} className=\"hidden\" />\r\n\r\n            <div className=\"relative w-full max-w-md aspect-[3/4] bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800\">\r\n                <video\r\n                    ref={videoRef}\r\n                    muted\r\n                    playsInline\r\n                    className=\"w-full h-full object-cover opacity-60\"\r\n                />\r\n\r\n                {/* Status Overlay */}\r\n                <div className=\"absolute inset-0 flex flex-col items-center justify-center space-y-8\">\r\n                    <div className={`w-24 h-24 rounded-full flex items-center justify-center transition-all duration-200 ${status === 'connected' ? 'bg-blue-500/20 border-4 border-blue-500' : 'bg-gray-700 animate-pulse'\r\n                        }`}\r\n                        style={{ transform: `scale(${1 + volumeLevel / 100})` }}\r\n                    >\r\n                        {status === 'connected' ? (\r\n                            <div className=\"w-16 h-16 rounded-full bg-blue-500 flex items-center justify-center animate-pulse\">\r\n                                <VideoIcon className=\"w-8 h-8 text-white\" />\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"text-xs font-mono\">Connecting...</div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"text-center\">\r\n                        <h2 className=\"text-2xl font-bold\">Gemini Live</h2>\r\n                        <p className=\"text-gray-300 text-sm\">Listening & Watching</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Controls */}\r\n                <div className=\"absolute bottom-8 left-0 right-0 flex justify-center items-center space-x-8\">\r\n                    <button\r\n                        onClick={() => setIsMuted(!isMuted)}\r\n                        className={`p-4 rounded-full ${isMuted ? 'bg-red-500' : 'bg-gray-700 hover:bg-gray-600'}`}\r\n                    >\r\n                        <MicrophoneIcon className=\"w-6 h-6 text-white\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"p-6 rounded-full bg-red-600 hover:bg-red-700 shadow-lg transform hover:scale-105 transition-all\"\r\n                    >\r\n                        <StopIcon className=\"w-8 h-8 text-white\" />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LiveSession;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}