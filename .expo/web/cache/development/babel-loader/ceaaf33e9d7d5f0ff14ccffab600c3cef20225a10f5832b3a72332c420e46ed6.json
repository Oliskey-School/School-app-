{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\student\\\\StudyBuddy.tsx\";\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { getAIClient } from '../../lib/ai';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport { CameraIcon } from '../../constants';\nimport { THEME_CONFIG } from '../../constants';\nimport { DashboardType } from '../../types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst fileToGenerativePart = async file => {\n  const base64EncodedDataPromise = new Promise(resolve => {\n    const reader = new FileReader();\n    reader.onloadend = () => resolve(reader.result.split(',')[1]);\n    reader.readAsDataURL(file);\n  });\n  return {\n    inlineData: {\n      data: await base64EncodedDataPromise,\n      mimeType: file.type\n    }\n  };\n};\nconst LoadingBubble = () => _jsxDEV(\"div\", {\n  className: \"flex items-center space-x-2\",\n  children: [_jsxDEV(\"div\", {\n    className: \"w-2 h-2 bg-gray-400 rounded-full animate-pulse\",\n    style: {\n      animationDelay: '0s'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 9\n  }, this), _jsxDEV(\"div\", {\n    className: \"w-2 h-2 bg-gray-400 rounded-full animate-pulse\",\n    style: {\n      animationDelay: '0.1s'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 9\n  }, this), _jsxDEV(\"div\", {\n    className: \"w-2 h-2 bg-gray-400 rounded-full animate-pulse\",\n    style: {\n      animationDelay: '0.2s'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 28,\n  columnNumber: 5\n}, this);\nconst StudyBuddy = () => {\n  const theme = THEME_CONFIG[DashboardType.Student];\n  const [messages, setMessages] = useState([{\n    role: 'model',\n    text: \"Hello! I'm your Study Buddy. Ask me anything about your school subjects, or upload a picture of a problem you're stuck on.\"\n  }]);\n  const [inputText, setInputText] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const chatRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const chatContainerRef = useRef(null);\n  useEffect(() => {\n    chatContainerRef.current?.scrollTo({\n      top: chatContainerRef.current.scrollHeight,\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  const handleSendMessage = useCallback(async (text, imageFile) => {\n    if (!text && !imageFile) return;\n    const apiKey = import.meta.env.VITE_GEMINI_API_KEY || '';\n    if (!apiKey) {\n      setMessages(prev => [...prev, {\n        role: 'model',\n        text: \"⚠️ API Key missing. Please set VITE_GEMINI_API_KEY.\"\n      }]);\n      return;\n    }\n    setIsLoading(true);\n    setInputText('');\n    let userMessage;\n    if (imageFile) {\n      const imageUrl = URL.createObjectURL(imageFile);\n      userMessage = {\n        role: 'user',\n        text,\n        imageUrl\n      };\n    } else {\n      userMessage = {\n        role: 'user',\n        text\n      };\n    }\n    setMessages(prev => [...prev, userMessage, {\n      role: 'model',\n      text: ''\n    }]);\n    try {\n      const ai = getAIClient(apiKey);\n      const history = await Promise.all(messages.map(async msg => {\n        const parts = [{\n          text: msg.text\n        }];\n        return {\n          role: msg.role,\n          parts: parts\n        };\n      }));\n      let currentParts = [{\n        text: text\n      }];\n      if (imageFile) {\n        const imagePart = await fileToGenerativePart(imageFile);\n        currentParts.push(imagePart);\n      }\n      const promptContents = [...history, {\n        role: 'user',\n        parts: currentParts\n      }];\n      const response = await ai.generateContent({\n        model: 'gemini-2.5-flash',\n        contents: promptContents,\n        config: {\n          systemInstruction: {\n            parts: [{\n              text: 'You are a friendly and encouraging study buddy for a high school student. Help them understand concepts without giving away the direct answer. Use simple language and lots of examples.'\n            }]\n          }\n        }\n      });\n      const responseText = response.text || \"No response from AI.\";\n      setMessages(prev => {\n        const newMessages = [...prev];\n        newMessages[newMessages.length - 1].text = responseText;\n        return newMessages;\n      });\n    } catch (error) {\n      console.error(error);\n      setMessages(prev => {\n        const newMessages = [...prev];\n        newMessages[newMessages.length - 1].text = \"Sorry, something went wrong. Please try again.\";\n        return newMessages;\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  }, [messages]);\n  const handleFormSubmit = e => {\n    e.preventDefault();\n    handleSendMessage(inputText);\n  };\n  const handleCameraClick = () => {\n    fileInputRef.current?.click();\n  };\n  const handleFileChange = e => {\n    const file = e.target.files?.[0];\n    if (file) {\n      handleSendMessage(\"Can you help me with this problem?\", file);\n    }\n  };\n  return _jsxDEV(\"div\", {\n    className: \"flex flex-col h-full\",\n    style: {\n      backgroundImage: \"url('https://i.pinimg.com/736x/8c/98/99/8c98994518b575bfd8c949e91d20548b.jpg')\",\n      backgroundRepeat: 'repeat',\n      backgroundSize: 'auto'\n    },\n    children: [_jsxDEV(\"div\", {\n      ref: chatContainerRef,\n      className: \"flex-grow p-4 space-y-4 overflow-y-auto\",\n      children: messages.map((msg, index) => _jsxDEV(\"div\", {\n        className: `flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`,\n        children: _jsxDEV(\"div\", {\n          className: `max-w-xs md:max-w-md lg:max-w-lg px-3 py-2 shadow flex flex-col ${msg.role === 'user' ? 'bg-orange-200 text-gray-800 rounded-t-xl rounded-bl-xl' : 'bg-white text-gray-800 rounded-t-xl rounded-br-xl'}`,\n          children: [msg.imageUrl && _jsxDEV(\"img\", {\n            src: msg.imageUrl,\n            alt: \"User upload\",\n            className: \"rounded-lg mb-2 max-h-48\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 33\n          }, this), _jsxDEV(\"div\", {\n            className: \"prose prose-sm max-w-none prose-p:my-1 prose-headings:my-2\",\n            children: msg.role === 'model' && !msg.text && index === messages.length - 1 && isLoading ? _jsxDEV(LoadingBubble, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 37\n            }, this) : _jsxDEV(ReactMarkdown, {\n              remarkPlugins: [remarkGfm],\n              children: msg.text || ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 25\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"p-4 bg-gray-100 border-t border-gray-200\",\n      children: _jsxDEV(\"form\", {\n        onSubmit: handleFormSubmit,\n        className: \"flex items-center space-x-2\",\n        children: [_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: fileInputRef,\n          onChange: handleFileChange,\n          className: \"hidden\",\n          accept: \"image/*\",\n          disabled: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }, this), _jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleCameraClick,\n          disabled: isLoading,\n          className: \"p-2 text-gray-500 hover:text-orange-500 disabled:opacity-50\",\n          \"aria-label\": \"Upload image\",\n          children: _jsxDEV(CameraIcon, {\n            className: \"h-6 w-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }, this), _jsxDEV(\"input\", {\n          type: \"text\",\n          value: inputText,\n          onChange: e => setInputText(e.target.value),\n          placeholder: \"Type a message...\",\n          className: \"flex-grow px-4 py-2 bg-white border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-orange-400\",\n          disabled: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }, this), _jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isLoading || !inputText,\n          className: `px-4 py-2 rounded-full font-semibold text-white ${theme.mainBg} disabled:bg-orange-300 transition-colors`,\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 9\n  }, this);\n};\nexport default StudyBuddy;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","getAIClient","ReactMarkdown","remarkGfm","CameraIcon","THEME_CONFIG","DashboardType","jsxDEV","_jsxDEV","fileToGenerativePart","file","base64EncodedDataPromise","Promise","resolve","reader","FileReader","onloadend","result","split","readAsDataURL","inlineData","data","mimeType","type","LoadingBubble","className","children","style","animationDelay","fileName","_jsxFileName","lineNumber","columnNumber","StudyBuddy","theme","Student","messages","setMessages","role","text","inputText","setInputText","isLoading","setIsLoading","chatRef","fileInputRef","chatContainerRef","current","scrollTo","top","scrollHeight","behavior","handleSendMessage","imageFile","apiKey","import","meta","env","VITE_GEMINI_API_KEY","prev","userMessage","imageUrl","URL","createObjectURL","ai","history","all","map","msg","parts","currentParts","imagePart","push","promptContents","response","generateContent","model","contents","config","systemInstruction","responseText","newMessages","length","error","console","handleFormSubmit","e","preventDefault","handleCameraClick","click","handleFileChange","target","files","backgroundImage","backgroundRepeat","backgroundSize","ref","index","src","alt","remarkPlugins","onSubmit","onChange","accept","disabled","onClick","value","placeholder","mainBg"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/student/StudyBuddy.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { getAIClient, AI_MODEL_NAME } from '../../lib/ai';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport remarkGfm from 'remark-gfm';\r\nimport { CameraIcon } from '../../constants';\r\nimport { THEME_CONFIG } from '../../constants';\r\nimport { DashboardType } from '../../types';\r\n\r\ninterface Message {\r\n    role: 'user' | 'model';\r\n    text: string;\r\n    imageUrl?: string;\r\n}\r\n\r\nconst fileToGenerativePart = async (file: File) => {\r\n    const base64EncodedDataPromise = new Promise<string>((resolve) => {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => resolve((reader.result as string).split(',')[1]);\r\n        reader.readAsDataURL(file);\r\n    });\r\n    return {\r\n        inlineData: { data: await base64EncodedDataPromise, mimeType: file.type },\r\n    };\r\n};\r\n\r\nconst LoadingBubble = () => (\r\n    <div className=\"flex items-center space-x-2\">\r\n        <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-pulse\" style={{ animationDelay: '0s' }}></div>\r\n        <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-pulse\" style={{ animationDelay: '0.1s' }}></div>\r\n        <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-pulse\" style={{ animationDelay: '0.2s' }}></div>\r\n    </div>\r\n);\r\n\r\nconst StudyBuddy: React.FC = () => {\r\n    const theme = THEME_CONFIG[DashboardType.Student];\r\n    const [messages, setMessages] = useState<Message[]>([\r\n        { role: 'model', text: \"Hello! I'm your Study Buddy. Ask me anything about your school subjects, or upload a picture of a problem you're stuck on.\" }\r\n    ]);\r\n    const [inputText, setInputText] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const chatRef = useRef<any>(null);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const chatContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        // Chat initialization is handled per-request now to be stateless\r\n        chatContainerRef.current?.scrollTo({ top: chatContainerRef.current.scrollHeight, behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n    const handleSendMessage = useCallback(async (text: string, imageFile?: File) => {\r\n        if (!text && !imageFile) return;\r\n\r\n        const apiKey = import.meta.env.VITE_GEMINI_API_KEY || '';\r\n        if (!apiKey) {\r\n            setMessages(prev => [...prev, { role: 'model', text: \"⚠️ API Key missing. Please set VITE_GEMINI_API_KEY.\" }]);\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n        setInputText('');\r\n\r\n        let userMessage: Message;\r\n        if (imageFile) {\r\n            const imageUrl = URL.createObjectURL(imageFile);\r\n            userMessage = { role: 'user', text, imageUrl };\r\n        } else {\r\n            userMessage = { role: 'user', text };\r\n        }\r\n\r\n        // Optimistic update\r\n        setMessages(prev => [...prev, userMessage, { role: 'model', text: '' }]);\r\n\r\n        try {\r\n            const ai = getAIClient(apiKey);\r\n\r\n            // Build history from current state\r\n            const history = await Promise.all(messages.map(async (msg) => {\r\n                const parts: any[] = [{ text: msg.text }];\r\n                // Note: We can't easily retrieve base64 from blob URLs of past messages here without re-fetching.\r\n                // For simplicity in this session, we only send text history + current image if any.\r\n                // A production app would store base64 or file refs.\r\n                return {\r\n                    role: msg.role,\r\n                    parts: parts\r\n                };\r\n            }));\r\n\r\n            // Prepare current prompt\r\n            let currentParts: any[] = [{ text: text }];\r\n            if (imageFile) {\r\n                const imagePart = await fileToGenerativePart(imageFile);\r\n                currentParts.push(imagePart);\r\n            }\r\n\r\n            const promptContents = [\r\n                ...history,\r\n                { role: 'user', parts: currentParts }\r\n            ];\r\n\r\n            const response = await ai.generateContent({\r\n                model: 'gemini-2.5-flash',\r\n                contents: promptContents,\r\n                config: {\r\n                    systemInstruction: {\r\n                        parts: [{ text: 'You are a friendly and encouraging study buddy for a high school student. Help them understand concepts without giving away the direct answer. Use simple language and lots of examples.' }]\r\n                    }\r\n                }\r\n            });\r\n\r\n            const responseText = response.text || \"No response from AI.\";\r\n\r\n            setMessages(prev => {\r\n                const newMessages = [...prev];\r\n                // Update the placeholder model message\r\n                newMessages[newMessages.length - 1].text = responseText;\r\n                return newMessages;\r\n            });\r\n\r\n        } catch (error) {\r\n            console.error(error);\r\n            setMessages(prev => {\r\n                const newMessages = [...prev];\r\n                newMessages[newMessages.length - 1].text = \"Sorry, something went wrong. Please try again.\";\r\n                return newMessages;\r\n            });\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [messages]);\r\n\r\n    const handleFormSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        handleSendMessage(inputText);\r\n    };\r\n\r\n    const handleCameraClick = () => {\r\n        fileInputRef.current?.click();\r\n    };\r\n\r\n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            handleSendMessage(\"Can you help me with this problem?\", file);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full\" style={{ backgroundImage: \"url('https://i.pinimg.com/736x/8c/98/99/8c98994518b575bfd8c949e91d20548b.jpg')\", backgroundRepeat: 'repeat', backgroundSize: 'auto' }}>\r\n            {/* Chat Area */}\r\n            <div ref={chatContainerRef} className=\"flex-grow p-4 space-y-4 overflow-y-auto\">\r\n                {messages.map((msg, index) => (\r\n                    <div key={index} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n                        <div className={`max-w-xs md:max-w-md lg:max-w-lg px-3 py-2 shadow flex flex-col ${msg.role === 'user' ? 'bg-orange-200 text-gray-800 rounded-t-xl rounded-bl-xl' : 'bg-white text-gray-800 rounded-t-xl rounded-br-xl'}`}>\r\n                            {msg.imageUrl && (\r\n                                <img src={msg.imageUrl} alt=\"User upload\" className=\"rounded-lg mb-2 max-h-48\" />\r\n                            )}\r\n                            <div className=\"prose prose-sm max-w-none prose-p:my-1 prose-headings:my-2\">\r\n                                {msg.role === 'model' && !msg.text && index === messages.length - 1 && isLoading ? (\r\n                                    <LoadingBubble />\r\n                                ) : (\r\n                                    <ReactMarkdown remarkPlugins={[remarkGfm]}>\r\n                                        {msg.text || ''}\r\n                                    </ReactMarkdown>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Input Form */}\r\n            <div className=\"p-4 bg-gray-100 border-t border-gray-200\">\r\n                <form onSubmit={handleFormSubmit} className=\"flex items-center space-x-2\">\r\n                    <input\r\n                        type=\"file\"\r\n                        ref={fileInputRef}\r\n                        onChange={handleFileChange}\r\n                        className=\"hidden\"\r\n                        accept=\"image/*\"\r\n                        disabled={isLoading}\r\n                    />\r\n                    <button type=\"button\" onClick={handleCameraClick} disabled={isLoading} className=\"p-2 text-gray-500 hover:text-orange-500 disabled:opacity-50\" aria-label=\"Upload image\">\r\n                        <CameraIcon className=\"h-6 w-6\" />\r\n                    </button>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={inputText}\r\n                        onChange={(e) => setInputText(e.target.value)}\r\n                        placeholder=\"Type a message...\"\r\n                        className=\"flex-grow px-4 py-2 bg-white border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-orange-400\"\r\n                        disabled={isLoading}\r\n                    />\r\n                    <button type=\"submit\" disabled={isLoading || !inputText} className={`px-4 py-2 rounded-full font-semibold text-white ${theme.mainBg} disabled:bg-orange-300 transition-colors`}>\r\n                        Send\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StudyBuddy;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}