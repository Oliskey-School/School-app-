{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\shared\\\\GlobalSearchScreen.tsx\";\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { DashboardType } from '../../types';\nimport { mockStudents, mockTeachers, mockAssignments, mockNotices } from '../../data';\nimport { SearchIcon, XCircleIcon, UserIcon, BriefcaseIcon, MegaphoneIcon } from '../../constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getIconForType = type => {\n  switch (type) {\n    case 'Student':\n      return _jsxDEV(UserIcon, {\n        className: \"text-sky-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 32\n      }, this);\n    case 'Teacher':\n      return _jsxDEV(BriefcaseIcon, {\n        className: \"text-purple-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 32\n      }, this);\n    case 'Assignment':\n      return _jsxDEV(BriefcaseIcon, {\n        className: \"text-orange-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 35\n      }, this);\n    case 'Notice':\n      return _jsxDEV(MegaphoneIcon, {\n        className: \"text-green-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 31\n      }, this);\n    default:\n      return null;\n  }\n};\nconst GlobalSearchScreen = ({\n  dashboardType,\n  navigateTo,\n  onClose\n}) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [results, setResults] = useState([]);\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      if (searchTerm.trim().length > 1) {\n        performSearch(searchTerm.trim().toLowerCase());\n      } else {\n        setResults([]);\n      }\n    }, 300);\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [searchTerm, dashboardType]);\n  const performSearch = term => {\n    const newResults = [];\n    if (dashboardType === DashboardType.Admin) {\n      mockStudents.filter(s => s.name.toLowerCase().includes(term)).forEach(s => {\n        newResults.push({\n          id: s.id,\n          title: s.name,\n          subtitle: `Grade ${s.grade}${s.section}`,\n          type: 'Student',\n          onClick: () => navigateTo('studentProfileAdminView', s.name, {\n            student: s\n          })\n        });\n      });\n      mockTeachers.filter(t => t.name.toLowerCase().includes(term)).forEach(t => {\n        newResults.push({\n          id: t.id,\n          title: t.name,\n          subtitle: t.subjects.join(', '),\n          type: 'Teacher',\n          onClick: () => navigateTo('teacherDetailAdminView', t.name, {\n            teacher: t\n          })\n        });\n      });\n    }\n    if (dashboardType === DashboardType.Teacher) {\n      const teacher = mockTeachers.find(t => t.id === 2);\n      const teacherClassNames = teacher?.classes.map(c => c) || [];\n      mockStudents.filter(s => s.name.toLowerCase().includes(term) && teacherClassNames.some(cn => `${s.grade}${s.section}` === cn)).forEach(s => {\n        newResults.push({\n          id: s.id,\n          title: s.name,\n          subtitle: `Grade ${s.grade}${s.section}`,\n          type: 'Student',\n          onClick: () => navigateTo('studentProfile', s.name, {\n            student: s\n          })\n        });\n      });\n      mockAssignments.filter(a => a.title.toLowerCase().includes(term) && teacherClassNames.some(cn => a.className.includes(cn))).forEach(a => {\n        newResults.push({\n          id: a.id,\n          title: a.title,\n          subtitle: `Due: ${new Date(a.dueDate).toLocaleDateString()}`,\n          type: 'Assignment',\n          onClick: () => navigateTo('assignmentSubmissions', `Submissions: ${a.title}`, {\n            assignment: a\n          })\n        });\n      });\n    }\n    if (dashboardType === DashboardType.Parent) {\n      const parentChildrenIds = [3, 4];\n      mockStudents.filter(s => s.name.toLowerCase().includes(term) && parentChildrenIds.includes(s.id)).forEach(s => {\n        newResults.push({\n          id: s.id,\n          title: s.name,\n          subtitle: `Your child`,\n          type: 'Student',\n          onClick: () => navigateTo('childDetail', s.name, {\n            student: s\n          })\n        });\n      });\n    }\n    if (dashboardType === DashboardType.Student) {\n      mockAssignments.filter(a => a.title.toLowerCase().includes(term)).forEach(a => {\n        newResults.push({\n          id: a.id,\n          title: a.title,\n          subtitle: `Subject: ${a.subject}`,\n          type: 'Assignment',\n          onClick: () => navigateTo('assignments', 'Assignments', {})\n        });\n      });\n    }\n    const relevantAudiences = ['all', dashboardType.toLowerCase() + 's'];\n    mockNotices.filter(n => (n.title.toLowerCase().includes(term) || n.content.toLowerCase().includes(term)) && n.audience.some(aud => relevantAudiences.includes(aud))).forEach(n => {\n      newResults.push({\n        id: n.id,\n        title: n.title,\n        subtitle: `Category: ${n.category}`,\n        type: 'Notice',\n        onClick: () => navigateTo('noticeboard', 'Noticeboard', {})\n      });\n    });\n    setResults(newResults);\n  };\n  const groupedResults = useMemo(() => {\n    return results.reduce((acc, result) => {\n      (acc[result.type] = acc[result.type] || []).push(result);\n      return acc;\n    }, {});\n  }, [results]);\n  const handleResultClick = result => {\n    result.onClick();\n    onClose();\n  };\n  return _jsxDEV(\"div\", {\n    className: \"absolute inset-0 bg-white/80 backdrop-blur-sm z-50 flex flex-col animate-fade-in\",\n    children: [_jsxDEV(\"div\", {\n      className: \"p-4 border-b border-gray-200\",\n      children: _jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [_jsxDEV(\"span\", {\n          className: \"absolute inset-y-0 left-0 flex items-center pl-3\",\n          children: _jsxDEV(SearchIcon, {\n            className: \"text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this), _jsxDEV(\"input\", {\n          type: \"search\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value),\n          placeholder: `Search in ${dashboardType} Dashboard...`,\n          autoFocus: true,\n          className: \"w-full pl-10 pr-10 py-3 text-lg bg-white border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this), _jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"absolute inset-y-0 right-0 flex items-center pr-3\",\n          children: _jsxDEV(XCircleIcon, {\n            className: \"text-gray-400 hover:text-gray-600 w-7 h-7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"flex-grow overflow-y-auto p-4\",\n      children: [searchTerm.trim().length > 1 && results.length === 0 && _jsxDEV(\"div\", {\n        className: \"text-center py-16\",\n        children: [_jsxDEV(\"p\", {\n          className: \"font-semibold text-gray-700\",\n          children: [\"No results found for \\\"\", searchTerm, \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 25\n        }, this), _jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500 mt-1\",\n          children: \"Try searching for something else.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }, this), Object.entries(groupedResults).map(([type, items]) => _jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [_jsxDEV(\"h3\", {\n          className: \"font-bold text-gray-500 uppercase text-sm tracking-wider px-2 mb-2\",\n          children: [type, \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 25\n        }, this), _jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: items.map(item => _jsxDEV(\"button\", {\n            onClick: () => handleResultClick(item),\n            className: \"w-full text-left flex items-center p-3 bg-white rounded-lg shadow-sm hover:bg-sky-50 transition-colors\",\n            children: [_jsxDEV(\"div\", {\n              className: \"p-2 bg-gray-100 rounded-lg mr-4\",\n              children: getIconForType(item.type)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 37\n            }, this), _jsxDEV(\"div\", {\n              children: [_jsxDEV(\"p\", {\n                className: \"font-semibold text-gray-800\",\n                children: item.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 41\n              }, this), _jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: item.subtitle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 37\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 25\n        }, this)]\n      }, type, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 9\n  }, this);\n};\nexport default GlobalSearchScreen;","map":{"version":3,"names":["React","useState","useEffect","useMemo","DashboardType","mockStudents","mockTeachers","mockAssignments","mockNotices","SearchIcon","XCircleIcon","UserIcon","BriefcaseIcon","MegaphoneIcon","jsxDEV","_jsxDEV","getIconForType","type","className","fileName","_jsxFileName","lineNumber","columnNumber","GlobalSearchScreen","dashboardType","navigateTo","onClose","searchTerm","setSearchTerm","results","setResults","handler","setTimeout","trim","length","performSearch","toLowerCase","clearTimeout","term","newResults","Admin","filter","s","name","includes","forEach","push","id","title","subtitle","grade","section","onClick","student","t","subjects","join","teacher","Teacher","find","teacherClassNames","classes","map","c","some","cn","a","Date","dueDate","toLocaleDateString","assignment","Parent","parentChildrenIds","Student","subject","relevantAudiences","n","content","audience","aud","category","groupedResults","reduce","acc","result","handleResultClick","children","value","onChange","e","target","placeholder","autoFocus","Object","entries","items","item"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/shared/GlobalSearchScreen.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { DashboardType } from '../../types';\r\nimport { mockStudents, mockTeachers, mockAssignments, mockNotices } from '../../data';\r\nimport { SearchIcon, XCircleIcon, UserIcon, BriefcaseIcon, MegaphoneIcon } from '../../constants';\r\n\r\ninterface SearchResult {\r\n    id: number | string;\r\n    title: string;\r\n    subtitle: string;\r\n    type: 'Student' | 'Teacher' | 'Assignment' | 'Notice';\r\n    onClick: () => void;\r\n}\r\n\r\ninterface GlobalSearchScreenProps {\r\n    dashboardType: DashboardType;\r\n    navigateTo: (view: string, title:string, props?: any) => void;\r\n    onClose: () => void;\r\n}\r\n\r\nconst getIconForType = (type: SearchResult['type']) => {\r\n    switch (type) {\r\n        case 'Student': return <UserIcon className=\"text-sky-500\" />;\r\n        case 'Teacher': return <BriefcaseIcon className=\"text-purple-500\" />;\r\n        case 'Assignment': return <BriefcaseIcon className=\"text-orange-500\" />;\r\n        case 'Notice': return <MegaphoneIcon className=\"text-green-500\" />;\r\n        default: return null;\r\n    }\r\n};\r\n\r\nconst GlobalSearchScreen: React.FC<GlobalSearchScreenProps> = ({ dashboardType, navigateTo, onClose }) => {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [results, setResults] = useState<SearchResult[]>([]);\r\n\r\n    useEffect(() => {\r\n        // Debounce search\r\n        const handler = setTimeout(() => {\r\n            if (searchTerm.trim().length > 1) {\r\n                performSearch(searchTerm.trim().toLowerCase());\r\n            } else {\r\n                setResults([]);\r\n            }\r\n        }, 300);\r\n\r\n        return () => {\r\n            clearTimeout(handler);\r\n        };\r\n    }, [searchTerm, dashboardType]);\r\n\r\n    const performSearch = (term: string) => {\r\n        const newResults: SearchResult[] = [];\r\n\r\n        // Admin can search almost everything\r\n        if (dashboardType === DashboardType.Admin) {\r\n            mockStudents.filter(s => s.name.toLowerCase().includes(term)).forEach(s => {\r\n                newResults.push({\r\n                    id: s.id,\r\n                    title: s.name,\r\n                    subtitle: `Grade ${s.grade}${s.section}`,\r\n                    type: 'Student',\r\n                    onClick: () => navigateTo('studentProfileAdminView', s.name, { student: s })\r\n                });\r\n            });\r\n            mockTeachers.filter(t => t.name.toLowerCase().includes(term)).forEach(t => {\r\n                newResults.push({\r\n                    id: t.id,\r\n                    title: t.name,\r\n                    subtitle: t.subjects.join(', '),\r\n                    type: 'Teacher',\r\n                    onClick: () => navigateTo('teacherDetailAdminView', t.name, { teacher: t })\r\n                });\r\n            });\r\n        }\r\n\r\n        // Teacher search\r\n        if (dashboardType === DashboardType.Teacher) {\r\n            const teacher = mockTeachers.find(t => t.id === 2); // Logged in teacher\r\n            const teacherClassNames = teacher?.classes.map(c => c) || [];\r\n             mockStudents.filter(s => s.name.toLowerCase().includes(term) && teacherClassNames.some(cn => `${s.grade}${s.section}` === cn)).forEach(s => {\r\n                newResults.push({\r\n                    id: s.id,\r\n                    title: s.name,\r\n                    subtitle: `Grade ${s.grade}${s.section}`,\r\n                    type: 'Student',\r\n                    onClick: () => navigateTo('studentProfile', s.name, { student: s })\r\n                });\r\n            });\r\n            mockAssignments.filter(a => a.title.toLowerCase().includes(term) && teacherClassNames.some(cn => a.className.includes(cn))).forEach(a => {\r\n                newResults.push({\r\n                    id: a.id,\r\n                    title: a.title,\r\n                    subtitle: `Due: ${new Date(a.dueDate).toLocaleDateString()}`,\r\n                    type: 'Assignment',\r\n                    onClick: () => navigateTo('assignmentSubmissions', `Submissions: ${a.title}`, { assignment: a })\r\n                });\r\n            });\r\n        }\r\n\r\n        // Parent search (children and announcements)\r\n        if (dashboardType === DashboardType.Parent) {\r\n            const parentChildrenIds = [3, 4];\r\n            mockStudents.filter(s => s.name.toLowerCase().includes(term) && parentChildrenIds.includes(s.id)).forEach(s => {\r\n                newResults.push({\r\n                    id: s.id,\r\n                    title: s.name,\r\n                    subtitle: `Your child`,\r\n                    type: 'Student',\r\n                    onClick: () => navigateTo('childDetail', s.name, { student: s })\r\n                });\r\n            });\r\n        }\r\n\r\n        // Student search\r\n        if (dashboardType === DashboardType.Student) {\r\n            mockAssignments.filter(a => a.title.toLowerCase().includes(term)).forEach(a => {\r\n                newResults.push({\r\n                    id: a.id,\r\n                    title: a.title,\r\n                    subtitle: `Subject: ${a.subject}`,\r\n                    type: 'Assignment',\r\n                    onClick: () => navigateTo('assignments', 'Assignments', {}) // Navigate to list view\r\n                });\r\n            });\r\n        }\r\n\r\n        // Announcements for all relevant users\r\n        const relevantAudiences = ['all', dashboardType.toLowerCase() + 's'];\r\n        mockNotices.filter(n => (n.title.toLowerCase().includes(term) || n.content.toLowerCase().includes(term)) && n.audience.some(aud => relevantAudiences.includes(aud))).forEach(n => {\r\n            newResults.push({\r\n                id: n.id,\r\n                title: n.title,\r\n                subtitle: `Category: ${n.category}`,\r\n                type: 'Notice',\r\n                onClick: () => navigateTo('noticeboard', 'Noticeboard', {})\r\n            });\r\n        });\r\n        \r\n        setResults(newResults);\r\n    };\r\n\r\n    const groupedResults = useMemo(() => {\r\n        return results.reduce((acc, result) => {\r\n            (acc[result.type] = acc[result.type] || []).push(result);\r\n            return acc;\r\n        }, {} as Record<SearchResult['type'], SearchResult[]>);\r\n    }, [results]);\r\n\r\n    const handleResultClick = (result: SearchResult) => {\r\n        result.onClick();\r\n        onClose();\r\n    };\r\n\r\n    return (\r\n        <div className=\"absolute inset-0 bg-white/80 backdrop-blur-sm z-50 flex flex-col animate-fade-in\">\r\n            <div className=\"p-4 border-b border-gray-200\">\r\n                <div className=\"relative\">\r\n                    <span className=\"absolute inset-y-0 left-0 flex items-center pl-3\">\r\n                        <SearchIcon className=\"text-gray-500\" />\r\n                    </span>\r\n                    <input\r\n                        type=\"search\"\r\n                        value={searchTerm}\r\n                        onChange={e => setSearchTerm(e.target.value)}\r\n                        placeholder={`Search in ${dashboardType} Dashboard...`}\r\n                        autoFocus\r\n                        className=\"w-full pl-10 pr-10 py-3 text-lg bg-white border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent\"\r\n                    />\r\n                     <button onClick={onClose} className=\"absolute inset-y-0 right-0 flex items-center pr-3\">\r\n                        <XCircleIcon className=\"text-gray-400 hover:text-gray-600 w-7 h-7\" />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex-grow overflow-y-auto p-4\">\r\n                {searchTerm.trim().length > 1 && results.length === 0 && (\r\n                    <div className=\"text-center py-16\">\r\n                        <p className=\"font-semibold text-gray-700\">No results found for \"{searchTerm}\"</p>\r\n                        <p className=\"text-sm text-gray-500 mt-1\">Try searching for something else.</p>\r\n                    </div>\r\n                )}\r\n                {/* FIX: Explicitly typed the parameters of the `map` callback to resolve a TypeScript type inference issue. */}\r\n                {Object.entries(groupedResults).map(([type, items]: [string, SearchResult[]]) => (\r\n                    <div key={type} className=\"mb-6\">\r\n                        <h3 className=\"font-bold text-gray-500 uppercase text-sm tracking-wider px-2 mb-2\">{type}s</h3>\r\n                        <div className=\"space-y-2\">\r\n                            {items.map(item => (\r\n                                <button key={item.id} onClick={() => handleResultClick(item)} className=\"w-full text-left flex items-center p-3 bg-white rounded-lg shadow-sm hover:bg-sky-50 transition-colors\">\r\n                                    <div className=\"p-2 bg-gray-100 rounded-lg mr-4\">\r\n                                        {getIconForType(item.type as SearchResult['type'])}\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"font-semibold text-gray-800\">{item.title}</p>\r\n                                        <p className=\"text-sm text-gray-500\">{item.subtitle}</p>\r\n                                    </div>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GlobalSearchScreen;"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}