{"ast":null,"code":"import { supabase } from './supabase';\nexport async function submitTeacherAttendance(teacherId, date = new Date().toISOString().split('T')[0]) {\n  try {\n    const {\n      data,\n      error\n    } = await supabase.from('teacher_attendance').insert({\n      teacher_id: teacherId,\n      date,\n      status: 'Pending'\n    }).select().single();\n    if (error) throw error;\n    await createAdminNotification('Teacher Attendance', `New attendance request from teacher ID ${teacherId}`, data.id);\n    return {\n      success: true,\n      data\n    };\n  } catch (error) {\n    console.error('Error submitting teacher attendance:', error);\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n}\nexport async function getTeacherAttendanceHistory(teacherId, limit = 30) {\n  try {\n    const {\n      data,\n      error\n    } = await supabase.from('teacher_attendance').select('*').eq('teacher_id', teacherId).order('date', {\n      ascending: false\n    }).limit(limit);\n    if (error) throw error;\n    return {\n      success: true,\n      data\n    };\n  } catch (error) {\n    console.error('Error fetching teacher attendance history:', error);\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n}\nexport async function getPendingAttendanceRequests() {\n  try {\n    const {\n      data,\n      error\n    } = await supabase.from('teacher_attendance').select(`\n        *,\n        teachers (\n          id,\n          name,\n          email,\n          avatar_url\n        )\n      `).eq('status', 'Pending').order('created_at', {\n      ascending: false\n    });\n    if (error) throw error;\n    return {\n      success: true,\n      data\n    };\n  } catch (error) {\n    console.error('Error fetching pending attendance requests:', error);\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n}\nasync function resolveAdminId(userId) {\n  if (typeof userId === 'number') return userId;\n  if (!isNaN(Number(userId))) return Number(userId);\n  console.warn(`Resolving mock Admin ID '${userId}' to a real database ID...`);\n  const {\n    data\n  } = await supabase.from('users').select('id').eq('role', 'Admin').limit(1).maybeSingle();\n  return data?.id || 0;\n}\nexport async function approveAttendance(attendanceId, adminUserId) {\n  try {\n    const resolvedAdminId = await resolveAdminId(adminUserId);\n    const {\n      data,\n      error\n    } = await supabase.from('teacher_attendance').update({\n      status: 'Approved',\n      approved_by: resolvedAdminId,\n      approved_at: new Date().toISOString(),\n      updated_at: new Date().toISOString()\n    }).eq('id', attendanceId).select(`\n        *,\n        teachers (\n          id,\n          user_id,\n          name\n        )\n      `).single();\n    if (error) throw error;\n    if (data.teachers && data.teachers.user_id) {\n      await createNotification(data.teachers.user_id, 'Attendance Approved', `Your attendance for ${data.date} has been approved`, 'Attendance', attendanceId);\n    }\n    return {\n      success: true,\n      data\n    };\n  } catch (error) {\n    console.error('Error approving attendance:', error);\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n}\nexport async function rejectAttendance(attendanceId, adminUserId, reason) {\n  try {\n    const resolvedAdminId = await resolveAdminId(adminUserId);\n    const {\n      data,\n      error\n    } = await supabase.from('teacher_attendance').update({\n      status: 'Rejected',\n      approved_by: resolvedAdminId,\n      approved_at: new Date().toISOString(),\n      rejection_reason: reason,\n      updated_at: new Date().toISOString()\n    }).eq('id', attendanceId).select(`\n        *,\n        teachers (\n          id,\n          user_id,\n          name\n        )\n      `).single();\n    if (error) throw error;\n    if (data.teachers && data.teachers.user_id) {\n      const message = reason ? `Your attendance for ${data.date} was rejected. Reason: ${reason}` : `Your attendance for ${data.date} was rejected`;\n      await createNotification(data.teachers.user_id, 'Attendance Rejected', message, 'Attendance', attendanceId);\n    }\n    return {\n      success: true,\n      data\n    };\n  } catch (error) {\n    console.error('Error rejecting attendance:', error);\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n}\nasync function createNotification(userId, title, summary, category, relatedId) {\n  try {\n    const {\n      error\n    } = await supabase.from('notifications').insert({\n      user_id: userId,\n      title,\n      summary,\n      category,\n      related_id: relatedId,\n      is_read: false\n    });\n    if (error) throw error;\n  } catch (error) {\n    console.error('Error creating notification:', error);\n  }\n}\nasync function createAdminNotification(title, summary, relatedId) {\n  try {\n    const {\n      data: adminUsers,\n      error: userError\n    } = await supabase.from('users').select('id').eq('role', 'Admin');\n    if (userError) throw userError;\n    const notifications = adminUsers?.map(admin => ({\n      user_id: admin.id,\n      title,\n      summary,\n      category: 'Attendance',\n      related_id: relatedId,\n      is_read: false\n    })) || [];\n    if (notifications.length > 0) {\n      const {\n        error\n      } = await supabase.from('notifications').insert(notifications);\n      if (error) throw error;\n    }\n  } catch (error) {\n    console.error('Error creating admin notifications:', error);\n  }\n}\nexport async function getTodayAttendanceStatus(teacherId) {\n  const today = new Date().toISOString().split('T')[0];\n  try {\n    const {\n      data,\n      error\n    } = await supabase.from('teacher_attendance').select('*').eq('teacher_id', teacherId).eq('date', today).maybeSingle();\n    if (error) throw error;\n    return {\n      success: true,\n      data\n    };\n  } catch (error) {\n    console.error('Error fetching today attendance status:', error);\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n}","map":{"version":3,"names":["supabase","submitTeacherAttendance","teacherId","date","Date","toISOString","split","data","error","from","insert","teacher_id","status","select","single","createAdminNotification","id","success","console","message","getTeacherAttendanceHistory","limit","eq","order","ascending","getPendingAttendanceRequests","resolveAdminId","userId","isNaN","Number","warn","maybeSingle","approveAttendance","attendanceId","adminUserId","resolvedAdminId","update","approved_by","approved_at","updated_at","teachers","user_id","createNotification","rejectAttendance","reason","rejection_reason","title","summary","category","relatedId","related_id","is_read","adminUsers","userError","notifications","map","admin","length","getTodayAttendanceStatus","today"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/lib/teacherAttendanceService.ts"],"sourcesContent":["import { supabase } from './supabase';\r\n\r\nexport interface TeacherAttendance {\r\n    id: number;\r\n    teacher_id: number;\r\n    date: string;\r\n    check_in_time: string;\r\n    status: 'Pending' | 'Approved' | 'Rejected';\r\n    approved_by?: number;\r\n    approved_at?: string;\r\n    rejection_reason?: string;\r\n    created_at: string;\r\n    updated_at: string;\r\n}\r\n\r\n/**\r\n * Submit teacher attendance (teacher marks themselves as present)\r\n */\r\nexport async function submitTeacherAttendance(teacherId: number, date: string = new Date().toISOString().split('T')[0]) {\r\n    try {\r\n        const { data, error } = await supabase\r\n            .from('teacher_attendance')\r\n            .insert({\r\n                teacher_id: teacherId,\r\n                date,\r\n                status: 'Pending',\r\n            })\r\n            .select()\r\n            .single();\r\n\r\n        if (error) throw error;\r\n\r\n        // Create notification for all admins\r\n        await createAdminNotification(\r\n            'Teacher Attendance',\r\n            `New attendance request from teacher ID ${teacherId}`,\r\n            data.id\r\n        );\r\n\r\n        return { success: true, data };\r\n    } catch (error: any) {\r\n        console.error('Error submitting teacher attendance:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n/**\r\n * Get teacher attendance history\r\n */\r\nexport async function getTeacherAttendanceHistory(teacherId: number, limit: number = 30) {\r\n    try {\r\n        const { data, error } = await supabase\r\n            .from('teacher_attendance')\r\n            .select('*')\r\n            .eq('teacher_id', teacherId)\r\n            .order('date', { ascending: false })\r\n            .limit(limit);\r\n\r\n        if (error) throw error;\r\n        return { success: true, data };\r\n    } catch (error: any) {\r\n        console.error('Error fetching teacher attendance history:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n/**\r\n * Get pending attendance requests (for admin)\r\n */\r\nexport async function getPendingAttendanceRequests() {\r\n    try {\r\n        const { data, error } = await supabase\r\n            .from('teacher_attendance')\r\n            .select(`\r\n        *,\r\n        teachers (\r\n          id,\r\n          name,\r\n          email,\r\n          avatar_url\r\n        )\r\n      `)\r\n            .eq('status', 'Pending')\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (error) throw error;\r\n        return { success: true, data };\r\n    } catch (error: any) {\r\n        console.error('Error fetching pending attendance requests:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n/**\r\n * Approve teacher attendance (admin action)\r\n */\r\n// Helper to resolve a valid Admin ID if a mock string ID is passed\r\nasync function resolveAdminId(userId: string | number): Promise<number> {\r\n    if (typeof userId === 'number') return userId;\r\n    if (!isNaN(Number(userId))) return Number(userId);\r\n\r\n    // If string ID (mock), fetch the first real admin from DB\r\n    console.warn(`Resolving mock Admin ID '${userId}' to a real database ID...`);\r\n    const { data } = await supabase\r\n        .from('users')\r\n        .select('id')\r\n        .eq('role', 'Admin')\r\n        .limit(1)\r\n        .maybeSingle();\r\n\r\n    return data?.id || 0; // Return Found ID or 0 (which might still fail constraint if no users, but better than string syntax error)\r\n}\r\n\r\n/**\r\n * Approve teacher attendance (admin action)\r\n */\r\nexport async function approveAttendance(attendanceId: number, adminUserId: number | string) {\r\n    try {\r\n        const resolvedAdminId = await resolveAdminId(adminUserId);\r\n\r\n        const { data, error } = await supabase\r\n            .from('teacher_attendance')\r\n            .update({\r\n                status: 'Approved',\r\n                approved_by: resolvedAdminId,\r\n                approved_at: new Date().toISOString(),\r\n                updated_at: new Date().toISOString(),\r\n            })\r\n            .eq('id', attendanceId)\r\n            .select(`\r\n        *,\r\n        teachers (\r\n          id,\r\n          user_id,\r\n          name\r\n        )\r\n      `)\r\n            .single();\r\n\r\n        if (error) throw error;\r\n\r\n        // Create notification for teacher\r\n        if (data.teachers && (data.teachers as any).user_id) {\r\n            await createNotification(\r\n                (data.teachers as any).user_id,\r\n                'Attendance Approved',\r\n                `Your attendance for ${data.date} has been approved`,\r\n                'Attendance',\r\n                attendanceId\r\n            );\r\n        }\r\n\r\n        return { success: true, data };\r\n    } catch (error: any) {\r\n        console.error('Error approving attendance:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n/**\r\n * Reject teacher attendance (admin action)\r\n */\r\nexport async function rejectAttendance(attendanceId: number, adminUserId: number | string, reason?: string) {\r\n    try {\r\n        const resolvedAdminId = await resolveAdminId(adminUserId);\r\n\r\n        const { data, error } = await supabase\r\n            .from('teacher_attendance')\r\n            .update({\r\n                status: 'Rejected',\r\n                approved_by: resolvedAdminId,\r\n                approved_at: new Date().toISOString(),\r\n                rejection_reason: reason,\r\n                updated_at: new Date().toISOString(),\r\n            })\r\n            .eq('id', attendanceId)\r\n            .select(`\r\n        *,\r\n        teachers (\r\n          id,\r\n          user_id,\r\n          name\r\n        )\r\n      `)\r\n            .single();\r\n\r\n        if (error) throw error;\r\n\r\n        // Create notification for teacher\r\n        if (data.teachers && (data.teachers as any).user_id) {\r\n            const message = reason\r\n                ? `Your attendance for ${data.date} was rejected. Reason: ${reason}`\r\n                : `Your attendance for ${data.date} was rejected`;\r\n\r\n            await createNotification(\r\n                (data.teachers as any).user_id,\r\n                'Attendance Rejected',\r\n                message,\r\n                'Attendance',\r\n                attendanceId\r\n            );\r\n        }\r\n\r\n        return { success: true, data };\r\n    } catch (error: any) {\r\n        console.error('Error rejecting attendance:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n/**\r\n * Create notification for a specific user\r\n */\r\nasync function createNotification(\r\n    userId: number,\r\n    title: string,\r\n    summary: string,\r\n    category: string,\r\n    relatedId?: number\r\n) {\r\n    try {\r\n        const { error } = await supabase\r\n            .from('notifications')\r\n            .insert({\r\n                user_id: userId,\r\n                title,\r\n                summary,\r\n                category,\r\n                related_id: relatedId,\r\n                is_read: false,\r\n            });\r\n\r\n        if (error) throw error;\r\n    } catch (error) {\r\n        console.error('Error creating notification:', error);\r\n    }\r\n}\r\n\r\n/**\r\n * Create notification for all admins\r\n */\r\nasync function createAdminNotification(title: string, summary: string, relatedId?: number) {\r\n    try {\r\n        // Get all admin users\r\n        const { data: adminUsers, error: userError } = await supabase\r\n            .from('users')\r\n            .select('id')\r\n            .eq('role', 'Admin');\r\n\r\n        if (userError) throw userError;\r\n\r\n        // Create notifications for each admin\r\n        const notifications = adminUsers?.map(admin => ({\r\n            user_id: admin.id,\r\n            title,\r\n            summary,\r\n            category: 'Attendance',\r\n            related_id: relatedId,\r\n            is_read: false,\r\n        })) || [];\r\n\r\n        if (notifications.length > 0) {\r\n            const { error } = await supabase\r\n                .from('notifications')\r\n                .insert(notifications);\r\n\r\n            if (error) throw error;\r\n        }\r\n    } catch (error) {\r\n        console.error('Error creating admin notifications:', error);\r\n    }\r\n}\r\n\r\n/**\r\n * Get today's attendance status for a teacher\r\n */\r\nexport async function getTodayAttendanceStatus(teacherId: number) {\r\n    const today = new Date().toISOString().split('T')[0];\r\n\r\n    try {\r\n        const { data, error } = await supabase\r\n            .from('teacher_attendance')\r\n            .select('*')\r\n            .eq('teacher_id', teacherId)\r\n            .eq('date', today)\r\n            .maybeSingle();\r\n\r\n        if (error) throw error;\r\n        return { success: true, data };\r\n    } catch (error: any) {\r\n        console.error('Error fetching today attendance status:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}