{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\teacher\\\\CreateAssignmentScreen.tsx\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport { toast } from 'react-hot-toast';\nimport { PaperclipIcon, CalendarIcon, XCircleIcon, FileDocIcon, FilePdfIcon, FileImageIcon, DocumentTextIcon } from '../../constants';\nimport { SUBJECTS_LIST } from '../../constants';\nimport { supabase } from '../../lib/supabase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getFileIcon = fileName => {\n  const extension = fileName.split('.').pop()?.toLowerCase();\n  if (extension === 'pdf') return _jsxDEV(FilePdfIcon, {\n    className: \"text-red-500 w-8 h-8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 35\n  }, this);\n  if (extension === 'doc' || extension === 'docx') return _jsxDEV(FileDocIcon, {\n    className: \"text-blue-500 w-8 h-8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 59\n  }, this);\n  if (['jpg', 'jpeg', 'png', 'gif'].includes(extension || '')) return _jsxDEV(FileImageIcon, {\n    className: \"text-green-500 w-8 h-8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 71\n  }, this);\n  return _jsxDEV(DocumentTextIcon, {\n    className: \"text-gray-500 w-8 h-8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 10\n  }, this);\n};\nconst formatFileSize = bytes => {\n  if (bytes === 0) return '0 Bytes';\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n};\nconst CreateAssignmentScreen = ({\n  classInfo,\n  onAssignmentAdded,\n  handleBack\n}) => {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [dueDate, setDueDate] = useState('');\n  const [selectedClass, setSelectedClass] = useState(classInfo ? `Grade ${classInfo.grade}${classInfo.section}` : '');\n  const [subject, setSubject] = useState(classInfo?.subject || '');\n  const [attachedFiles, setAttachedFiles] = useState([]);\n  const [availableClasses, setAvailableClasses] = useState([]);\n  const fileInputRef = useRef(null);\n  const [dbSubjects, setDbSubjects] = useState([]);\n  const teacherSubjects = dbSubjects.length > 0 ? dbSubjects : SUBJECTS_LIST;\n  useEffect(() => {\n    const fetchClassesAndSubjects = async () => {\n      const {\n        fetchSubjects\n      } = await import('../../lib/database');\n      const {\n        getGradeDisplayName\n      } = await import('../../lib/schoolSystem');\n      const {\n        data: classData\n      } = await supabase.from('classes').select('*').order('grade', {\n        ascending: true\n      }).order('section', {\n        ascending: true\n      });\n      if (classData) {\n        const enhancedClasses = classData.map(c => Object.assign({}, c, {\n          displayName: `${getGradeDisplayName(c.grade)} ${c.section}`\n        }));\n        setAvailableClasses(enhancedClasses);\n      }\n      const subjects = await fetchSubjects();\n      setDbSubjects(subjects);\n    };\n    fetchClassesAndSubjects();\n  }, []);\n  const handleFileChange = event => {\n    if (event.target.files) {\n      setAttachedFiles(prevFiles => [...prevFiles, ...Array.from(event.target.files)]);\n    }\n  };\n  const handleRemoveFile = fileToRemove => {\n    setAttachedFiles(prevFiles => prevFiles.filter(file => file !== fileToRemove));\n  };\n  const handleAttachClick = () => {\n    fileInputRef.current?.click();\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!title || !description || !dueDate || !selectedClass || !subject) {\n      toast.error(\"Please fill out all required fields.\");\n      return;\n    }\n    const targetClass = availableClasses.find(c => `Grade ${c.grade}${c.section}` === selectedClass);\n    const totalStudents = targetClass ? targetClass.student_count : 0;\n    const dbPayload = {\n      title,\n      description,\n      class_name: selectedClass,\n      subject,\n      due_date: new Date(dueDate).toISOString(),\n      total_students: totalStudents || 25,\n      submissions_count: 0\n    };\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('assignments').insert([dbPayload]).select();\n      if (error) {\n        throw error;\n      }\n      const newAssignmentData = {\n        title,\n        description,\n        className: selectedClass,\n        subject,\n        dueDate: new Date(dueDate).toISOString(),\n        totalStudents: totalStudents || 25,\n        submissionsCount: 0\n      };\n      onAssignmentAdded(newAssignmentData);\n    } catch (err) {\n      console.error('Error saving assignment:', err);\n      if (err?.message?.includes('relation \"assignments\" does not exist')) {\n        toast.error(\"Database table 'assignments' not found. Creating locally only.\");\n        const newAssignmentData = {\n          title,\n          description,\n          className: selectedClass,\n          subject,\n          dueDate: new Date(dueDate).toISOString(),\n          totalStudents: totalStudents || 25,\n          submissionsCount: 0\n        };\n        onAssignmentAdded(newAssignmentData);\n      } else {\n        toast.error(\"Failed to publish assignment: \" + (err.message || \"Unknown error\"));\n      }\n    }\n  };\n  return _jsxDEV(\"div\", {\n    className: \"flex flex-col h-full bg-gray-50\",\n    children: _jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"flex-grow flex flex-col\",\n      children: [_jsxDEV(\"main\", {\n        className: \"flex-grow p-4 overflow-y-auto\",\n        children: _jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 lg:grid-cols-3 gap-5\",\n          children: [_jsxDEV(\"div\", {\n            className: \"lg:col-span-2 bg-white p-4 rounded-xl shadow-sm space-y-4\",\n            children: [_jsxDEV(\"div\", {\n              children: [_jsxDEV(\"label\", {\n                htmlFor: \"assignment-title\",\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this), _jsxDEV(\"input\", {\n                id: \"assignment-title\",\n                type: \"text\",\n                value: title,\n                onChange: e => setTitle(e.target.value),\n                placeholder: \"e.g., Photosynthesis Essay\",\n                required: true,\n                className: \"w-full px-3 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this), _jsxDEV(\"div\", {\n              children: [_jsxDEV(\"label\", {\n                htmlFor: \"assignment-description\",\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 17\n              }, this), _jsxDEV(\"textarea\", {\n                id: \"assignment-description\",\n                value: description,\n                onChange: e => setDescription(e.target.value),\n                rows: 12,\n                placeholder: \"Provide instructions for the assignment...\",\n                required: true,\n                className: \"w-full px-3 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), _jsxDEV(\"div\", {\n            className: \"lg:col-span-1 space-y-5\",\n            children: [_jsxDEV(\"div\", {\n              className: \"bg-white p-4 rounded-xl shadow-sm space-y-4\",\n              children: [_jsxDEV(\"div\", {\n                children: [_jsxDEV(\"label\", {\n                  htmlFor: \"assignment-class\",\n                  className: \"block text-sm font-medium text-gray-700 mb-1\",\n                  children: \"Class\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 19\n                }, this), _jsxDEV(\"select\", {\n                  id: \"assignment-class\",\n                  value: selectedClass,\n                  onChange: e => setSelectedClass(e.target.value),\n                  required: true,\n                  className: \"w-full px-3 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500\",\n                  children: [_jsxDEV(\"option\", {\n                    value: \"\",\n                    disabled: true,\n                    children: \"Select a class\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 21\n                  }, this), availableClasses.map(c => _jsxDEV(\"option\", {\n                    value: `Grade ${c.grade}${c.section}`,\n                    children: [\"Grade \", c.grade, c.section]\n                  }, c.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 17\n              }, this), _jsxDEV(\"div\", {\n                children: [_jsxDEV(\"label\", {\n                  htmlFor: \"subject\",\n                  className: \"block text-sm font-medium text-gray-700 mb-1\",\n                  children: \"Subject\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 19\n                }, this), _jsxDEV(\"select\", {\n                  id: \"subject\",\n                  value: subject,\n                  onChange: e => setSubject(e.target.value),\n                  required: true,\n                  className: \"w-full px-3 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500\",\n                  children: [_jsxDEV(\"option\", {\n                    value: \"\",\n                    disabled: true,\n                    children: \"Select subject...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 21\n                  }, this), teacherSubjects.map(sub => _jsxDEV(\"option\", {\n                    value: sub.name,\n                    children: sub.name\n                  }, sub.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 49\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 17\n              }, this), _jsxDEV(\"div\", {\n                children: [_jsxDEV(\"label\", {\n                  htmlFor: \"due-date\",\n                  className: \"block text-sm font-medium text-gray-700 mb-1\",\n                  children: \"Due Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 19\n                }, this), _jsxDEV(\"div\", {\n                  className: \"relative\",\n                  children: [_jsxDEV(\"input\", {\n                    id: \"due-date\",\n                    type: \"date\",\n                    value: dueDate,\n                    onChange: e => setDueDate(e.target.value),\n                    required: true,\n                    className: \"w-full pl-3 pr-10 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 21\n                  }, this), _jsxDEV(\"span\", {\n                    className: \"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\",\n                    children: _jsxDEV(CalendarIcon, {\n                      className: \"h-5 w-5 text-gray-400\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 210,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 15\n            }, this), _jsxDEV(\"div\", {\n              className: \"bg-white p-4 rounded-xl shadow-sm space-y-4\",\n              children: [_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700\",\n                children: \"Attachments\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 17\n              }, this), _jsxDEV(\"input\", {\n                type: \"file\",\n                multiple: true,\n                ref: fileInputRef,\n                onChange: handleFileChange,\n                className: \"hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 17\n              }, this), _jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: handleAttachClick,\n                className: \"w-full flex items-center justify-center space-x-2 px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:bg-gray-100 hover:border-purple-400 hover:text-purple-600 transition-colors\",\n                children: [_jsxDEV(PaperclipIcon, {\n                  className: \"h-5 w-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 19\n                }, this), _jsxDEV(\"span\", {\n                  className: \"font-semibold\",\n                  children: \"Attach Files\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 17\n              }, this), attachedFiles.length > 0 && _jsxDEV(\"div\", {\n                className: \"space-y-2 pt-2\",\n                children: [_jsxDEV(\"h4\", {\n                  className: \"text-xs font-semibold text-gray-500\",\n                  children: \"Attached Files:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 21\n                }, this), attachedFiles.map((file, index) => _jsxDEV(\"div\", {\n                  className: \"flex items-center p-2 bg-gray-50 rounded-lg\",\n                  children: [getFileIcon(file.name), _jsxDEV(\"div\", {\n                    className: \"ml-3 flex-grow overflow-hidden\",\n                    children: [_jsxDEV(\"p\", {\n                      className: \"text-sm font-medium text-gray-800 truncate\",\n                      children: file.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 231,\n                      columnNumber: 27\n                    }, this), _jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-500\",\n                      children: formatFileSize(file.size)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 232,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 25\n                  }, this), _jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => handleRemoveFile(file),\n                    className: \"ml-2 p-1 text-gray-400 hover:text-red-500\",\n                    \"aria-label\": `Remove ${file.name}`,\n                    children: _jsxDEV(XCircleIcon, {\n                      className: \"w-5 h-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 235,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 25\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), _jsxDEV(\"div\", {\n        className: \"p-4 mt-auto bg-white border-t border-gray-200\",\n        children: _jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500\",\n          children: \"Create Assignment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 5\n  }, this);\n};\nexport default CreateAssignmentScreen;","map":{"version":3,"names":["React","useState","useRef","useEffect","toast","PaperclipIcon","CalendarIcon","XCircleIcon","FileDocIcon","FilePdfIcon","FileImageIcon","DocumentTextIcon","SUBJECTS_LIST","supabase","jsxDEV","_jsxDEV","getFileIcon","fileName","extension","split","pop","toLowerCase","className","_jsxFileName","lineNumber","columnNumber","includes","formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","CreateAssignmentScreen","classInfo","onAssignmentAdded","handleBack","title","setTitle","description","setDescription","dueDate","setDueDate","selectedClass","setSelectedClass","grade","section","subject","setSubject","attachedFiles","setAttachedFiles","availableClasses","setAvailableClasses","fileInputRef","dbSubjects","setDbSubjects","teacherSubjects","length","fetchClassesAndSubjects","fetchSubjects","getGradeDisplayName","data","classData","from","select","order","ascending","enhancedClasses","map","c","Object","assign","displayName","subjects","handleFileChange","event","target","files","prevFiles","Array","handleRemoveFile","fileToRemove","filter","file","handleAttachClick","current","click","handleSubmit","e","preventDefault","error","targetClass","find","totalStudents","student_count","dbPayload","class_name","due_date","Date","toISOString","total_students","submissions_count","insert","newAssignmentData","submissionsCount","err","console","message","children","onSubmit","htmlFor","id","type","value","onChange","placeholder","required","rows","disabled","sub","name","multiple","ref","onClick","index","size"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/teacher/CreateAssignmentScreen.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useMemo } from 'react';\r\nimport { toast } from 'react-hot-toast';\r\nimport {\r\n  PaperclipIcon,\r\n  CalendarIcon,\r\n  XCircleIcon,\r\n  FileDocIcon,\r\n  FilePdfIcon,\r\n  FileImageIcon,\r\n  DocumentTextIcon,\r\n} from '../../constants';\r\n// import { mockClasses, mockTeachers } from '../../data';\r\nimport { ClassInfo, Assignment } from '../../types';\r\nimport { SUBJECTS_LIST } from '../../constants';\r\nimport { supabase } from '../../lib/supabase';\r\n\r\nconst getFileIcon = (fileName: string): React.ReactElement => {\r\n  const extension = fileName.split('.').pop()?.toLowerCase();\r\n  if (extension === 'pdf') return <FilePdfIcon className=\"text-red-500 w-8 h-8\" />;\r\n  if (extension === 'doc' || extension === 'docx') return <FileDocIcon className=\"text-blue-500 w-8 h-8\" />;\r\n  if (['jpg', 'jpeg', 'png', 'gif'].includes(extension || '')) return <FileImageIcon className=\"text-green-500 w-8 h-8\" />;\r\n  return <DocumentTextIcon className=\"text-gray-500 w-8 h-8\" />;\r\n};\r\n\r\nconst formatFileSize = (bytes: number): string => {\r\n  if (bytes === 0) return '0 Bytes';\r\n  const k = 1024;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n};\r\n\r\ninterface CreateAssignmentScreenProps {\r\n  classInfo?: ClassInfo;\r\n  onAssignmentAdded: (newAssignment: Omit<Assignment, 'id'>) => void;\r\n  handleBack: () => void;\r\n}\r\n\r\nconst CreateAssignmentScreen: React.FC<CreateAssignmentScreenProps> = ({ classInfo, onAssignmentAdded, handleBack }) => {\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [dueDate, setDueDate] = useState('');\r\n  const [selectedClass, setSelectedClass] = useState(classInfo ? `Grade ${classInfo.grade}${classInfo.section}` : '');\r\n  const [subject, setSubject] = useState(classInfo?.subject || '');\r\n  const [attachedFiles, setAttachedFiles] = useState<File[]>([]);\r\n  const [availableClasses, setAvailableClasses] = useState<any[]>([]);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // const teacher = useMemo(() => mockTeachers.find(t => t.id === LOGGED_IN_TEACHER_ID)!, []);\r\n  // const teacherSubjects = useMemo(() => SUBJECTS_LIST.filter(s => teacher.subjects.includes(s.name)), [teacher]);\r\n  const [dbSubjects, setDbSubjects] = useState<any[]>([]);\r\n  const teacherSubjects = dbSubjects.length > 0 ? dbSubjects : SUBJECTS_LIST;\r\n\r\n  useEffect(() => {\r\n    const fetchClassesAndSubjects = async () => {\r\n\r\n      // Dynamic import\r\n      const { fetchSubjects } = await import('../../lib/database');\r\n      const { getGradeDisplayName } = await import('../../lib/schoolSystem');\r\n\r\n      const { data: classData } = await supabase\r\n        .from('classes')\r\n        .select('*')\r\n        .order('grade', { ascending: true })\r\n        .order('section', { ascending: true });\r\n\r\n      if (classData) {\r\n        // Enhance with formatted name for display, but keep original structure\r\n        const enhancedClasses = classData.map((c: any) => ({\r\n          ...c,\r\n          displayName: `${getGradeDisplayName(c.grade)} ${c.section}`\r\n        }));\r\n        setAvailableClasses(enhancedClasses);\r\n      }\r\n\r\n      const subjects = await fetchSubjects();\r\n      setDbSubjects(subjects);\r\n    };\r\n    fetchClassesAndSubjects();\r\n  }, []);\r\n\r\n\r\n\r\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (event.target.files) {\r\n      setAttachedFiles(prevFiles => [...prevFiles, ...Array.from(event.target.files!)]);\r\n    }\r\n  };\r\n\r\n  const handleRemoveFile = (fileToRemove: File) => {\r\n    setAttachedFiles(prevFiles => prevFiles.filter(file => file !== fileToRemove));\r\n  };\r\n\r\n  const handleAttachClick = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!title || !description || !dueDate || !selectedClass || !subject) {\r\n      toast.error(\"Please fill out all required fields.\");\r\n      return;\r\n    }\r\n\r\n    const targetClass = availableClasses.find(c => `Grade ${c.grade}${c.section}` === selectedClass);\r\n    const totalStudents = targetClass ? targetClass.student_count : 0;\r\n\r\n    // Prepare payload for Database (Snake Case for columns)\r\n    const dbPayload = {\r\n      title,\r\n      description,\r\n      class_name: selectedClass,\r\n      subject,\r\n      due_date: new Date(dueDate).toISOString(),\r\n      total_students: totalStudents || 25,\r\n      submissions_count: 0,\r\n      // teacher_id: 2 // TEMPORARY: Commented out to prevent schema error until DB is updated\r\n    };\r\n\r\n    try {\r\n      // 1. Save to Supabase\r\n      const { data, error } = await supabase\r\n        .from('assignments')\r\n        .insert([dbPayload])\r\n        .select();\r\n\r\n      if (error) {\r\n        throw error;\r\n      }\r\n\r\n      // console.log('Assignment saved:', data);\r\n\r\n      // 2. Update Local State (Camel Case for frontend)\r\n      const newAssignmentData = {\r\n        title,\r\n        description,\r\n        className: selectedClass,\r\n        subject,\r\n        dueDate: new Date(dueDate).toISOString(),\r\n        totalStudents: totalStudents || 25,\r\n        submissionsCount: 0,\r\n      };\r\n\r\n      onAssignmentAdded(newAssignmentData);\r\n\r\n    } catch (err: any) {\r\n      console.error('Error saving assignment:', err);\r\n      // Fallback for demo purposes if table is missing, still update UI but warn\r\n      if (err?.message?.includes('relation \"assignments\" does not exist')) {\r\n        toast.error(\"Database table 'assignments' not found. Creating locally only.\");\r\n        const newAssignmentData = {\r\n          title,\r\n          description,\r\n          className: selectedClass,\r\n          subject,\r\n          dueDate: new Date(dueDate).toISOString(),\r\n          totalStudents: totalStudents || 25,\r\n          submissionsCount: 0,\r\n        };\r\n        onAssignmentAdded(newAssignmentData);\r\n      } else {\r\n        toast.error(\"Failed to publish assignment: \" + (err.message || \"Unknown error\"));\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-gray-50\">\r\n      <form onSubmit={handleSubmit} className=\"flex-grow flex flex-col\">\r\n        <main className=\"flex-grow p-4 overflow-y-auto\">\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-5\">\r\n            {/* Main Details */}\r\n            <div className=\"lg:col-span-2 bg-white p-4 rounded-xl shadow-sm space-y-4\">\r\n              <div>\r\n                <label htmlFor=\"assignment-title\" className=\"block text-sm font-medium text-gray-700 mb-1\">Title</label>\r\n                <input id=\"assignment-title\" type=\"text\" value={title} onChange={e => setTitle(e.target.value)} placeholder=\"e.g., Photosynthesis Essay\" required className=\"w-full px-3 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500\" />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"assignment-description\" className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\r\n                <textarea id=\"assignment-description\" value={description} onChange={e => setDescription(e.target.value)} rows={12} placeholder=\"Provide instructions for the assignment...\" required className=\"w-full px-3 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"lg:col-span-1 space-y-5\">\r\n              {/* Settings */}\r\n              <div className=\"bg-white p-4 rounded-xl shadow-sm space-y-4\">\r\n                <div>\r\n                  <label htmlFor=\"assignment-class\" className=\"block text-sm font-medium text-gray-700 mb-1\">Class</label>\r\n                  <select id=\"assignment-class\" value={selectedClass} onChange={e => setSelectedClass(e.target.value)} required className=\"w-full px-3 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500\">\r\n                    <option value=\"\" disabled>Select a class</option>\r\n                    {availableClasses.map(c => (\r\n                      <option key={c.id} value={`Grade ${c.grade}${c.section}`}>\r\n                        Grade {c.grade}{c.section}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label htmlFor=\"subject\" className=\"block text-sm font-medium text-gray-700 mb-1\">Subject</label>\r\n                  <select id=\"subject\" value={subject} onChange={e => setSubject(e.target.value)} required className=\"w-full px-3 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500\">\r\n                    <option value=\"\" disabled>Select subject...</option>\r\n                    {teacherSubjects.map(sub => <option key={sub.id} value={sub.name}>{sub.name}</option>)}\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label htmlFor=\"due-date\" className=\"block text-sm font-medium text-gray-700 mb-1\">Due Date</label>\r\n                  <div className=\"relative\">\r\n                    <input id=\"due-date\" type=\"date\" value={dueDate} onChange={e => setDueDate(e.target.value)} required className=\"w-full pl-3 pr-10 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500\" />\r\n                    <span className=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\r\n                      <CalendarIcon className=\"h-5 w-5 text-gray-400\" />\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Attachments */}\r\n              <div className=\"bg-white p-4 rounded-xl shadow-sm space-y-4\">\r\n                <label className=\"block text-sm font-medium text-gray-700\">Attachments</label>\r\n                <input type=\"file\" multiple ref={fileInputRef} onChange={handleFileChange} className=\"hidden\" />\r\n                <button type=\"button\" onClick={handleAttachClick} className=\"w-full flex items-center justify-center space-x-2 px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:bg-gray-100 hover:border-purple-400 hover:text-purple-600 transition-colors\">\r\n                  <PaperclipIcon className=\"h-5 w-5\" />\r\n                  <span className=\"font-semibold\">Attach Files</span>\r\n                </button>\r\n                {attachedFiles.length > 0 && (\r\n                  <div className=\"space-y-2 pt-2\">\r\n                    <h4 className=\"text-xs font-semibold text-gray-500\">Attached Files:</h4>\r\n                    {attachedFiles.map((file, index) => (\r\n                      <div key={index} className=\"flex items-center p-2 bg-gray-50 rounded-lg\">\r\n                        {getFileIcon(file.name)}\r\n                        <div className=\"ml-3 flex-grow overflow-hidden\">\r\n                          <p className=\"text-sm font-medium text-gray-800 truncate\">{file.name}</p>\r\n                          <p className=\"text-xs text-gray-500\">{formatFileSize(file.size)}</p>\r\n                        </div>\r\n                        <button type=\"button\" onClick={() => handleRemoveFile(file)} className=\"ml-2 p-1 text-gray-400 hover:text-red-500\" aria-label={`Remove ${file.name}`}>\r\n                          <XCircleIcon className=\"w-5 h-5\" />\r\n                        </button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </main>\r\n        <div className=\"p-4 mt-auto bg-white border-t border-gray-200\">\r\n          <button type=\"submit\" className=\"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500\">\r\n            Create Assignment\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateAssignmentScreen;"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}