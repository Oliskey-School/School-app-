{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\teacher\\\\TeacherDashboard.tsx\";\nimport React, { useState, useEffect, lazy, Suspense } from 'react';\nimport { DashboardType } from '../../types';\nimport { THEME_CONFIG } from '../../constants';\nimport Header from '../ui/Header';\nimport { TeacherBottomNav } from '../ui/DashboardBottomNav';\nimport { TeacherSidebar } from '../ui/DashboardSidebar';\nimport { useRealtimeNotifications } from '../../hooks/useRealtimeNotifications';\nconst GlobalSearchScreen = lazy(() => import('../shared/GlobalSearchScreen'));\nimport TeacherOverview from '../teacher/TeacherOverview';\nimport ClassDetailScreen from '../teacher/ClassDetailScreen';\nimport StudentProfileScreen from '../teacher/StudentProfileScreen';\nimport TeacherExamManagement from '../teacher/TeacherExamManagement';\nimport LibraryScreen from '../shared/LibraryScreen';\nimport PhotoGalleryScreen from '../teacher/PhotoGalleryScreen';\nimport AddExamScreen from '../admin/AddExamScreen';\nimport CreateAssignmentScreen from '../teacher/CreateAssignmentScreen';\nimport TeacherAssignmentsListScreen from '../teacher/TeacherAssignmentsListScreen';\nimport ClassAssignmentsScreen from '../teacher/ClassAssignmentsScreen';\nimport AssignmentSubmissionsScreen from '../teacher/AssignmentSubmissionsScreen';\nimport GradeSubmissionScreen from '../teacher/GradeSubmissionScreen';\nimport CurriculumScreen from '../shared/CurriculumScreen';\nimport TeacherCurriculumSelectionScreen from '../teacher/TeacherCurriculumSelectionScreen';\nimport GradeEntryScreen from '../teacher/GradeEntryScreen';\nimport TeacherMessagesScreen from '../teacher/TeacherMessagesScreen';\nimport TeacherCommunicationScreen from '../teacher/TeacherCommunicationScreen';\nimport CalendarScreen from '../shared/CalendarScreen';\nimport ReportCardInputScreen from '../teacher/ReportCardInputScreen';\nimport CollaborationForumScreen from '../teacher/CollaborationForumScreen';\nimport ForumTopicScreen from '../teacher/ForumTopicScreen';\nimport TimetableScreen from '../shared/TimetableScreen';\nimport ChatScreen from '../shared/ChatScreen';\nimport TeacherReportsScreen from '../teacher/TeacherReportsScreen';\nimport TeacherSettingsScreen from '../teacher/TeacherSettingsScreen';\nimport EditTeacherProfileScreen from '../teacher/EditTeacherProfileScreen';\nimport TeacherNotificationSettingsScreen from '../teacher/TeacherNotificationSettingsScreen';\nimport TeacherSecurityScreen from '../teacher/TeacherSecurityScreen';\nimport TeacherChangePasswordScreen from '../teacher/TeacherChangePasswordScreen';\nimport NewChatScreen from '../teacher/NewChatScreen';\nimport TeacherReportCardPreviewScreen from '../teacher/TeacherReportCardPreviewScreen';\nimport NotificationsScreen from '../shared/NotificationsScreen';\nimport TeacherSelectClassForAttendance from '../teacher/TeacherUnifiedAttendanceScreen';\nimport TeacherMarkAttendanceScreen from '../teacher/TeacherAttendanceScreen';\nimport TeacherSelfAttendance from '../teacher/TeacherSelfAttendance';\nimport LessonPlannerScreen from '../teacher/LessonPlannerScreen';\nimport LessonPlanDetailScreen from '../teacher/LessonPlanDetailScreen';\nimport DetailedLessonNoteScreen from '../teacher/DetailedLessonNoteScreen';\nimport SelectTermForReportScreen from '../teacher/SelectTermForReportScreen';\nimport ProfessionalDevelopmentScreen from '../teacher/ProfessionalDevelopmentScreen';\nimport AIPerformanceSummaryScreen from '../teacher/AIPerformanceSummaryScreen';\nimport EducationalGamesScreen from '../teacher/EducationalGamesScreen';\nimport LessonContentScreen from '../teacher/LessonContentScreen';\nimport AssignmentViewScreen from '../teacher/AssignmentViewScreen';\nimport AIGameCreatorScreen from '../teacher/AIGameCreatorScreen';\nimport GamePlayerScreen from '../shared/GamePlayerScreen';\nimport TeacherAppointmentsScreen from '../teacher/TeacherAppointmentsScreen';\nimport VirtualClassScreen from '../teacher/VirtualClassScreen';\nimport TeacherResourcesScreen from '../teacher/TeacherResourcesScreen';\nimport CBTManagementScreen from '../teacher/CBTManagementScreen';\nimport CBTScoresScreen from '../teacher/CBTScoresScreen';\nimport QuizBuilderScreen from '../teacher/QuizBuilderScreen';\nimport ClassGradebookScreen from '../teacher/ClassGradebookScreen';\nimport LessonNotesUploadScreen from '../teacher/LessonNotesUploadScreen';\nconst DashboardSuspenseFallback = () => _jsxDEV(\"div\", {\n  className: \"flex justify-center items-center h-full p-8 pt-20\",\n  children: _jsxDEV(\"div\", {\n    className: \"w-10 h-10 border-4 border-t-4 border-gray-200 border-t-purple-600 rounded-full animate-spin\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 72,\n  columnNumber: 3\n}, this);\nimport { supabase } from '../../lib/supabase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TeacherDashboard = ({\n  onLogout,\n  setIsHomePage,\n  currentUser\n}) => {\n  const [viewStack, setViewStack] = useState([{\n    view: 'overview',\n    title: 'Teacher Dashboard',\n    props: {}\n  }]);\n  const [activeBottomNav, setActiveBottomNav] = useState('home');\n  const [version, setVersion] = useState(0);\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\n  const [teacherId, setTeacherId] = useState(null);\n  const [teacherProfile, setTeacherProfile] = useState({\n    name: 'Teacher',\n    avatarUrl: ''\n  });\n  const fetchProfile = async optimisticData => {\n    if (optimisticData) {\n      setTeacherProfile(optimisticData);\n      return;\n    }\n    try {\n      let query = supabase.from('teachers').select('id, name, avatar_url, email');\n      let emailToQuery = currentUser?.email;\n      if (!emailToQuery) {\n        const {\n          data: {\n            user\n          }\n        } = await supabase.auth.getUser();\n        if (user?.email) {\n          emailToQuery = user.email;\n        }\n      }\n      if (emailToQuery) {\n        query = query.eq('email', emailToQuery);\n      } else {\n        console.warn(\"No auth user found, falling back to Demo Teacher (ID 2)\");\n        query = query.eq('id', 2);\n      }\n      const {\n        data,\n        error\n      } = await query.maybeSingle();\n      if (error) {\n        console.error('Error fetching dashboard profile:', error);\n        return;\n      }\n      if (data) {\n        setTeacherId(data.id);\n        setTeacherProfile({\n          name: data.name || 'Teacher',\n          avatarUrl: data.avatar_url\n        });\n      }\n    } catch (err) {\n      console.error('Unexpected error fetching profile:', err);\n    }\n  };\n  useEffect(() => {\n    fetchProfile();\n  }, [currentUser]);\n  const forceUpdate = () => setVersion(v => v + 1);\n  useEffect(() => {\n    const currentView = viewStack[viewStack.length - 1];\n    setIsHomePage(currentView.view === 'overview' && !isSearchOpen);\n  }, [viewStack, isSearchOpen, setIsHomePage]);\n  const notificationCount = useRealtimeNotifications('teacher');\n  const navigateTo = (view, title, props = {}) => {\n    setViewStack(stack => [...stack, {\n      view,\n      props,\n      title\n    }]);\n  };\n  const handleBack = () => {\n    if (viewStack.length > 1) {\n      setViewStack(stack => stack.slice(0, -1));\n    }\n  };\n  const handleBottomNavClick = screen => {\n    setActiveBottomNav(screen);\n    let props = {};\n    switch (screen) {\n      case 'home':\n        setViewStack([{\n          view: 'overview',\n          title: 'Teacher Dashboard',\n          props\n        }]);\n        break;\n      case 'lessonNotes':\n        setViewStack([{\n          view: 'lessonNotesUpload',\n          title: 'Lesson Notes',\n          props: {}\n        }]);\n        break;\n      case 'reports':\n        setViewStack([{\n          view: 'reports',\n          title: 'Student Reports',\n          props\n        }]);\n        break;\n      case 'forum':\n        setViewStack([{\n          view: 'collaborationForum',\n          title: 'Collaboration Forum',\n          props: {}\n        }]);\n        break;\n      case 'messages':\n        setViewStack([{\n          view: 'messages',\n          title: 'Messages',\n          props: {}\n        }]);\n        break;\n      case 'settings':\n        setViewStack([{\n          view: 'settings',\n          props,\n          title: 'Settings'\n        }]);\n        break;\n      default:\n        setViewStack([{\n          view: 'overview',\n          title: 'Teacher Dashboard',\n          props\n        }]);\n    }\n  };\n  const handleNotificationClick = () => {\n    navigateTo('notifications', 'Notifications', {});\n  };\n  const viewComponents = {\n    overview: TeacherOverview,\n    classDetail: ClassDetailScreen,\n    studentProfile: StudentProfileScreen,\n    examManagement: TeacherExamManagement,\n    selectClassForAttendance: TeacherSelectClassForAttendance,\n    markAttendance: TeacherMarkAttendanceScreen,\n    teacherSelfAttendance: TeacherSelfAttendance,\n    library: LibraryScreen,\n    gallery: PhotoGalleryScreen,\n    calendar: CalendarScreen,\n    addExam: AddExamScreen,\n    createAssignment: CreateAssignmentScreen,\n    assignmentsList: TeacherAssignmentsListScreen,\n    classAssignments: ClassAssignmentsScreen,\n    assignmentSubmissions: AssignmentSubmissionsScreen,\n    gradeSubmission: GradeSubmissionScreen,\n    curriculumSelection: TeacherCurriculumSelectionScreen,\n    curriculum: CurriculumScreen,\n    gradeEntry: GradeEntryScreen,\n    messages: TeacherMessagesScreen,\n    newChat: NewChatScreen,\n    communication: TeacherCommunicationScreen,\n    reportCardInput: ReportCardInputScreen,\n    collaborationForum: CollaborationForumScreen,\n    forumTopic: ForumTopicScreen,\n    timetable: props => _jsxDEV(TimetableScreen, Object.assign({}, props, {\n      context: {\n        userType: 'teacher',\n        userId: teacherId ?? 2\n      }\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 32\n    }, this),\n    chat: props => _jsxDEV(ChatScreen, Object.assign({}, props, {\n      currentUserId: teacherId ?? 2\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 27\n    }, this),\n    reports: TeacherReportsScreen,\n    reportCardPreview: TeacherReportCardPreviewScreen,\n    settings: props => _jsxDEV(TeacherSettingsScreen, Object.assign({}, props, {\n      dashboardProfile: teacherProfile,\n      refreshDashboardProfile: fetchProfile\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 31\n    }, this),\n    editTeacherProfile: props => _jsxDEV(EditTeacherProfileScreen, Object.assign({}, props, {\n      onProfileUpdate: fetchProfile\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 41\n    }, this),\n    teacherNotificationSettings: TeacherNotificationSettingsScreen,\n    teacherSecurity: TeacherSecurityScreen,\n    teacherChangePassword: TeacherChangePasswordScreen,\n    lessonPlanner: LessonPlannerScreen,\n    lessonPlanDetail: LessonPlanDetailScreen,\n    lessonContent: LessonContentScreen,\n    assignmentView: AssignmentViewScreen,\n    detailedLessonNote: DetailedLessonNoteScreen,\n    notifications: props => _jsxDEV(NotificationsScreen, Object.assign({}, props, {\n      userType: \"teacher\"\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 36\n    }, this),\n    selectTermForReport: SelectTermForReportScreen,\n    professionalDevelopment: ProfessionalDevelopmentScreen,\n    aiPerformanceSummary: AIPerformanceSummaryScreen,\n    educationalGames: EducationalGamesScreen,\n    aiGameCreator: AIGameCreatorScreen,\n    gamePlayer: GamePlayerScreen,\n    appointments: TeacherAppointmentsScreen,\n    virtualClass: VirtualClassScreen,\n    resources: TeacherResourcesScreen,\n    cbtScores: CBTScoresScreen,\n    cbtManagement: CBTManagementScreen,\n    quizBuilder: props => _jsxDEV(QuizBuilderScreen, Object.assign({}, props, {\n      teacherId: teacherId ?? 2,\n      onClose: handleBack\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 34\n    }, this),\n    classGradebook: props => _jsxDEV(ClassGradebookScreen, Object.assign({}, props, {\n      teacherId: teacherId ?? 2,\n      handleBack: handleBack\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 37\n    }, this),\n    lessonNotesUpload: props => _jsxDEV(LessonNotesUploadScreen, Object.assign({}, props, {\n      teacherId: teacherId ?? 2,\n      handleBack: handleBack\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 40\n    }, this)\n  };\n  const currentNavigation = viewStack[viewStack.length - 1];\n  const ComponentToRender = viewComponents[currentNavigation.view];\n  const commonProps = {\n    navigateTo,\n    handleBack,\n    onLogout,\n    forceUpdate,\n    teacherProfile,\n    refreshProfile: fetchProfile,\n    teacherId,\n    currentUser\n  };\n  return _jsxDEV(\"div\", {\n    className: \"flex h-screen w-full overflow-hidden bg-gray-100\",\n    children: [_jsxDEV(\"div\", {\n      className: \"hidden md:flex w-64 flex-col fixed inset-y-0 left-0 z-50\",\n      children: _jsxDEV(TeacherSidebar, {\n        activeScreen: activeBottomNav,\n        setActiveScreen: handleBottomNavClick,\n        onLogout: onLogout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this), _jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col h-screen w-full md:ml-64 overflow-hidden\",\n      children: [_jsxDEV(Header, {\n        title: currentNavigation.title,\n        avatarUrl: teacherProfile.avatarUrl,\n        bgColor: THEME_CONFIG[DashboardType.Teacher].mainBg,\n        onLogout: onLogout,\n        onBack: viewStack.length > 1 ? handleBack : undefined,\n        onNotificationClick: handleNotificationClick,\n        notificationCount: notificationCount,\n        onSearchClick: () => setIsSearchOpen(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this), _jsxDEV(\"div\", {\n        className: \"flex-1 overflow-y-auto\",\n        style: {\n          marginTop: '-5rem'\n        },\n        children: _jsxDEV(\"main\", {\n          className: \"min-h-full pt-20 pb-20 md:pb-6\",\n          children: _jsxDEV(\"div\", {\n            className: \"animate-slide-in-up\",\n            children: ComponentToRender ? _jsxDEV(ComponentToRender, Object.assign({}, currentNavigation.props, commonProps), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 17\n            }, this) : _jsxDEV(\"div\", {\n              className: \"p-6\",\n              children: [\"View not found: \", currentNavigation.view]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 17\n            }, this)\n          }, `${viewStack.length}-${version}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this), _jsxDEV(\"div\", {\n        className: \"md:hidden\",\n        children: _jsxDEV(TeacherBottomNav, {\n          activeScreen: activeBottomNav,\n          setActiveScreen: handleBottomNavClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), _jsxDEV(Suspense, {\n        fallback: _jsxDEV(DashboardSuspenseFallback, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 29\n        }, this),\n        children: isSearchOpen && _jsxDEV(GlobalSearchScreen, {\n          dashboardType: DashboardType.Teacher,\n          navigateTo: navigateTo,\n          onClose: () => setIsSearchOpen(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 284,\n    columnNumber: 5\n  }, this);\n};\nexport default TeacherDashboard;","map":{"version":3,"names":["React","useState","useEffect","lazy","Suspense","DashboardType","THEME_CONFIG","Header","TeacherBottomNav","TeacherSidebar","useRealtimeNotifications","GlobalSearchScreen","TeacherOverview","ClassDetailScreen","StudentProfileScreen","TeacherExamManagement","LibraryScreen","PhotoGalleryScreen","AddExamScreen","CreateAssignmentScreen","TeacherAssignmentsListScreen","ClassAssignmentsScreen","AssignmentSubmissionsScreen","GradeSubmissionScreen","CurriculumScreen","TeacherCurriculumSelectionScreen","GradeEntryScreen","TeacherMessagesScreen","TeacherCommunicationScreen","CalendarScreen","ReportCardInputScreen","CollaborationForumScreen","ForumTopicScreen","TimetableScreen","ChatScreen","TeacherReportsScreen","TeacherSettingsScreen","EditTeacherProfileScreen","TeacherNotificationSettingsScreen","TeacherSecurityScreen","TeacherChangePasswordScreen","NewChatScreen","TeacherReportCardPreviewScreen","NotificationsScreen","TeacherSelectClassForAttendance","TeacherMarkAttendanceScreen","TeacherSelfAttendance","LessonPlannerScreen","LessonPlanDetailScreen","DetailedLessonNoteScreen","SelectTermForReportScreen","ProfessionalDevelopmentScreen","AIPerformanceSummaryScreen","EducationalGamesScreen","LessonContentScreen","AssignmentViewScreen","AIGameCreatorScreen","GamePlayerScreen","TeacherAppointmentsScreen","VirtualClassScreen","TeacherResourcesScreen","CBTManagementScreen","CBTScoresScreen","QuizBuilderScreen","ClassGradebookScreen","LessonNotesUploadScreen","DashboardSuspenseFallback","_jsxDEV","className","children","fileName","_jsxFileName","lineNumber","columnNumber","supabase","jsxDEV","TeacherDashboard","onLogout","setIsHomePage","currentUser","viewStack","setViewStack","view","title","props","activeBottomNav","setActiveBottomNav","version","setVersion","isSearchOpen","setIsSearchOpen","teacherId","setTeacherId","teacherProfile","setTeacherProfile","name","avatarUrl","fetchProfile","optimisticData","query","from","select","emailToQuery","email","data","user","auth","getUser","eq","console","warn","error","maybeSingle","id","avatar_url","err","forceUpdate","v","currentView","length","notificationCount","navigateTo","stack","handleBack","slice","handleBottomNavClick","screen","handleNotificationClick","viewComponents","overview","classDetail","studentProfile","examManagement","selectClassForAttendance","markAttendance","teacherSelfAttendance","library","gallery","calendar","addExam","createAssignment","assignmentsList","classAssignments","assignmentSubmissions","gradeSubmission","curriculumSelection","curriculum","gradeEntry","messages","newChat","communication","reportCardInput","collaborationForum","forumTopic","timetable","Object","assign","context","userType","userId","chat","currentUserId","reports","reportCardPreview","settings","dashboardProfile","refreshDashboardProfile","editTeacherProfile","onProfileUpdate","teacherNotificationSettings","teacherSecurity","teacherChangePassword","lessonPlanner","lessonPlanDetail","lessonContent","assignmentView","detailedLessonNote","notifications","selectTermForReport","professionalDevelopment","aiPerformanceSummary","educationalGames","aiGameCreator","gamePlayer","appointments","virtualClass","resources","cbtScores","cbtManagement","quizBuilder","onClose","classGradebook","lessonNotesUpload","currentNavigation","ComponentToRender","commonProps","refreshProfile","activeScreen","setActiveScreen","bgColor","Teacher","mainBg","onBack","undefined","onNotificationClick","onSearchClick","style","marginTop","fallback","dashboardType"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/teacher/TeacherDashboard.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, lazy, Suspense } from 'react';\r\nimport { DashboardType } from '../../types';\r\nimport { THEME_CONFIG } from '../../constants';\r\nimport Header from '../ui/Header';\r\nimport { TeacherBottomNav } from '../ui/DashboardBottomNav';\r\nimport { TeacherSidebar } from '../ui/DashboardSidebar';\r\nimport { mockNotifications } from '../../data';\r\nimport { useRealtimeNotifications } from '../../hooks/useRealtimeNotifications';\r\n\r\n// Lazy load only the Global Search Screen as it's an overlay\r\nconst GlobalSearchScreen = lazy(() => import('../shared/GlobalSearchScreen'));\r\n\r\n// Import all other view components directly to fix rendering issues\r\nimport TeacherOverview from '../teacher/TeacherOverview';\r\nimport ClassDetailScreen from '../teacher/ClassDetailScreen';\r\nimport StudentProfileScreen from '../teacher/StudentProfileScreen';\r\nimport TeacherExamManagement from '../teacher/TeacherExamManagement';\r\nimport LibraryScreen from '../shared/LibraryScreen';\r\nimport PhotoGalleryScreen from '../teacher/PhotoGalleryScreen';\r\nimport AddExamScreen from '../admin/AddExamScreen';\r\nimport CreateAssignmentScreen from '../teacher/CreateAssignmentScreen';\r\nimport TeacherAssignmentsListScreen from '../teacher/TeacherAssignmentsListScreen';\r\nimport ClassAssignmentsScreen from '../teacher/ClassAssignmentsScreen';\r\nimport AssignmentSubmissionsScreen from '../teacher/AssignmentSubmissionsScreen';\r\nimport GradeSubmissionScreen from '../teacher/GradeSubmissionScreen';\r\nimport CurriculumScreen from '../shared/CurriculumScreen';\r\nimport TeacherCurriculumSelectionScreen from '../teacher/TeacherCurriculumSelectionScreen';\r\nimport GradeEntryScreen from '../teacher/GradeEntryScreen';\r\nimport TeacherMessagesScreen from '../teacher/TeacherMessagesScreen';\r\nimport TeacherCommunicationScreen from '../teacher/TeacherCommunicationScreen';\r\nimport CalendarScreen from '../shared/CalendarScreen';\r\nimport ReportCardInputScreen from '../teacher/ReportCardInputScreen';\r\nimport CollaborationForumScreen from '../teacher/CollaborationForumScreen';\r\nimport ForumTopicScreen from '../teacher/ForumTopicScreen';\r\nimport TimetableScreen from '../shared/TimetableScreen';\r\nimport ChatScreen from '../shared/ChatScreen';\r\nimport TeacherReportsScreen from '../teacher/TeacherReportsScreen';\r\nimport TeacherSettingsScreen from '../teacher/TeacherSettingsScreen';\r\nimport EditTeacherProfileScreen from '../teacher/EditTeacherProfileScreen';\r\nimport TeacherNotificationSettingsScreen from '../teacher/TeacherNotificationSettingsScreen';\r\nimport TeacherSecurityScreen from '../teacher/TeacherSecurityScreen';\r\nimport TeacherChangePasswordScreen from '../teacher/TeacherChangePasswordScreen';\r\nimport NewChatScreen from '../teacher/NewChatScreen';\r\nimport TeacherReportCardPreviewScreen from '../teacher/TeacherReportCardPreviewScreen';\r\nimport NotificationsScreen from '../shared/NotificationsScreen';\r\nimport TeacherSelectClassForAttendance from '../teacher/TeacherUnifiedAttendanceScreen';\r\nimport TeacherMarkAttendanceScreen from '../teacher/TeacherAttendanceScreen';\r\nimport TeacherSelfAttendance from '../teacher/TeacherSelfAttendance';\r\nimport LessonPlannerScreen from '../teacher/LessonPlannerScreen';\r\nimport LessonPlanDetailScreen from '../teacher/LessonPlanDetailScreen';\r\nimport DetailedLessonNoteScreen from '../teacher/DetailedLessonNoteScreen';\r\nimport SelectTermForReportScreen from '../teacher/SelectTermForReportScreen';\r\nimport ProfessionalDevelopmentScreen from '../teacher/ProfessionalDevelopmentScreen';\r\nimport AIPerformanceSummaryScreen from '../teacher/AIPerformanceSummaryScreen';\r\nimport EducationalGamesScreen from '../teacher/EducationalGamesScreen';\r\nimport LessonContentScreen from '../teacher/LessonContentScreen';\r\nimport AssignmentViewScreen from '../teacher/AssignmentViewScreen';\r\nimport AIGameCreatorScreen from '../teacher/AIGameCreatorScreen';\r\nimport GamePlayerScreen from '../shared/GamePlayerScreen';\r\nimport TeacherAppointmentsScreen from '../teacher/TeacherAppointmentsScreen';\r\nimport VirtualClassScreen from '../teacher/VirtualClassScreen';\r\nimport TeacherResourcesScreen from '../teacher/TeacherResourcesScreen';\r\nimport CBTManagementScreen from '../teacher/CBTManagementScreen';\r\nimport CBTScoresScreen from '../teacher/CBTScoresScreen';\r\nimport QuizBuilderScreen from '../teacher/QuizBuilderScreen';\r\nimport ClassGradebookScreen from '../teacher/ClassGradebookScreen';\r\nimport LessonNotesUploadScreen from '../teacher/LessonNotesUploadScreen';\r\n\r\n\r\nconst DashboardSuspenseFallback = () => (\r\n  <div className=\"flex justify-center items-center h-full p-8 pt-20\">\r\n    <div className=\"w-10 h-10 border-4 border-t-4 border-gray-200 border-t-purple-600 rounded-full animate-spin\"></div>\r\n  </div>\r\n);\r\n\r\ninterface ViewStackItem {\r\n  view: string;\r\n  props?: any;\r\n  title: string;\r\n}\r\n\r\ninterface TeacherDashboardProps {\r\n  onLogout: () => void;\r\n  setIsHomePage: (isHome: boolean) => void;\r\n  currentUser?: any;\r\n}\r\n\r\n\r\nimport { supabase } from '../../lib/supabase';\r\n\r\n// ... (imports remain)\r\n\r\nconst TeacherDashboard: React.FC<TeacherDashboardProps> = ({ onLogout, setIsHomePage, currentUser }) => {\r\n  const [viewStack, setViewStack] = useState<ViewStackItem[]>([{ view: 'overview', title: 'Teacher Dashboard', props: {} }]);\r\n  const [activeBottomNav, setActiveBottomNav] = useState('home');\r\n  const [version, setVersion] = useState(0);\r\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\r\n  const [teacherId, setTeacherId] = useState<number | null>(null);\r\n\r\n  // Profile State\r\n  const [teacherProfile, setTeacherProfile] = useState({\r\n    name: 'Teacher',\r\n    avatarUrl: ''\r\n  });\r\n\r\n  const fetchProfile = async (optimisticData?: { name: string; avatarUrl: string }) => {\r\n    if (optimisticData) {\r\n      setTeacherProfile(optimisticData);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let query = supabase.from('teachers').select('id, name, avatar_url, email');\r\n\r\n      let emailToQuery = currentUser?.email;\r\n\r\n      if (!emailToQuery) {\r\n        // Fallback: Check active session if prop is missing\r\n        const { data: { user } } = await supabase.auth.getUser();\r\n        if (user?.email) {\r\n          emailToQuery = user.email;\r\n        }\r\n      }\r\n\r\n      if (emailToQuery) {\r\n        query = query.eq('email', emailToQuery);\r\n      } else {\r\n        // Ultimate Fallback (Demo Only) - Only if really no auth\r\n        console.warn(\"No auth user found, falling back to Demo Teacher (ID 2)\");\r\n        query = query.eq('id', 2);\r\n      }\r\n\r\n      const { data, error } = await query.maybeSingle();\r\n\r\n      if (error) {\r\n        console.error('Error fetching dashboard profile:', error);\r\n        return;\r\n      }\r\n\r\n      if (data) {\r\n        setTeacherId(data.id);\r\n        setTeacherProfile({\r\n          name: data.name || 'Teacher',\r\n          avatarUrl: data.avatar_url\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.error('Unexpected error fetching profile:', err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProfile();\r\n  }, [currentUser]);\r\n\r\n  const forceUpdate = () => setVersion(v => v + 1);\r\n\r\n  useEffect(() => {\r\n    const currentView = viewStack[viewStack.length - 1];\r\n    setIsHomePage(currentView.view === 'overview' && !isSearchOpen);\r\n  }, [viewStack, isSearchOpen, setIsHomePage]);\r\n\r\n  // Real-time notifications\r\n  const notificationCount = useRealtimeNotifications('teacher');\r\n\r\n  const navigateTo = (view: string, title: string, props: any = {}) => {\r\n    setViewStack(stack => [...stack, { view, props, title }]);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    if (viewStack.length > 1) {\r\n      setViewStack(stack => stack.slice(0, -1));\r\n    }\r\n  };\r\n\r\n  const handleBottomNavClick = (screen: string) => {\r\n    setActiveBottomNav(screen);\r\n    let props = {};\r\n    switch (screen) {\r\n      case 'home':\r\n        setViewStack([{ view: 'overview', title: 'Teacher Dashboard', props }]);\r\n        break;\r\n      case 'lessonNotes':\r\n        setViewStack([{ view: 'lessonNotesUpload', title: 'Lesson Notes', props: {} }]);\r\n        break;\r\n      case 'reports':\r\n        setViewStack([{ view: 'reports', title: 'Student Reports', props }]);\r\n        break;\r\n      case 'forum':\r\n        setViewStack([{ view: 'collaborationForum', title: 'Collaboration Forum', props: {} }]);\r\n        break;\r\n      case 'messages':\r\n        setViewStack([{ view: 'messages', title: 'Messages', props: {} }]);\r\n        break;\r\n      case 'settings':\r\n        setViewStack([{ view: 'settings', props, title: 'Settings' }]);\r\n        break;\r\n      default:\r\n        setViewStack([{ view: 'overview', title: 'Teacher Dashboard', props }]);\r\n    }\r\n  };\r\n\r\n  const handleNotificationClick = () => {\r\n    navigateTo('notifications', 'Notifications', {});\r\n  };\r\n\r\n  // Removed useMemo to ensure fresh props (especially teacherProfile) are always passed down\r\n  const viewComponents = {\r\n    overview: TeacherOverview,\r\n    classDetail: ClassDetailScreen,\r\n    studentProfile: StudentProfileScreen,\r\n    examManagement: TeacherExamManagement,\r\n    selectClassForAttendance: TeacherSelectClassForAttendance,\r\n    markAttendance: TeacherMarkAttendanceScreen,\r\n    teacherSelfAttendance: TeacherSelfAttendance,\r\n    library: LibraryScreen,\r\n    gallery: PhotoGalleryScreen,\r\n    calendar: CalendarScreen,\r\n    addExam: AddExamScreen,\r\n    createAssignment: CreateAssignmentScreen,\r\n    assignmentsList: TeacherAssignmentsListScreen,\r\n    classAssignments: ClassAssignmentsScreen,\r\n    assignmentSubmissions: AssignmentSubmissionsScreen,\r\n    gradeSubmission: GradeSubmissionScreen,\r\n    curriculumSelection: TeacherCurriculumSelectionScreen,\r\n    curriculum: CurriculumScreen,\r\n    gradeEntry: GradeEntryScreen,\r\n    messages: TeacherMessagesScreen,\r\n    newChat: NewChatScreen,\r\n    communication: TeacherCommunicationScreen,\r\n    reportCardInput: ReportCardInputScreen,\r\n    collaborationForum: CollaborationForumScreen,\r\n    forumTopic: ForumTopicScreen,\r\n    timetable: (props: any) => <TimetableScreen {...props} context={{ userType: 'teacher', userId: teacherId ?? 2 }} />,\r\n    chat: (props: any) => <ChatScreen {...props} currentUserId={teacherId ?? 2} />,\r\n    reports: TeacherReportsScreen,\r\n    reportCardPreview: TeacherReportCardPreviewScreen,\r\n    settings: (props: any) => <TeacherSettingsScreen {...props} dashboardProfile={teacherProfile} refreshDashboardProfile={fetchProfile} />,\r\n    editTeacherProfile: (props: any) => <EditTeacherProfileScreen {...props} onProfileUpdate={fetchProfile} />,\r\n    teacherNotificationSettings: TeacherNotificationSettingsScreen,\r\n    teacherSecurity: TeacherSecurityScreen,\r\n    teacherChangePassword: TeacherChangePasswordScreen,\r\n    lessonPlanner: LessonPlannerScreen,\r\n    lessonPlanDetail: LessonPlanDetailScreen,\r\n    lessonContent: LessonContentScreen,\r\n    assignmentView: AssignmentViewScreen,\r\n    detailedLessonNote: DetailedLessonNoteScreen,\r\n    notifications: (props: any) => <NotificationsScreen {...props} userType=\"teacher\" />,\r\n    selectTermForReport: SelectTermForReportScreen,\r\n    professionalDevelopment: ProfessionalDevelopmentScreen,\r\n    aiPerformanceSummary: AIPerformanceSummaryScreen,\r\n    educationalGames: EducationalGamesScreen,\r\n    aiGameCreator: AIGameCreatorScreen,\r\n    gamePlayer: GamePlayerScreen,\r\n    appointments: TeacherAppointmentsScreen,\r\n    virtualClass: VirtualClassScreen,\r\n    resources: TeacherResourcesScreen,\r\n    cbtScores: CBTScoresScreen,\r\n    cbtManagement: CBTManagementScreen,\r\n    quizBuilder: (props: any) => <QuizBuilderScreen {...props} teacherId={teacherId ?? 2} onClose={handleBack} />,\r\n    classGradebook: (props: any) => <ClassGradebookScreen {...props} teacherId={teacherId ?? 2} handleBack={handleBack} />,\r\n    lessonNotesUpload: (props: any) => <LessonNotesUploadScreen {...props} teacherId={teacherId ?? 2} handleBack={handleBack} />,\r\n  };\r\n\r\n  const currentNavigation = viewStack[viewStack.length - 1];\r\n  const ComponentToRender = viewComponents[currentNavigation.view as keyof typeof viewComponents];\r\n\r\n  // Pass teacherId to children via props or context. Usually props here.\r\n  // We need to inject teacherId into all components that need it.\r\n\r\n  const commonProps = {\r\n    navigateTo,\r\n    handleBack,\r\n    onLogout,\r\n    forceUpdate,\r\n    teacherProfile, // Make profile available to all screens\r\n    refreshProfile: fetchProfile, // Allow any screen to trigger refresh\r\n    teacherId, // Pass the dynamic teacher ID\r\n    currentUser\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen w-full overflow-hidden bg-gray-100\">\r\n      {/* Desktop Sidebar - Hidden on mobile, fixed on desktop */}\r\n      <div className=\"hidden md:flex w-64 flex-col fixed inset-y-0 left-0 z-50\">\r\n        <TeacherSidebar\r\n          activeScreen={activeBottomNav}\r\n          setActiveScreen={handleBottomNavClick}\r\n          onLogout={onLogout}\r\n        />\r\n      </div>\r\n\r\n      {/* Main Content Area */}\r\n      <div className=\"flex-1 flex flex-col h-screen w-full md:ml-64 overflow-hidden\">\r\n        <Header\r\n          title={currentNavigation.title}\r\n          avatarUrl={teacherProfile.avatarUrl}\r\n          bgColor={THEME_CONFIG[DashboardType.Teacher].mainBg}\r\n          onLogout={onLogout}\r\n          onBack={viewStack.length > 1 ? handleBack : undefined}\r\n          onNotificationClick={handleNotificationClick}\r\n          notificationCount={notificationCount}\r\n          onSearchClick={() => setIsSearchOpen(true)}\r\n        />\r\n        <div className=\"flex-1 overflow-y-auto\" style={{ marginTop: '-5rem' }}>\r\n          <main className=\"min-h-full pt-20 pb-20 md:pb-6\">\r\n            <div key={`${viewStack.length}-${version}`} className=\"animate-slide-in-up\">\r\n              {ComponentToRender ? (\r\n                <ComponentToRender {...currentNavigation.props} {...commonProps} />\r\n              ) : (\r\n                <div className=\"p-6\">View not found: {currentNavigation.view}</div>\r\n              )}\r\n            </div>\r\n          </main>\r\n        </div>\r\n        {/* Mobile Bottom Nav - Hidden on desktop */}\r\n        <div className=\"md:hidden\">\r\n          <TeacherBottomNav activeScreen={activeBottomNav} setActiveScreen={handleBottomNavClick} />\r\n        </div>\r\n        <Suspense fallback={<DashboardSuspenseFallback />}>\r\n          {isSearchOpen && (\r\n            <GlobalSearchScreen\r\n              dashboardType={DashboardType.Teacher}\r\n              navigateTo={navigateTo}\r\n              onClose={() => setIsSearchOpen(false)}\r\n            />\r\n          )}\r\n        </Suspense>\r\n      </div>\r\n    </div >\r\n  );\r\n};\r\n\r\nexport default TeacherDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}