{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\admin\\\\AttendanceHeatmap.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from '../../lib/supabase';\nimport { toast } from 'react-hot-toast';\nimport { Calendar, Download, TrendingUp, TrendingDown } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AttendanceHeatmap = () => {\n  const [heatmapData, setHeatmapData] = useState([]);\n  const [classes, setClasses] = useState([]);\n  const [selectedClass, setSelectedClass] = useState('all');\n  const [viewMode, setViewMode] = useState('monthly');\n  const [dateRange, setDateRange] = useState({\n    start: new Date(new Date().setDate(new Date().getDate() - 30)).toISOString().split('T')[0],\n    end: new Date().toISOString().split('T')[0]\n  });\n  const [loading, setLoading] = useState(true);\n  const [stats, setStats] = useState({\n    averageAttendance: 0,\n    trend: 'stable',\n    trendPercentage: 0,\n    criticalDays: 0\n  });\n  useEffect(() => {\n    fetchClasses();\n    fetchHeatmapData();\n  }, [selectedClass, dateRange, viewMode]);\n  const fetchClasses = async () => {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('classes').select('id, class_name').order('class_name');\n      if (error) throw error;\n      setClasses(data || []);\n    } catch (error) {\n      console.error('Error fetching classes:', error);\n    }\n  };\n  const fetchHeatmapData = async () => {\n    try {\n      setLoading(true);\n      let query = supabase.from('attendance_heatmaps').select(`\n                    *,\n                    classes (class_name)\n                `).gte('date', dateRange.start).lte('date', dateRange.end).order('date', {\n        ascending: false\n      });\n      if (selectedClass !== 'all') {\n        query = query.eq('class_id', selectedClass);\n      }\n      const {\n        data,\n        error\n      } = await supabase.from('student_attendance').select(`\n                    date,\n                    status,\n                    students (\n                        class_id,\n                        classes (class_name)\n                    )\n                `).gte('date', dateRange.start).lte('date', dateRange.end);\n      if (error) throw error;\n      const processedData = processAttendanceData(data || []);\n      setHeatmapData(processedData);\n      calculateStats(processedData);\n    } catch (error) {\n      console.error('Error fetching heatmap data:', error);\n      toast.error('Failed to load attendance data');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const processAttendanceData = rawData => {\n    const dataByClassAndDate = {};\n    rawData.forEach(record => {\n      const classId = record.students?.class_id;\n      const className = record.students?.classes?.class_name || 'Unknown';\n      const date = record.date;\n      const key = `${classId}-${date}`;\n      if (!dataByClassAndDate[key]) {\n        dataByClassAndDate[key] = {\n          date,\n          class_id: classId,\n          class_name: className,\n          attendance_percentage: 0,\n          present_count: 0,\n          absent_count: 0,\n          late_count: 0,\n          total_students: 0,\n          absence_pattern: 'normal'\n        };\n      }\n      dataByClassAndDate[key].total_students++;\n      if (record.status === 'Present') {\n        dataByClassAndDate[key].present_count++;\n      } else if (record.status === 'Absent') {\n        dataByClassAndDate[key].absent_count++;\n      } else if (record.status === 'Late') {\n        dataByClassAndDate[key].late_count++;\n      }\n    });\n    return Object.values(dataByClassAndDate).map(item => {\n      const percentage = item.total_students > 0 ? (item.present_count + item.late_count) / item.total_students * 100 : 0;\n      return Object.assign({}, item, {\n        attendance_percentage: Math.round(percentage * 10) / 10,\n        absence_pattern: percentage < 70 ? 'critical' : percentage < 85 ? 'high' : 'normal'\n      });\n    });\n  };\n  const calculateStats = data => {\n    if (data.length === 0) {\n      setStats({\n        averageAttendance: 0,\n        trend: 'stable',\n        trendPercentage: 0,\n        criticalDays: 0\n      });\n      return;\n    }\n    const average = data.reduce((sum, item) => sum + item.attendance_percentage, 0) / data.length;\n    const criticalCount = data.filter(item => item.absence_pattern === 'critical').length;\n    const midpoint = Math.floor(data.length / 2);\n    const firstHalf = data.slice(midpoint).reduce((sum, item) => sum + item.attendance_percentage, 0) / Math.max(data.length - midpoint, 1);\n    const secondHalf = data.slice(0, midpoint).reduce((sum, item) => sum + item.attendance_percentage, 0) / Math.max(midpoint, 1);\n    const trendDiff = secondHalf - firstHalf;\n    const trend = trendDiff > 2 ? 'up' : trendDiff < -2 ? 'down' : 'stable';\n    setStats({\n      averageAttendance: Math.round(average * 10) / 10,\n      trend,\n      trendPercentage: Math.abs(Math.round(trendDiff * 10) / 10),\n      criticalDays: criticalCount\n    });\n  };\n  const getColorForPercentage = percentage => {\n    if (percentage >= 95) return 'bg-green-600';\n    if (percentage >= 90) return 'bg-green-500';\n    if (percentage >= 85) return 'bg-green-400';\n    if (percentage >= 80) return 'bg-yellow-400';\n    if (percentage >= 75) return 'bg-orange-400';\n    if (percentage >= 70) return 'bg-orange-500';\n    return 'bg-red-500';\n  };\n  const exportToCSV = () => {\n    const headers = ['Date', 'Class', 'Total Students', 'Present', 'Absent', 'Late', 'Attendance %', 'Status'];\n    const rows = heatmapData.map(item => [item.date, item.class_name, item.total_students, item.present_count, item.absent_count, item.late_count, item.attendance_percentage + '%', item.absence_pattern]);\n    const csvContent = [headers, ...rows].map(row => row.join(',')).join('\\n');\n    const blob = new Blob([csvContent], {\n      type: 'text/csv'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `attendance-heatmap-${dateRange.start}-to-${dateRange.end}.csv`;\n    a.click();\n    toast.success('Report exported successfully!');\n  };\n  const groupByWeek = data => {\n    const weeks = {};\n    data.forEach(item => {\n      const date = new Date(item.date);\n      const weekStart = new Date(date);\n      weekStart.setDate(date.getDate() - date.getDay());\n      const weekKey = weekStart.toISOString().split('T')[0];\n      if (!weeks[weekKey]) weeks[weekKey] = [];\n      weeks[weekKey].push(item);\n    });\n    return weeks;\n  };\n  const renderHeatmap = () => {\n    if (loading) {\n      return _jsxDEV(\"div\", {\n        className: \"flex justify-center py-12\",\n        children: _jsxDEV(\"div\", {\n          className: \"w-10 h-10 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 63\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 20\n      }, this);\n    }\n    if (heatmapData.length === 0) {\n      return _jsxDEV(\"div\", {\n        className: \"text-center py-12 text-gray-500\",\n        children: \"No attendance data for selected period\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 20\n      }, this);\n    }\n    const uniqueDates = [...new Set(heatmapData.map(item => item.date))].sort().reverse();\n    return _jsxDEV(\"div\", {\n      className: \"overflow-x-auto\",\n      children: _jsxDEV(\"table\", {\n        className: \"min-w-full border-collapse\",\n        children: [_jsxDEV(\"thead\", {\n          children: _jsxDEV(\"tr\", {\n            children: [_jsxDEV(\"th\", {\n              className: \"border border-gray-300 p-2 bg-gray-100 sticky left-0 z-10\",\n              children: \"Class\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 29\n            }, this), uniqueDates.map(date => _jsxDEV(\"th\", {\n              className: \"border border-gray-300 p-2 bg-gray-100 text-xs\",\n              children: new Date(date).toLocaleDateString('en-GB', {\n                day: '2-digit',\n                month: 'short'\n              })\n            }, date, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 33\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 21\n        }, this), _jsxDEV(\"tbody\", {\n          children: classes.map(cls => _jsxDEV(\"tr\", {\n            children: [_jsxDEV(\"td\", {\n              className: \"border border-gray-300 p-2 font-semibold sticky left-0 bg-white z-10\",\n              children: cls.class_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 33\n            }, this), uniqueDates.map(date => {\n              const cellData = heatmapData.find(item => item.class_id === cls.id && item.date === date);\n              return _jsxDEV(\"td\", {\n                className: `border border-gray-300 p-4 text-center cursor-pointer hover:opacity-80 transition-opacity ${cellData ? getColorForPercentage(cellData.attendance_percentage) : 'bg-gray-200'}`,\n                title: cellData ? `${cellData.attendance_percentage}% (${cellData.present_count}/${cellData.total_students})` : 'No data',\n                children: cellData && _jsxDEV(\"span\", {\n                  className: \"text-white font-bold text-xs\",\n                  children: [cellData.attendance_percentage, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 49\n                }, this)\n              }, date, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 41\n              }, this);\n            })]\n          }, cls.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 13\n    }, this);\n  };\n  return _jsxDEV(\"div\", {\n    className: \"p-6 max-w-full mx-auto\",\n    children: [_jsxDEV(\"div\", {\n      className: \"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl p-6 text-white mb-6\",\n      children: [_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold mb-2\",\n        children: \"\\uD83D\\uDCCA Attendance Heatmap\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }, this), _jsxDEV(\"p\", {\n        className: \"text-indigo-100\",\n        children: \"Visual attendance patterns across classes and time periods\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\",\n      children: [_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm p-6\",\n        children: _jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [_jsxDEV(\"div\", {\n            children: [_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Average Attendance\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 29\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-3xl font-bold text-gray-900\",\n              children: [stats.averageAttendance, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: \"p-3 bg-green-100 rounded-lg\",\n            children: _jsxDEV(Calendar, {\n              className: \"h-8 w-8 text-green-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm p-6\",\n        children: _jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [_jsxDEV(\"div\", {\n            children: [_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Trend\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 29\n            }, this), _jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [_jsxDEV(\"p\", {\n                className: \"text-3xl font-bold text-gray-900\",\n                children: [stats.trendPercentage, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 33\n              }, this), stats.trend === 'up' ? _jsxDEV(TrendingUp, {\n                className: \"h-6 w-6 text-green-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 37\n              }, this) : stats.trend === 'down' ? _jsxDEV(TrendingDown, {\n                className: \"h-6 w-6 text-red-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 37\n              }, this) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: `p-3 rounded-lg ${stats.trend === 'up' ? 'bg-green-100' : stats.trend === 'down' ? 'bg-red-100' : 'bg-gray-100'}`,\n            children: _jsxDEV(\"span\", {\n              className: \"text-2xl\",\n              children: stats.trend === 'up' ? 'ğŸ“ˆ' : stats.trend === 'down' ? 'ğŸ“‰' : 'â¡ï¸'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm p-6\",\n        children: _jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [_jsxDEV(\"div\", {\n            children: [_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Critical Days\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 29\n            }, this), _jsxDEV(\"p\", {\n              className: \"text-3xl font-bold text-red-600\",\n              children: stats.criticalDays\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: \"p-3 bg-red-100 rounded-lg\",\n            children: _jsxDEV(\"span\", {\n              className: \"text-3xl\",\n              children: \"\\u26A0\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-sm p-6 mb-6\",\n      children: _jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-4\",\n        children: [_jsxDEV(\"div\", {\n          children: [_jsxDEV(\"label\", {\n            className: \"block text-sm font-semibold text-gray-700 mb-2\",\n            children: \"Class\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 25\n          }, this), _jsxDEV(\"select\", {\n            value: selectedClass,\n            onChange: e => setSelectedClass(e.target.value === 'all' ? 'all' : Number(e.target.value)),\n            className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500\",\n            children: [_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Classes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 29\n            }, this), classes.map(cls => _jsxDEV(\"option\", {\n              value: cls.id,\n              children: cls.class_name\n            }, cls.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 33\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          children: [_jsxDEV(\"label\", {\n            className: \"block text-sm font-semibold text-gray-700 mb-2\",\n            children: \"Start Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 25\n          }, this), _jsxDEV(\"input\", {\n            type: \"date\",\n            value: dateRange.start,\n            onChange: e => setDateRange(Object.assign({}, dateRange, {\n              start: e.target.value\n            })),\n            max: dateRange.end,\n            className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          children: [_jsxDEV(\"label\", {\n            className: \"block text-sm font-semibold text-gray-700 mb-2\",\n            children: \"End Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 25\n          }, this), _jsxDEV(\"input\", {\n            type: \"date\",\n            value: dateRange.end,\n            onChange: e => setDateRange(Object.assign({}, dateRange, {\n              end: e.target.value\n            })),\n            min: dateRange.start,\n            max: new Date().toISOString().split('T')[0],\n            className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"flex items-end\",\n          children: _jsxDEV(\"button\", {\n            onClick: exportToCSV,\n            className: \"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold flex items-center justify-center space-x-2\",\n            children: [_jsxDEV(Download, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 29\n            }, this), _jsxDEV(\"span\", {\n              children: \"Export CSV\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-sm p-4 mb-6\",\n      children: [_jsxDEV(\"h3\", {\n        className: \"font-semibold text-gray-900 mb-3\",\n        children: \"Attendance Rate Legend:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 17\n      }, this), _jsxDEV(\"div\", {\n        className: \"flex flex-wrap gap-3\",\n        children: [_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [_jsxDEV(\"div\", {\n            className: \"w-6 h-6 bg-green-600 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 25\n          }, this), _jsxDEV(\"span\", {\n            className: \"text-sm text-gray-700\",\n            children: \"95-100%\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [_jsxDEV(\"div\", {\n            className: \"w-6 h-6 bg-green-500 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 25\n          }, this), _jsxDEV(\"span\", {\n            className: \"text-sm text-gray-700\",\n            children: \"90-94%\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [_jsxDEV(\"div\", {\n            className: \"w-6 h-6 bg-green-400 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 25\n          }, this), _jsxDEV(\"span\", {\n            className: \"text-sm text-gray-700\",\n            children: \"85-89%\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [_jsxDEV(\"div\", {\n            className: \"w-6 h-6 bg-yellow-400 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 25\n          }, this), _jsxDEV(\"span\", {\n            className: \"text-sm text-gray-700\",\n            children: \"80-84%\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [_jsxDEV(\"div\", {\n            className: \"w-6 h-6 bg-orange-400 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 25\n          }, this), _jsxDEV(\"span\", {\n            className: \"text-sm text-gray-700\",\n            children: \"75-79%\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [_jsxDEV(\"div\", {\n            className: \"w-6 h-6 bg-orange-500 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 25\n          }, this), _jsxDEV(\"span\", {\n            className: \"text-sm text-gray-700\",\n            children: \"70-74%\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [_jsxDEV(\"div\", {\n            className: \"w-6 h-6 bg-red-500 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 25\n          }, this), _jsxDEV(\"span\", {\n            className: \"text-sm text-gray-700\",\n            children: \"Below 70%\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-sm p-6\",\n      children: renderHeatmap()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 282,\n    columnNumber: 9\n  }, this);\n};\nexport default AttendanceHeatmap;","map":{"version":3,"names":["React","useState","useEffect","supabase","toast","Calendar","Download","TrendingUp","TrendingDown","jsxDEV","_jsxDEV","AttendanceHeatmap","heatmapData","setHeatmapData","classes","setClasses","selectedClass","setSelectedClass","viewMode","setViewMode","dateRange","setDateRange","start","Date","setDate","getDate","toISOString","split","end","loading","setLoading","stats","setStats","averageAttendance","trend","trendPercentage","criticalDays","fetchClasses","fetchHeatmapData","data","error","from","select","order","console","query","gte","lte","ascending","eq","processedData","processAttendanceData","calculateStats","rawData","dataByClassAndDate","forEach","record","classId","students","class_id","className","class_name","date","key","attendance_percentage","present_count","absent_count","late_count","total_students","absence_pattern","status","Object","values","map","item","percentage","assign","Math","round","length","average","reduce","sum","criticalCount","filter","midpoint","floor","firstHalf","slice","max","secondHalf","trendDiff","abs","getColorForPercentage","exportToCSV","headers","rows","csvContent","row","join","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","click","success","groupByWeek","weeks","weekStart","getDay","weekKey","push","renderHeatmap","children","fileName","_jsxFileName","lineNumber","columnNumber","uniqueDates","Set","sort","reverse","toLocaleDateString","day","month","cls","cellData","find","id","title","value","onChange","e","target","Number","min","onClick"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/admin/AttendanceHeatmap.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { toast } from 'react-hot-toast';\r\nimport { Calendar, Download, Filter, TrendingUp, TrendingDown } from 'lucide-react';\r\n\r\ninterface HeatmapData {\r\n    date: string;\r\n    class_id: number;\r\n    class_name: string;\r\n    attendance_percentage: number;\r\n    present_count: number;\r\n    absent_count: number;\r\n    late_count: number;\r\n    total_students: number;\r\n    absence_pattern: string;\r\n}\r\n\r\ninterface Class {\r\n    id: number;\r\n    class_name: string;\r\n}\r\n\r\nconst AttendanceHeatmap: React.FC = () => {\r\n    const [heatmapData, setHeatmapData] = useState<HeatmapData[]>([]);\r\n    const [classes, setClasses] = useState<Class[]>([]);\r\n    const [selectedClass, setSelectedClass] = useState<number | 'all'>('all');\r\n    const [viewMode, setViewMode] = useState<'daily' | 'weekly' | 'monthly'>('monthly');\r\n    const [dateRange, setDateRange] = useState({\r\n        start: new Date(new Date().setDate(new Date().getDate() - 30)).toISOString().split('T')[0],\r\n        end: new Date().toISOString().split('T')[0]\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n    const [stats, setStats] = useState({\r\n        averageAttendance: 0,\r\n        trend: 'stable' as 'up' | 'down' | 'stable',\r\n        trendPercentage: 0,\r\n        criticalDays: 0\r\n    });\r\n\r\n    useEffect(() => {\r\n        fetchClasses();\r\n        fetchHeatmapData();\r\n    }, [selectedClass, dateRange, viewMode]);\r\n\r\n    const fetchClasses = async () => {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('classes')\r\n                .select('id, class_name')\r\n                .order('class_name');\r\n\r\n            if (error) throw error;\r\n            setClasses(data || []);\r\n        } catch (error: any) {\r\n            console.error('Error fetching classes:', error);\r\n        }\r\n    };\r\n\r\n    const fetchHeatmapData = async () => {\r\n        try {\r\n            setLoading(true);\r\n\r\n            let query = supabase\r\n                .from('attendance_heatmaps')\r\n                .select(`\r\n                    *,\r\n                    classes (class_name)\r\n                `)\r\n                .gte('date', dateRange.start)\r\n                .lte('date', dateRange.end)\r\n                .order('date', { ascending: false });\r\n\r\n            if (selectedClass !== 'all') {\r\n                query = query.eq('class_id', selectedClass);\r\n            }\r\n\r\n            const { data, error } = await supabase\r\n                .from('student_attendance')\r\n                .select(`\r\n                    date,\r\n                    status,\r\n                    students (\r\n                        class_id,\r\n                        classes (class_name)\r\n                    )\r\n                `)\r\n                .gte('date', dateRange.start)\r\n                .lte('date', dateRange.end);\r\n\r\n            if (error) throw error;\r\n\r\n            // Process data to create heatmap\r\n            const processedData = processAttendanceData(data || []);\r\n            setHeatmapData(processedData);\r\n            calculateStats(processedData);\r\n\r\n        } catch (error: any) {\r\n            console.error('Error fetching heatmap data:', error);\r\n            toast.error('Failed to load attendance data');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const processAttendanceData = (rawData: any[]): HeatmapData[] => {\r\n        const dataByClassAndDate: { [key: string]: HeatmapData } = {};\r\n\r\n        rawData.forEach(record => {\r\n            const classId = record.students?.class_id;\r\n            const className = record.students?.classes?.class_name || 'Unknown';\r\n            const date = record.date;\r\n            const key = `${classId}-${date}`;\r\n\r\n            if (!dataByClassAndDate[key]) {\r\n                dataByClassAndDate[key] = {\r\n                    date,\r\n                    class_id: classId,\r\n                    class_name: className,\r\n                    attendance_percentage: 0,\r\n                    present_count: 0,\r\n                    absent_count: 0,\r\n                    late_count: 0,\r\n                    total_students: 0,\r\n                    absence_pattern: 'normal'\r\n                };\r\n            }\r\n\r\n            dataByClassAndDate[key].total_students++;\r\n\r\n            if (record.status === 'Present') {\r\n                dataByClassAndDate[key].present_count++;\r\n            } else if (record.status === 'Absent') {\r\n                dataByClassAndDate[key].absent_count++;\r\n            } else if (record.status === 'Late') {\r\n                dataByClassAndDate[key].late_count++;\r\n            }\r\n        });\r\n\r\n        // Calculate percentages and patterns\r\n        return Object.values(dataByClassAndDate).map(item => {\r\n            const percentage = item.total_students > 0\r\n                ? ((item.present_count + item.late_count) / item.total_students) * 100\r\n                : 0;\r\n\r\n            return {\r\n                ...item,\r\n                attendance_percentage: Math.round(percentage * 10) / 10,\r\n                absence_pattern: percentage < 70 ? 'critical' : percentage < 85 ? 'high' : 'normal'\r\n            };\r\n        });\r\n    };\r\n\r\n    const calculateStats = (data: HeatmapData[]) => {\r\n        if (data.length === 0) {\r\n            setStats({ averageAttendance: 0, trend: 'stable', trendPercentage: 0, criticalDays: 0 });\r\n            return;\r\n        }\r\n\r\n        const average = data.reduce((sum, item) => sum + item.attendance_percentage, 0) / data.length;\r\n        const criticalCount = data.filter(item => item.absence_pattern === 'critical').length;\r\n\r\n        // Calculate trend (compare first half vs second half)\r\n        const midpoint = Math.floor(data.length / 2);\r\n        const firstHalf = data.slice(midpoint).reduce((sum, item) => sum + item.attendance_percentage, 0) / Math.max(data.length - midpoint, 1);\r\n        const secondHalf = data.slice(0, midpoint).reduce((sum, item) => sum + item.attendance_percentage, 0) / Math.max(midpoint, 1);\r\n\r\n        const trendDiff = secondHalf - firstHalf;\r\n        const trend = trendDiff > 2 ? 'up' : trendDiff < -2 ? 'down' : 'stable';\r\n\r\n        setStats({\r\n            averageAttendance: Math.round(average * 10) / 10,\r\n            trend,\r\n            trendPercentage: Math.abs(Math.round(trendDiff * 10) / 10),\r\n            criticalDays: criticalCount\r\n        });\r\n    };\r\n\r\n    const getColorForPercentage = (percentage: number): string => {\r\n        if (percentage >= 95) return 'bg-green-600';\r\n        if (percentage >= 90) return 'bg-green-500';\r\n        if (percentage >= 85) return 'bg-green-400';\r\n        if (percentage >= 80) return 'bg-yellow-400';\r\n        if (percentage >= 75) return 'bg-orange-400';\r\n        if (percentage >= 70) return 'bg-orange-500';\r\n        return 'bg-red-500';\r\n    };\r\n\r\n    const exportToCSV = () => {\r\n        const headers = ['Date', 'Class', 'Total Students', 'Present', 'Absent', 'Late', 'Attendance %', 'Status'];\r\n        const rows = heatmapData.map(item => [\r\n            item.date,\r\n            item.class_name,\r\n            item.total_students,\r\n            item.present_count,\r\n            item.absent_count,\r\n            item.late_count,\r\n            item.attendance_percentage + '%',\r\n            item.absence_pattern\r\n        ]);\r\n\r\n        const csvContent = [headers, ...rows].map(row => row.join(',')).join('\\n');\r\n        const blob = new Blob([csvContent], { type: 'text/csv' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `attendance-heatmap-${dateRange.start}-to-${dateRange.end}.csv`;\r\n        a.click();\r\n        toast.success('Report exported successfully!');\r\n    };\r\n\r\n    // Group data by week for weekly view\r\n    const groupByWeek = (data: HeatmapData[]) => {\r\n        const weeks: { [key: string]: HeatmapData[] } = {};\r\n        data.forEach(item => {\r\n            const date = new Date(item.date);\r\n            const weekStart = new Date(date);\r\n            weekStart.setDate(date.getDate() - date.getDay());\r\n            const weekKey = weekStart.toISOString().split('T')[0];\r\n            if (!weeks[weekKey]) weeks[weekKey] = [];\r\n            weeks[weekKey].push(item);\r\n        });\r\n        return weeks;\r\n    };\r\n\r\n    const renderHeatmap = () => {\r\n        if (loading) {\r\n            return <div className=\"flex justify-center py-12\"><div className=\"w-10 h-10 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin\"></div></div>;\r\n        }\r\n\r\n        if (heatmapData.length === 0) {\r\n            return <div className=\"text-center py-12 text-gray-500\">No attendance data for selected period</div>;\r\n        }\r\n\r\n        // Get unique dates\r\n        const uniqueDates = [...new Set(heatmapData.map(item => item.date))].sort().reverse();\r\n\r\n        return (\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full border-collapse\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th className=\"border border-gray-300 p-2 bg-gray-100 sticky left-0 z-10\">Class</th>\r\n                            {uniqueDates.map(date => (\r\n                                <th key={date} className=\"border border-gray-300 p-2 bg-gray-100 text-xs\">\r\n                                    {new Date(date).toLocaleDateString('en-GB', { day: '2-digit', month: 'short' })}\r\n                                </th>\r\n                            ))}\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {classes.map(cls => (\r\n                            <tr key={cls.id}>\r\n                                <td className=\"border border-gray-300 p-2 font-semibold sticky left-0 bg-white z-10\">\r\n                                    {cls.class_name}\r\n                                </td>\r\n                                {uniqueDates.map(date => {\r\n                                    const cellData = heatmapData.find(item => item.class_id === cls.id && item.date === date);\r\n                                    return (\r\n                                        <td\r\n                                            key={date}\r\n                                            className={`border border-gray-300 p-4 text-center cursor-pointer hover:opacity-80 transition-opacity ${cellData ? getColorForPercentage(cellData.attendance_percentage) : 'bg-gray-200'\r\n                                                }`}\r\n                                            title={cellData ? `${cellData.attendance_percentage}% (${cellData.present_count}/${cellData.total_students})` : 'No data'}\r\n                                        >\r\n                                            {cellData && (\r\n                                                <span className=\"text-white font-bold text-xs\">\r\n                                                    {cellData.attendance_percentage}%\r\n                                                </span>\r\n                                            )}\r\n                                        </td>\r\n                                    );\r\n                                })}\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6 max-w-full mx-auto\">\r\n            {/* Header */}\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl p-6 text-white mb-6\">\r\n                <h1 className=\"text-3xl font-bold mb-2\">ğŸ“Š Attendance Heatmap</h1>\r\n                <p className=\"text-indigo-100\">Visual attendance patterns across classes and time periods</p>\r\n            </div>\r\n\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n                <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-sm text-gray-600\">Average Attendance</p>\r\n                            <p className=\"text-3xl font-bold text-gray-900\">{stats.averageAttendance}%</p>\r\n                        </div>\r\n                        <div className=\"p-3 bg-green-100 rounded-lg\">\r\n                            <Calendar className=\"h-8 w-8 text-green-600\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-sm text-gray-600\">Trend</p>\r\n                            <div className=\"flex items-center space-x-2\">\r\n                                <p className=\"text-3xl font-bold text-gray-900\">{stats.trendPercentage}%</p>\r\n                                {stats.trend === 'up' ? (\r\n                                    <TrendingUp className=\"h-6 w-6 text-green-600\" />\r\n                                ) : stats.trend === 'down' ? (\r\n                                    <TrendingDown className=\"h-6 w-6 text-red-600\" />\r\n                                ) : null}\r\n                            </div>\r\n                        </div>\r\n                        <div className={`p-3 rounded-lg ${stats.trend === 'up' ? 'bg-green-100' : stats.trend === 'down' ? 'bg-red-100' : 'bg-gray-100'}`}>\r\n                            <span className=\"text-2xl\">{stats.trend === 'up' ? 'ğŸ“ˆ' : stats.trend === 'down' ? 'ğŸ“‰' : 'â¡ï¸'}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-sm text-gray-600\">Critical Days</p>\r\n                            <p className=\"text-3xl font-bold text-red-600\">{stats.criticalDays}</p>\r\n                        </div>\r\n                        <div className=\"p-3 bg-red-100 rounded-lg\">\r\n                            <span className=\"text-3xl\">âš ï¸</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"bg-white rounded-xl shadow-sm p-6 mb-6\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                    <div>\r\n                        <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Class</label>\r\n                        <select\r\n                            value={selectedClass}\r\n                            onChange={(e) => setSelectedClass(e.target.value === 'all' ? 'all' : Number(e.target.value))}\r\n                            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n                        >\r\n                            <option value=\"all\">All Classes</option>\r\n                            {classes.map(cls => (\r\n                                <option key={cls.id} value={cls.id}>{cls.class_name}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Start Date</label>\r\n                        <input\r\n                            type=\"date\"\r\n                            value={dateRange.start}\r\n                            onChange={(e) => setDateRange({ ...dateRange, start: e.target.value })}\r\n                            max={dateRange.end}\r\n                            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-semibold text-gray-700 mb-2\">End Date</label>\r\n                        <input\r\n                            type=\"date\"\r\n                            value={dateRange.end}\r\n                            onChange={(e) => setDateRange({ ...dateRange, end: e.target.value })}\r\n                            min={dateRange.start}\r\n                            max={new Date().toISOString().split('T')[0]}\r\n                            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex items-end\">\r\n                        <button\r\n                            onClick={exportToCSV}\r\n                            className=\"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold flex items-center justify-center space-x-2\"\r\n                        >\r\n                            <Download className=\"h-5 w-5\" />\r\n                            <span>Export CSV</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Legend */}\r\n            <div className=\"bg-white rounded-xl shadow-sm p-4 mb-6\">\r\n                <h3 className=\"font-semibold text-gray-900 mb-3\">Attendance Rate Legend:</h3>\r\n                <div className=\"flex flex-wrap gap-3\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                        <div className=\"w-6 h-6 bg-green-600 rounded\"></div>\r\n                        <span className=\"text-sm text-gray-700\">95-100%</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                        <div className=\"w-6 h-6 bg-green-500 rounded\"></div>\r\n                        <span className=\"text-sm text-gray-700\">90-94%</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                        <div className=\"w-6 h-6 bg-green-400 rounded\"></div>\r\n                        <span className=\"text-sm text-gray-700\">85-89%</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                        <div className=\"w-6 h-6 bg-yellow-400 rounded\"></div>\r\n                        <span className=\"text-sm text-gray-700\">80-84%</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                        <div className=\"w-6 h-6 bg-orange-400 rounded\"></div>\r\n                        <span className=\"text-sm text-gray-700\">75-79%</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                        <div className=\"w-6 h-6 bg-orange-500 rounded\"></div>\r\n                        <span className=\"text-sm text-gray-700\">70-74%</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                        <div className=\"w-6 h-6 bg-red-500 rounded\"></div>\r\n                        <span className=\"text-sm text-gray-700\">Below 70%</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Heatmap */}\r\n            <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                {renderHeatmap()}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AttendanceHeatmap;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}