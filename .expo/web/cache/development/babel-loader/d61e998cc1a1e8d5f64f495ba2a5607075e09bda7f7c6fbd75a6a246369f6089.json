{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\Project\\\\school-app-\\\\components\\\\teacher\\\\ClassGradebookScreen.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { toast } from 'react-hot-toast';\nimport { SaveIcon, CalculatorIcon, CheckCircleIcon } from '../../constants';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getGrade = score => {\n  if (score >= 75) return 'A';\n  if (score >= 65) return 'B';\n  if (score >= 50) return 'C';\n  if (score >= 45) return 'D';\n  return 'F';\n};\nconst getRemark = (score, grade) => {\n  if (grade === 'A') return 'Excellent';\n  if (grade === 'B') return 'Very Good';\n  if (grade === 'C') return 'Good';\n  if (grade === 'D') return 'Fair';\n  return 'Needs Improvement';\n};\nconst ClassGradebookScreen = ({\n  teacherId,\n  handleBack\n}) => {\n  const [classes, setClasses] = useState([]);\n  const [selectedClass, setSelectedClass] = useState('');\n  const [selectedSubject, setSelectedSubject] = useState('');\n  const [students, setStudents] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  useEffect(() => {\n    const fetchClasses = async () => {\n      try {\n        const {\n          fetchTeacherById\n        } = await import('../../lib/database');\n        const teacher = await fetchTeacherById(teacherId);\n        if (teacher) {\n          const realClasses = (teacher.classes || []).flatMap(clsStr => (teacher.subjects || []).map(subj => {\n            const gradeMatch = clsStr.match(/\\d+/);\n            const grade = gradeMatch ? parseInt(gradeMatch[0]) : 0;\n            const section = clsStr.replace(/.*?\\d+/, '').trim() || 'A';\n            return {\n              id: clsStr,\n              grade: grade,\n              section: section,\n              subject: subj,\n              studentCount: 0\n            };\n          }));\n          setClasses(realClasses);\n          if (realClasses.length > 0) {\n            setSelectedClass(realClasses[0].id);\n            setSelectedSubject(realClasses[0].subject);\n          }\n        }\n      } catch (e) {\n        console.error(\"Error fetching teacher classes\", e);\n      }\n    };\n    fetchClasses();\n  }, [teacherId]);\n  useEffect(() => {\n    if (!selectedClass || !selectedSubject) return;\n    const loadData = async () => {\n      setLoading(true);\n      try {\n        const {\n          fetchStudentsByClass,\n          fetchReportCard\n        } = await import('../../lib/database');\n        const clsObj = classes.find(c => c.id === selectedClass);\n        if (!clsObj) {\n          setLoading(false);\n          return;\n        }\n        const grade = clsObj.grade;\n        const section = clsObj.section;\n        const studentData = await fetchStudentsByClass(grade, section);\n        if (studentData.length === 0) {\n          setStudents([]);\n          setLoading(false);\n          return;\n        }\n        const merged = [];\n        const currentSession = \"2023/2024\";\n        const currentTerm = \"First Term\";\n        for (const s of studentData) {\n          const rc = await fetchReportCard(s.id, currentTerm, currentSession);\n          const scoreRecord = rc?.academicRecords?.find(r => r.subject === selectedSubject);\n          const ca = scoreRecord?.ca || 0;\n          const exam = scoreRecord?.exam || 0;\n          const total = scoreRecord?.total || ca + exam;\n          merged.push({\n            studentId: s.id,\n            studentName: s.name,\n            avatarUrl: s.avatarUrl || '',\n            ca: ca === 0 ? '' : ca.toString(),\n            exam: exam === 0 ? '' : exam.toString(),\n            total: total,\n            grade: scoreRecord?.grade || getGrade(total),\n            grade: scoreRecord?.grade || getGrade(total),\n            remark: scoreRecord?.remark || getRemark(total, getGrade(total)),\n            status: rc?.status || 'Draft',\n            isDirty: false\n          });\n        }\n        setStudents(merged);\n      } catch (err) {\n        console.error(\"Error loading gradebook:\", err);\n        toast.error(\"Failed to load gradebook.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadData();\n  }, [selectedClass, selectedSubject, classes]);\n  const handleScoreChange = (index, field, value) => {\n    const newStudents = [...students];\n    const entry = Object.assign({}, newStudents[index]);\n    let numVal = parseInt(value, 10);\n    if (isNaN(numVal)) numVal = 0;\n    if (field === 'ca' && numVal > 40) return;\n    if (field === 'exam' && numVal > 60) return;\n    if (value === '' || !isNaN(parseInt(value))) {\n      entry[field] = value;\n      entry.isDirty = true;\n      const ca = parseInt(entry.ca || '0', 10);\n      const exam = parseInt(entry.exam || '0', 10);\n      entry.total = ca + exam;\n      entry.grade = getGrade(entry.total);\n      newStudents[index] = entry;\n      setStudents(newStudents);\n    }\n  };\n  const handleSave = async (status = 'Draft') => {\n    const dirtyEntries = students.filter(s => s.isDirty);\n    const entriesToSave = status === 'Published' ? students : dirtyEntries;\n    if (entriesToSave.length === 0) {\n      toast('No changes to save.');\n      return;\n    }\n    setSaving(true);\n    try {\n      const {\n        upsertReportCard\n      } = await import('../../lib/database');\n      const currentSession = \"2023/2024\";\n      const currentTerm = \"First Term\";\n      let successCount = 0;\n      for (const entry of entriesToSave) {\n        const {\n          fetchReportCard\n        } = await import('../../lib/database');\n        const existingRC = await fetchReportCard(entry.studentId, currentTerm, currentSession);\n        let academicRecords = existingRC?.academicRecords || [];\n        const recordIndex = academicRecords.findIndex(r => r.subject === selectedSubject);\n        const newRecord = {\n          subject: selectedSubject,\n          ca: parseInt(entry.ca || '0', 10),\n          exam: parseInt(entry.exam || '0', 10),\n          total: entry.total,\n          grade: entry.grade,\n          remark: entry.remark\n        };\n        if (recordIndex >= 0) {\n          academicRecords[recordIndex] = newRecord;\n        } else {\n          academicRecords.push(newRecord);\n        }\n        const finalStatus = status;\n        const reportCardToSave = {\n          term: currentTerm,\n          session: currentSession,\n          status: finalStatus,\n          attendance: existingRC?.attendance || {\n            total: 0,\n            present: 0,\n            absent: 0,\n            late: 0\n          },\n          skills: existingRC?.skills || {},\n          psychomotor: existingRC?.psychomotor || {},\n          teacherComment: existingRC?.teacherComment || '',\n          principalComment: existingRC?.principalComment || '',\n          academicRecords\n        };\n        await upsertReportCard(entry.studentId, reportCardToSave);\n        successCount++;\n      }\n      setStudents(students.map(s => Object.assign({}, s, {\n        isDirty: false\n      })));\n      if (status === 'Published') {\n        toast.success(`Published grades for ${successCount} students!`);\n      } else {\n        toast.success(`Saved draft for ${successCount} students.`);\n      }\n    } catch (error) {\n      console.error(\"Save error:\", error);\n      toast.error(\"Failed to save grades.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n  return _jsxDEV(\"div\", {\n    className: \"flex flex-col h-full bg-gray-50\",\n    children: [_jsxDEV(\"div\", {\n      className: \"px-3 sm:px-6 py-4 bg-white border-b border-gray-200 shadow-sm\",\n      children: _jsxDEV(\"div\", {\n        className: \"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3\",\n        children: [_jsxDEV(\"div\", {\n          children: [_jsxDEV(\"h2\", {\n            className: \"text-lg sm:text-xl font-bold text-gray-800\",\n            children: \"Class Gradebook\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 25\n          }, this), _jsxDEV(\"p\", {\n            className: \"text-xs sm:text-sm text-gray-500\",\n            children: \"Manage CA and Exam scores efficiently\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 21\n        }, this), _jsxDEV(\"div\", {\n          className: \"flex flex-col sm:flex-row gap-2 sm:space-x-3\",\n          children: [_jsxDEV(\"select\", {\n            value: selectedClass,\n            onChange: e => {\n              const cls = classes.find(c => c.id === e.target.value);\n              setSelectedClass(e.target.value);\n              if (cls) setSelectedSubject(cls.subject);\n            },\n            className: \"p-2 text-sm border border-gray-300 rounded-md bg-white text-gray-700 font-medium focus:ring-2 focus:ring-purple-500\",\n            children: classes.map(c => _jsxDEV(\"option\", {\n              value: c.id,\n              children: [c.id, \" - \", c.subject]\n            }, c.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 47\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [_jsxDEV(\"button\", {\n              onClick: () => handleSave('Draft'),\n              disabled: saving,\n              className: \"flex-1 sm:flex-none flex items-center justify-center px-3 sm:px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 transition-colors shadow-sm text-sm font-semibold\",\n              children: [saving ? _jsxDEV(\"div\", {\n                className: \"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 43\n              }, this) : _jsxDEV(SaveIcon, {\n                className: \"w-4 h-4 sm:w-5 sm:h-5 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 151\n              }, this), _jsxDEV(\"span\", {\n                className: \"hidden sm:inline\",\n                children: \"Save Draft\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 33\n              }, this), _jsxDEV(\"span\", {\n                className: \"sm:hidden\",\n                children: \"Save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 29\n            }, this), _jsxDEV(\"button\", {\n              onClick: () => handleSave('Published'),\n              disabled: saving,\n              className: \"flex-1 sm:flex-none flex items-center justify-center px-3 sm:px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-colors shadow-sm text-sm font-semibold\",\n              children: [_jsxDEV(CheckCircleIcon, {\n                className: \"w-4 h-4 sm:w-5 sm:h-5 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 33\n              }, this), _jsxDEV(\"span\", {\n                className: \"hidden sm:inline\",\n                children: \"Publish\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 33\n              }, this), _jsxDEV(\"span\", {\n                className: \"sm:hidden\",\n                children: \"Pub\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 29\n            }, this), _jsxDEV(\"button\", {\n              onClick: handleBack,\n              className: \"px-3 sm:px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 text-sm font-medium\",\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 13\n    }, this), _jsxDEV(\"div\", {\n      className: \"flex-grow overflow-auto p-3 sm:p-6\",\n      children: [loading ? _jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl p-10 text-center text-gray-500\",\n        children: \"Loading students...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 21\n      }, this) : students.length === 0 ? _jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl p-10 text-center text-gray-500\",\n        children: \"No students found in this class.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 21\n      }, this) : _jsxDEV(_Fragment, {\n        children: [_jsxDEV(\"div\", {\n          className: \"hidden lg:block bg-white rounded-xl shadow border border-gray-200 overflow-hidden\",\n          children: _jsxDEV(\"table\", {\n            className: \"min-w-full divide-y divide-gray-200\",\n            children: [_jsxDEV(\"thead\", {\n              className: \"bg-gray-50\",\n              children: _jsxDEV(\"tr\", {\n                children: [_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  className: \"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\",\n                  children: \"Student\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 41\n                }, this), _jsxDEV(\"th\", {\n                  scope: \"col\",\n                  className: \"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-32\",\n                  children: \"CA (40)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 41\n                }, this), _jsxDEV(\"th\", {\n                  scope: \"col\",\n                  className: \"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-32\",\n                  children: \"Exam (60)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 41\n                }, this), _jsxDEV(\"th\", {\n                  scope: \"col\",\n                  className: \"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24\",\n                  children: \"Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 41\n                }, this), _jsxDEV(\"th\", {\n                  scope: \"col\",\n                  className: \"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-20\",\n                  children: \"Grade\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 369,\n                  columnNumber: 41\n                }, this), _jsxDEV(\"th\", {\n                  scope: \"col\",\n                  className: \"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24\",\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 41\n                }, this), _jsxDEV(\"th\", {\n                  scope: \"col\",\n                  className: \"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\",\n                  children: \"Remark\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 33\n            }, this), _jsxDEV(\"tbody\", {\n              className: \"bg-white divide-y divide-gray-200\",\n              children: students.map((student, idx) => _jsxDEV(\"tr\", {\n                className: student.isDirty ? 'bg-yellow-50' : 'hover:bg-gray-50',\n                children: [_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap\",\n                  children: _jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [_jsxDEV(\"div\", {\n                      className: \"flex-shrink-0 h-10 w-10\",\n                      children: student.avatarUrl ? _jsxDEV(\"img\", {\n                        className: \"h-10 w-10 rounded-full object-cover border border-gray-200\",\n                        src: student.avatarUrl,\n                        alt: \"\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 381,\n                        columnNumber: 61\n                      }, this) : _jsxDEV(\"div\", {\n                        className: \"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 font-bold text-lg\",\n                        children: student.studentName.charAt(0)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 383,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 379,\n                      columnNumber: 53\n                    }, this), _jsxDEV(\"div\", {\n                      className: \"ml-4\",\n                      children: [_jsxDEV(\"div\", {\n                        className: \"text-sm font-bold text-gray-900\",\n                        children: student.studentName\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 389,\n                        columnNumber: 57\n                      }, this), _jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500\",\n                        children: [\"ID: \", student.studentId]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 390,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 388,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 378,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-center\",\n                  children: _jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: student.ca,\n                    onChange: e => handleScoreChange(idx, 'ca', e.target.value),\n                    className: \"w-20 text-center border border-gray-300 rounded-md py-1 focus:ring-purple-500 focus:border-purple-500\",\n                    placeholder: \"0\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 395,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-center\",\n                  children: _jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: student.exam,\n                    onChange: e => handleScoreChange(idx, 'exam', e.target.value),\n                    className: \"w-20 text-center border border-gray-300 rounded-md py-1 focus:ring-purple-500 focus:border-purple-500\",\n                    placeholder: \"0\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 404,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 403,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-center\",\n                  children: _jsxDEV(\"span\", {\n                    className: `px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${student.total >= 50 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`,\n                    children: student.total\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 413,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-gray-900\",\n                  children: student.grade\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-center\",\n                  children: _jsxDEV(\"span\", {\n                    className: `px-2 py-1 text-xs font-semibold rounded-full ${student.status === 'Published' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-600'}`,\n                    children: student.status === 'Published' ? 'Published' : 'Draft'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 421,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",\n                  children: student.remark\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 425,\n                  columnNumber: 45\n                }, this)]\n              }, student.studentId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 25\n        }, this), _jsxDEV(\"div\", {\n          className: \"lg:hidden space-y-3\",\n          children: students.map((student, idx) => _jsxDEV(\"div\", {\n            className: `bg-white rounded-xl shadow-sm border border-gray-200 p-4 ${student.isDirty ? 'bg-yellow-50 border-yellow-300' : ''}`,\n            children: [_jsxDEV(\"div\", {\n              className: \"flex items-center mb-3 pb-3 border-b border-gray-100\",\n              children: [_jsxDEV(\"div\", {\n                className: \"flex-shrink-0 h-12 w-12\",\n                children: student.avatarUrl ? _jsxDEV(\"img\", {\n                  className: \"h-12 w-12 rounded-full object-cover border border-gray-200\",\n                  src: student.avatarUrl,\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 49\n                }, this) : _jsxDEV(\"div\", {\n                  className: \"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 font-bold text-xl\",\n                  children: student.studentName.charAt(0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 41\n              }, this), _jsxDEV(\"div\", {\n                className: \"ml-3 flex-1\",\n                children: [_jsxDEV(\"div\", {\n                  className: \"text-sm font-bold text-gray-900\",\n                  children: student.studentName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"ID: \", student.studentId]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 41\n              }, this), _jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [_jsxDEV(\"span\", {\n                  className: `px-3 py-1 text-sm font-bold rounded-full ${student.total >= 50 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`,\n                  children: student.total\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"span\", {\n                  className: \"text-lg font-bold text-purple-600\",\n                  children: student.grade\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 37\n            }, this), _jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3 mb-3\",\n              children: [_jsxDEV(\"div\", {\n                children: [_jsxDEV(\"label\", {\n                  className: \"block text-xs font-medium text-gray-500 mb-1\",\n                  children: \"CA (40)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: student.ca,\n                  onChange: e => handleScoreChange(idx, 'ca', e.target.value),\n                  className: \"w-full text-center border border-gray-300 rounded-lg py-2 text-lg font-semibold focus:ring-purple-500 focus:border-purple-500\",\n                  placeholder: \"0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 41\n              }, this), _jsxDEV(\"div\", {\n                children: [_jsxDEV(\"label\", {\n                  className: \"block text-xs font-medium text-gray-500 mb-1\",\n                  children: \"Exam (60)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 45\n                }, this), _jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: student.exam,\n                  onChange: e => handleScoreChange(idx, 'exam', e.target.value),\n                  className: \"w-full text-center border border-gray-300 rounded-lg py-2 text-lg font-semibold focus:ring-purple-500 focus:border-purple-500\",\n                  placeholder: \"0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 37\n            }, this), _jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500 text-center px-2 py-1 bg-gray-50 rounded\",\n              children: student.remark\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 37\n            }, this)]\n          }, student.studentId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true), _jsxDEV(\"div\", {\n        className: \"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\",\n        children: _jsxDEV(\"div\", {\n          className: \"bg-white p-4 rounded-lg border border-gray-200 shadow-sm\",\n          children: [_jsxDEV(\"h4\", {\n            className: \"font-bold text-gray-700 mb-2 flex items-center text-sm\",\n            children: [_jsxDEV(CalculatorIcon, {\n              className: \"w-4 h-4 mr-1 text-purple-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 96\n            }, this), \" Grading Scale\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 25\n          }, this), _jsxDEV(\"div\", {\n            className: \"space-y-1 text-xs sm:text-sm text-gray-600\",\n            children: [_jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [_jsxDEV(\"span\", {\n                children: \"A (Excellent)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 67\n              }, this), _jsxDEV(\"span\", {\n                children: \"75 - 100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 93\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 29\n            }, this), _jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [_jsxDEV(\"span\", {\n                children: \"B (Very Good)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 67\n              }, this), _jsxDEV(\"span\", {\n                children: \"65 - 74\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 93\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 29\n            }, this), _jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [_jsxDEV(\"span\", {\n                children: \"C (Good)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 67\n              }, this), _jsxDEV(\"span\", {\n                children: \"50 - 64\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 88\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 29\n            }, this), _jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [_jsxDEV(\"span\", {\n                children: \"D (Fair)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 67\n              }, this), _jsxDEV(\"span\", {\n                children: \"45 - 49\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 88\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 29\n            }, this), _jsxDEV(\"div\", {\n              className: \"flex justify-between text-red-600 font-medium\",\n              children: [_jsxDEV(\"span\", {\n                children: \"F (Fail)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 92\n              }, this), _jsxDEV(\"span\", {\n                children: \"0 - 44\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 113\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 298,\n    columnNumber: 9\n  }, this);\n};\nexport default ClassGradebookScreen;","map":{"version":3,"names":["React","useState","useEffect","toast","SaveIcon","CalculatorIcon","CheckCircleIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","getGrade","score","getRemark","grade","ClassGradebookScreen","teacherId","handleBack","classes","setClasses","selectedClass","setSelectedClass","selectedSubject","setSelectedSubject","students","setStudents","loading","setLoading","saving","setSaving","fetchClasses","fetchTeacherById","teacher","realClasses","flatMap","clsStr","subjects","map","subj","gradeMatch","match","parseInt","section","replace","trim","id","subject","studentCount","length","e","console","error","loadData","fetchStudentsByClass","fetchReportCard","clsObj","find","c","studentData","merged","currentSession","currentTerm","s","rc","scoreRecord","academicRecords","r","ca","exam","total","push","studentId","studentName","name","avatarUrl","toString","remark","status","isDirty","err","handleScoreChange","index","field","value","newStudents","entry","Object","assign","numVal","isNaN","handleSave","dirtyEntries","filter","entriesToSave","upsertReportCard","successCount","existingRC","recordIndex","findIndex","newRecord","finalStatus","reportCardToSave","term","session","attendance","present","absent","late","skills","psychomotor","teacherComment","principalComment","success","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","cls","target","onClick","disabled","scope","student","idx","src","alt","charAt","type","placeholder"],"sources":["C:/Users/USER/OneDrive/Desktop/Project/school-app-/components/teacher/ClassGradebookScreen.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { Student, ClassInfo } from '../../types';\r\nimport { toast } from 'react-hot-toast';\r\nimport { SaveIcon, CalculatorIcon, CheckCircleIcon, ExclamationIcon } from '../../constants';\r\n\r\n\r\ninterface GradebookEntry {\r\n    studentId: number;\r\n    studentName: string;\r\n    avatarUrl: string;\r\n    ca: string;   // max 40\r\n    exam: string; // max 60\r\n    total: number;\r\n    grade: string;\r\n    remark: string;\r\n    grade: string;\r\n    remark: string;\r\n    status: 'Draft' | 'Published'; // Draft = Saved locally, Published = Visible to Parents\r\n    isDirty: boolean; // has unsaved changes\r\n}\r\n\r\nconst getGrade = (score: number): string => {\r\n    if (score >= 75) return 'A';\r\n    if (score >= 65) return 'B';\r\n    if (score >= 50) return 'C';\r\n    if (score >= 45) return 'D';\r\n    return 'F';\r\n};\r\n\r\nconst getRemark = (score: number, grade: string): string => {\r\n    if (grade === 'A') return 'Excellent';\r\n    if (grade === 'B') return 'Very Good';\r\n    if (grade === 'C') return 'Good';\r\n    if (grade === 'D') return 'Fair';\r\n    return 'Needs Improvement';\r\n};\r\n\r\nconst ClassGradebookScreen: React.FC<{ teacherId: number; handleBack: () => void }> = ({ teacherId, handleBack }) => {\r\n    const [classes, setClasses] = useState<ClassInfo[]>([]);\r\n    const [selectedClass, setSelectedClass] = useState<string>('');\r\n    const [selectedSubject, setSelectedSubject] = useState<string>('');\r\n    const [students, setStudents] = useState<GradebookEntry[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [saving, setSaving] = useState(false);\r\n\r\n    // Fetch Teacher's Classes (Mock or Real)\r\n    // Fetch Teacher's Classes (Mock or Real)\r\n    useEffect(() => {\r\n        const fetchClasses = async () => {\r\n            try {\r\n                const { fetchTeacherById } = await import('../../lib/database');\r\n                // Assuming teacherId is passed correctly. If not, we might need auth user fallback.\r\n                // But component prop says teacherId.\r\n                const teacher = await fetchTeacherById(teacherId); // You might need to add fetchTeacherById if not exported, or fetchTeachers().find\r\n                // Actually fetchTeachers() returns all. fetchTeacherById(id) exists in `lib/database.ts` (Line 49 is fetchStudentById, fetchTeacherById is likely there too).\r\n                // I'll check/assume it exists or use fetchTeachers logic.\r\n                // Wait, I saw fetchTeacherById in `ReportCardInputScreen` logic? No, it fetched user by email.\r\n                // I'll use fetchTeacherByEmail logic if teacherId is not reliable?\r\n                // But teacherId IS reliable if passed from Dashboard.\r\n                // I'll assume fetchTeacherById exists (Line 300 area).\r\n\r\n                if (teacher) {\r\n                    const realClasses = (teacher.classes || []).flatMap((clsStr: string) =>\r\n                        (teacher.subjects || []).map((subj: string) => {\r\n                            // Parse Grade/Section from \"JSS 1A\" or \"Grade 10A\"\r\n                            const gradeMatch = clsStr.match(/\\d+/);\r\n                            const grade = gradeMatch ? parseInt(gradeMatch[0]) : 0;\r\n                            const section = clsStr.replace(/.*?\\d+/, '').trim() || 'A'; // \"A\" from \"10A\"\r\n\r\n                            return {\r\n                                id: clsStr,\r\n                                grade: grade,\r\n                                section: section,\r\n                                subject: subj,\r\n                                studentCount: 0\r\n                            };\r\n                        })\r\n                    );\r\n                    setClasses(realClasses);\r\n                    if (realClasses.length > 0) {\r\n                        setSelectedClass(realClasses[0].id);\r\n                        setSelectedSubject(realClasses[0].subject);\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.error(\"Error fetching teacher classes\", e);\r\n            }\r\n        };\r\n        fetchClasses();\r\n    }, [teacherId]);\r\n\r\n    // Fetch Students and Grades for selected Class/Subject\r\n    useEffect(() => {\r\n        if (!selectedClass || !selectedSubject) return;\r\n\r\n        const loadData = async () => {\r\n            setLoading(true);\r\n            try {\r\n                // Dynamically import to get latest logic\r\n                const { fetchStudentsByClass, fetchReportCard } = await import('../../lib/database');\r\n\r\n                // Parse class ID \"JSS1-A\" to grade/section if possible, or assume selectedClass IS the ID\r\n                // But earlier mock data had id=\"JSS1-A\".\r\n                // If we are using real data, selectedClass might be \"JSS 1A\" (string).\r\n                // I need to parse \"JSS 1\" -> 1 (Grade) and \"A\" (Section).\r\n                // Or if we fetch classes from DB, we should have grade/section in the object.\r\n                // But `classes` state might just be objects.\r\n                // I'll look at `classes` state.\r\n                const clsObj = classes.find(c => c.id === selectedClass);\r\n                if (!clsObj) {\r\n                    // Should not happen\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                const grade = clsObj.grade;\r\n                const section = clsObj.section;\r\n\r\n                // 1. Fetch Students\r\n                const studentData = await fetchStudentsByClass(grade, section);\r\n\r\n                if (studentData.length === 0) {\r\n                    setStudents([]);\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                // 2. Fetch Existing Report Cards (Grades)\r\n                // We iterate students. For optimization we loops.\r\n                const merged: GradebookEntry[] = [];\r\n                const currentSession = \"2023/2024\";\r\n                const currentTerm = \"First Term\";\r\n\r\n                for (const s of studentData) {\r\n                    const rc = await fetchReportCard(s.id, currentTerm, currentSession);\r\n                    // Find record for this subject\r\n                    const scoreRecord = rc?.academicRecords?.find(r => r.subject === selectedSubject);\r\n\r\n                    const ca = scoreRecord?.ca || 0;\r\n                    const exam = scoreRecord?.exam || 0;\r\n                    const total = scoreRecord?.total || (ca + exam);\r\n\r\n                    merged.push({\r\n                        studentId: s.id,\r\n                        studentName: s.name,\r\n                        avatarUrl: s.avatarUrl || '',\r\n                        ca: ca === 0 ? '' : ca.toString(),\r\n                        exam: exam === 0 ? '' : exam.toString(),\r\n                        total: total,\r\n                        grade: scoreRecord?.grade || getGrade(total),\r\n                        grade: scoreRecord?.grade || getGrade(total),\r\n                        remark: scoreRecord?.remark || getRemark(total, getGrade(total)),\r\n                        status: (rc?.status as 'Draft' | 'Published') || 'Draft',\r\n                        isDirty: false\r\n                    });\r\n                }\r\n\r\n                setStudents(merged);\r\n\r\n            } catch (err) {\r\n                console.error(\"Error loading gradebook:\", err);\r\n                toast.error(\"Failed to load gradebook.\");\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        loadData();\r\n    }, [selectedClass, selectedSubject, classes]);\r\n\r\n    const handleScoreChange = (index: number, field: 'ca' | 'exam', value: string) => {\r\n        const newStudents = [...students];\r\n        const entry = { ...newStudents[index] };\r\n\r\n        // Validation\r\n        let numVal = parseInt(value, 10);\r\n        if (isNaN(numVal)) numVal = 0;\r\n\r\n        if (field === 'ca' && numVal > 40) return; // Max 40\r\n        if (field === 'exam' && numVal > 60) return; // Max 60\r\n\r\n        if (value === '' || !isNaN(parseInt(value))) {\r\n            (entry as any)[field] = value;\r\n            entry.isDirty = true;\r\n\r\n            // Recalculate\r\n            const ca = parseInt(entry.ca || '0', 10);\r\n            const exam = parseInt(entry.exam || '0', 10);\r\n            entry.total = ca + exam;\r\n            entry.grade = getGrade(entry.total);\r\n\r\n            newStudents[index] = entry;\r\n            setStudents(newStudents);\r\n        }\r\n    };\r\n\r\n    const handleSave = async (status: 'Draft' | 'Published' = 'Draft') => {\r\n        const dirtyEntries = students.filter(s => s.isDirty);\r\n        // If publishing, we save ALL students to ensure completeness, or at least dirty ones?\r\n        // Actually, if publishing, we might want to ensure everything is synced.\r\n        // But for MVP let's assume we are saving current edits as Published.\r\n        // If no edits, but user clicks Publish, we should probably re-save all to trigger sync?\r\n        // Let's assume user saves then publishes. Or just save dirty.\r\n        // If user wants to publish existing data without edits, we need to handle that.\r\n        // Let's force save ALL if Publish is clicked, or just handle dirty logic?\r\n        // Simpler: Just save current state.\r\n\r\n        const entriesToSave = status === 'Published' ? students : dirtyEntries;\r\n\r\n        if (entriesToSave.length === 0) {\r\n            toast('No changes to save.');\r\n            return;\r\n        }\r\n\r\n        setSaving(true);\r\n        try {\r\n            const { upsertReportCard } = await import('../../lib/database');\r\n            const currentSession = \"2023/2024\";\r\n            const currentTerm = \"First Term\";\r\n\r\n            let successCount = 0;\r\n\r\n            for (const entry of entriesToSave) {\r\n                const { fetchReportCard } = await import('../../lib/database');\r\n                const existingRC = await fetchReportCard(entry.studentId, currentTerm, currentSession);\r\n\r\n                let academicRecords = existingRC?.academicRecords || [];\r\n\r\n                // Update or Add current subject/record\r\n                const recordIndex = academicRecords.findIndex(r => r.subject === selectedSubject);\r\n                const newRecord = {\r\n                    subject: selectedSubject,\r\n                    ca: parseInt(entry.ca || '0', 10),\r\n                    exam: parseInt(entry.exam || '0', 10),\r\n                    total: entry.total,\r\n                    grade: entry.grade,\r\n                    remark: entry.remark\r\n                };\r\n\r\n                if (recordIndex >= 0) {\r\n                    academicRecords[recordIndex] = newRecord;\r\n                } else {\r\n                    academicRecords.push(newRecord);\r\n                }\r\n\r\n                // If Status is Published, we strictly set it. If Draft, we defer to existing or Draft.\r\n                // Actually, if we click Save (Draft), we shouldn't revert a Published card to Draft unless intentional?\r\n                // Usually \"Save\" on top of published might mean \"Amend\".\r\n                // Let's say: If existing is Published, and we click Save (Draft), do we unpublish?\r\n                // The user requirement says \"save local... then if i want to publish\".\r\n                // Implying Save = Draft/Private.\r\n                // So if I click Save, it should probably be Draft (Private).\r\n                // But we shouldn't accidentally hide results.\r\n                // Let's allow Save to just update records but KEEP existing status if it was already published?\r\n                // No, user said \"nobody can see that save except me\". This implies Save should MAKE it private if it wasn't?\r\n                // Or maybe just \"Save\" = \"Update pending changes\".\r\n                // Let's implement:\r\n                // - Save (Draft): Status = 'Draft'. (Hides from parents if code logic in db holds).\r\n                // - Publish: Status = 'Published'. (Shows to parents).\r\n\r\n                const finalStatus = status;\r\n\r\n                const reportCardToSave = {\r\n                    term: currentTerm,\r\n                    session: currentSession,\r\n                    status: finalStatus,\r\n                    attendance: existingRC?.attendance || { total: 0, present: 0, absent: 0, late: 0 },\r\n                    skills: existingRC?.skills || {},\r\n                    psychomotor: existingRC?.psychomotor || {},\r\n                    teacherComment: existingRC?.teacherComment || '',\r\n                    principalComment: existingRC?.principalComment || '',\r\n                    academicRecords\r\n                };\r\n\r\n                await upsertReportCard(entry.studentId, reportCardToSave as any);\r\n                successCount++;\r\n            }\r\n\r\n            // Mark all as clean\r\n            setStudents(students.map(s => ({ ...s, isDirty: false })));\r\n            if (status === 'Published') {\r\n                toast.success(`Published grades for ${successCount} students!`);\r\n            } else {\r\n                toast.success(`Saved draft for ${successCount} students.`);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error(\"Save error:\", error);\r\n            toast.error(\"Failed to save grades.\");\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-gray-50\">\r\n            {/* Header */}\r\n            <div className=\"px-3 sm:px-6 py-4 bg-white border-b border-gray-200 shadow-sm\">\r\n                <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3\">\r\n                    <div>\r\n                        <h2 className=\"text-lg sm:text-xl font-bold text-gray-800\">Class Gradebook</h2>\r\n                        <p className=\"text-xs sm:text-sm text-gray-500\">Manage CA and Exam scores efficiently</p>\r\n                    </div>\r\n                    <div className=\"flex flex-col sm:flex-row gap-2 sm:space-x-3\">\r\n                        <select\r\n                            value={selectedClass}\r\n                            onChange={e => {\r\n                                const cls = classes.find(c => c.id === e.target.value);\r\n                                setSelectedClass(e.target.value);\r\n                                if (cls) setSelectedSubject(cls.subject);\r\n                            }}\r\n                            className=\"p-2 text-sm border border-gray-300 rounded-md bg-white text-gray-700 font-medium focus:ring-2 focus:ring-purple-500\"\r\n                        >\r\n                            {classes.map(c => <option key={c.id} value={c.id}>{c.id} - {c.subject}</option>)}\r\n                        </select>\r\n\r\n                        <div className=\"flex gap-2\">\r\n                            <button\r\n                                onClick={() => handleSave('Draft')}\r\n                                disabled={saving}\r\n                                className=\"flex-1 sm:flex-none flex items-center justify-center px-3 sm:px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 transition-colors shadow-sm text-sm font-semibold\"\r\n                            >\r\n                                {saving ? <div className=\"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent mr-2\"></div> : <SaveIcon className=\"w-4 h-4 sm:w-5 sm:h-5 mr-2\" />}\r\n                                <span className=\"hidden sm:inline\">Save Draft</span>\r\n                                <span className=\"sm:hidden\">Save</span>\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={() => handleSave('Published')}\r\n                                disabled={saving}\r\n                                className=\"flex-1 sm:flex-none flex items-center justify-center px-3 sm:px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-colors shadow-sm text-sm font-semibold\"\r\n                            >\r\n                                <CheckCircleIcon className=\"w-4 h-4 sm:w-5 sm:h-5 mr-2\" />\r\n                                <span className=\"hidden sm:inline\">Publish</span>\r\n                                <span className=\"sm:hidden\">Pub</span>\r\n                            </button>\r\n\r\n                            <button onClick={handleBack} className=\"px-3 sm:px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 text-sm font-medium\">\r\n                                Close\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content - Table for desktop, Cards for mobile */}\r\n            <div className=\"flex-grow overflow-auto p-3 sm:p-6\">\r\n                {loading ? (\r\n                    <div className=\"bg-white rounded-xl p-10 text-center text-gray-500\">\r\n                        Loading students...\r\n                    </div>\r\n                ) : students.length === 0 ? (\r\n                    <div className=\"bg-white rounded-xl p-10 text-center text-gray-500\">\r\n                        No students found in this class.\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        {/* Desktop Table - hidden on mobile */}\r\n                        <div className=\"hidden lg:block bg-white rounded-xl shadow border border-gray-200 overflow-hidden\">\r\n                            <table className=\"min-w-full divide-y divide-gray-200\">\r\n                                <thead className=\"bg-gray-50\">\r\n                                    <tr>\r\n                                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\">Student</th>\r\n                                        <th scope=\"col\" className=\"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-32\">CA (40)</th>\r\n                                        <th scope=\"col\" className=\"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-32\">Exam (60)</th>\r\n                                        <th scope=\"col\" className=\"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24\">Total</th>\r\n                                        <th scope=\"col\" className=\"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-20\">Grade</th>\r\n                                        <th scope=\"col\" className=\"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24\">Status</th>\r\n                                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\">Remark</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                                    {students.map((student, idx) => (\r\n                                        <tr key={student.studentId} className={student.isDirty ? 'bg-yellow-50' : 'hover:bg-gray-50'}>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                                <div className=\"flex items-center\">\r\n                                                    <div className=\"flex-shrink-0 h-10 w-10\">\r\n                                                        {student.avatarUrl ? (\r\n                                                            <img className=\"h-10 w-10 rounded-full object-cover border border-gray-200\" src={student.avatarUrl} alt=\"\" />\r\n                                                        ) : (\r\n                                                            <div className=\"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 font-bold text-lg\">\r\n                                                                {student.studentName.charAt(0)}\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div className=\"ml-4\">\r\n                                                        <div className=\"text-sm font-bold text-gray-900\">{student.studentName}</div>\r\n                                                        <div className=\"text-xs text-gray-500\">ID: {student.studentId}</div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-center\">\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={student.ca}\r\n                                                    onChange={e => handleScoreChange(idx, 'ca', e.target.value)}\r\n                                                    className=\"w-20 text-center border border-gray-300 rounded-md py-1 focus:ring-purple-500 focus:border-purple-500\"\r\n                                                    placeholder=\"0\"\r\n                                                />\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-center\">\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={student.exam}\r\n                                                    onChange={e => handleScoreChange(idx, 'exam', e.target.value)}\r\n                                                    className=\"w-20 text-center border border-gray-300 rounded-md py-1 focus:ring-purple-500 focus:border-purple-500\"\r\n                                                    placeholder=\"0\"\r\n                                                />\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-center\">\r\n                                                <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${student.total >= 50 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\r\n                                                    {student.total}\r\n                                                </span>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-gray-900\">\r\n                                                {student.grade}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-center\">\r\n                                                <span className={`px-2 py-1 text-xs font-semibold rounded-full ${student.status === 'Published' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-600'}`}>\r\n                                                    {student.status === 'Published' ? 'Published' : 'Draft'}\r\n                                                </span>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                                                {student.remark}\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n\r\n                        {/* Mobile Cards - hidden on desktop */}\r\n                        <div className=\"lg:hidden space-y-3\">\r\n                            {students.map((student, idx) => (\r\n                                <div\r\n                                    key={student.studentId}\r\n                                    className={`bg-white rounded-xl shadow-sm border border-gray-200 p-4 ${student.isDirty ? 'bg-yellow-50 border-yellow-300' : ''}`}\r\n                                >\r\n                                    {/* Student Header */}\r\n                                    <div className=\"flex items-center mb-3 pb-3 border-b border-gray-100\">\r\n                                        <div className=\"flex-shrink-0 h-12 w-12\">\r\n                                            {student.avatarUrl ? (\r\n                                                <img className=\"h-12 w-12 rounded-full object-cover border border-gray-200\" src={student.avatarUrl} alt=\"\" />\r\n                                            ) : (\r\n                                                <div className=\"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 font-bold text-xl\">\r\n                                                    {student.studentName.charAt(0)}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"ml-3 flex-1\">\r\n                                            <div className=\"text-sm font-bold text-gray-900\">{student.studentName}</div>\r\n                                            <div className=\"text-xs text-gray-500\">ID: {student.studentId}</div>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <span className={`px-3 py-1 text-sm font-bold rounded-full ${student.total >= 50 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\r\n                                                {student.total}\r\n                                            </span>\r\n                                            <span className=\"text-lg font-bold text-purple-600\">{student.grade}</span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Score Inputs */}\r\n                                    <div className=\"grid grid-cols-2 gap-3 mb-3\">\r\n                                        <div>\r\n                                            <label className=\"block text-xs font-medium text-gray-500 mb-1\">CA (40)</label>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={student.ca}\r\n                                                onChange={e => handleScoreChange(idx, 'ca', e.target.value)}\r\n                                                className=\"w-full text-center border border-gray-300 rounded-lg py-2 text-lg font-semibold focus:ring-purple-500 focus:border-purple-500\"\r\n                                                placeholder=\"0\"\r\n                                            />\r\n                                        </div>\r\n                                        <div>\r\n                                            <label className=\"block text-xs font-medium text-gray-500 mb-1\">Exam (60)</label>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={student.exam}\r\n                                                onChange={e => handleScoreChange(idx, 'exam', e.target.value)}\r\n                                                className=\"w-full text-center border border-gray-300 rounded-lg py-2 text-lg font-semibold focus:ring-purple-500 focus:border-purple-500\"\r\n                                                placeholder=\"0\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Remark */}\r\n                                    <div className=\"text-xs text-gray-500 text-center px-2 py-1 bg-gray-50 rounded\">\r\n                                        {student.remark}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </>\r\n                )}\r\n\r\n                {/* Summary / Legend */}\r\n                <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                    <div className=\"bg-white p-4 rounded-lg border border-gray-200 shadow-sm\">\r\n                        <h4 className=\"font-bold text-gray-700 mb-2 flex items-center text-sm\"><CalculatorIcon className=\"w-4 h-4 mr-1 text-purple-600\" /> Grading Scale</h4>\r\n                        <div className=\"space-y-1 text-xs sm:text-sm text-gray-600\">\r\n                            <div className=\"flex justify-between\"><span>A (Excellent)</span><span>75 - 100</span></div>\r\n                            <div className=\"flex justify-between\"><span>B (Very Good)</span><span>65 - 74</span></div>\r\n                            <div className=\"flex justify-between\"><span>C (Good)</span><span>50 - 64</span></div>\r\n                            <div className=\"flex justify-between\"><span>D (Fair)</span><span>45 - 49</span></div>\r\n                            <div className=\"flex justify-between text-red-600 font-medium\"><span>F (Fail)</span><span>0 - 44</span></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ClassGradebookScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}